import{j as g,h as S,k as ne,l as W,n as ae,o as se,i as G,q as ie,t as fe,H as ue,u as J,v as B,w as R,C as te,x as le,y as X,z as ve,A as oe,B as k,D as de,m as ce,E as K,F as P,G as Z,I as _e,J as L,K as F,M as $,O as Q,P as he,Q as me,R as pe,S as Ee,T as we,U as Ae,V as y,W as Te,X as Ie}from"./CUZGuqIv.js";import{w as xe}from"./CHwlRkQ7.js";function De(u,n){return n}function Ce(u,n,e){for(var i=u.items,a=[],v=n.length,t=0;t<v;t++)pe(n[t].e,a,!0);var d=v>0&&a.length===0&&e!==null;if(d){var w=e.parentNode;Ee(w),w.append(e),i.clear(),x(u,n[0].prev,n[v-1].next)}we(a,()=>{for(var m=0;m<v;m++){var _=n[m];d||(i.delete(_.k),x(u,_.prev,_.next)),$(_.e,!d)}})}function He(u,n,e,i,a,v=null){var t=u,d={flags:n,items:new Map,first:null},w=(n&y)!==0;if(w){var m=u;t=S?g(ne(m)):m.appendChild(W())}S&&ae();var _=null,q=!1,A=new Map,M=ie(()=>{var c=e();return de(c)?c:c==null?[]:k(c)}),s,o;function l(){qe(o,s,d,A,t,a,n,i,e),v!==null&&(s.length===0?_?Z(_):_=X(()=>v(t)):_!==null&&_e(_,()=>{_=null}))}se(()=>{o??=Ae,s=G(M);var c=s.length;if(q&&c===0)return;q=c===0;let E=!1;if(S){var T=fe(t)===ue;T!==(c===0)&&(t=J(),g(t),B(!1),E=!0)}if(S){for(var C=null,h,r=0;r<c;r++){if(R.nodeType===te&&R.data===le){t=R,E=!0,B(!1);break}var f=s[r],p=i(f,r);h=Y(R,d,C,null,f,p,r,a,n,e),d.items.set(p,h),C=h}c>0&&g(J())}if(S)c===0&&v&&(_=X(()=>v(t)));else if(ve()){var D=new Set,b=oe;for(r=0;r<c;r+=1){f=s[r],p=i(f,r);var N=d.items.get(p)??A.get(p);N?(n&(Q|L))!==0&&j(N,f,r,n):(h=Y(null,d,null,null,f,p,r,a,n,e,!0),A.set(p,h)),D.add(p)}for(const[I,O]of d.items)D.has(I)||b.skipped_effects.add(O.e);b.add_callback(l)}else l();E&&B(!0),G(M)}),S&&(t=R)}function qe(u,n,e,i,a,v,t,d,w){var m=(t&Ie)!==0,_=(t&(Q|L))!==0,q=n.length,A=e.items,M=e.first,s=M,o,l=null,c,E=[],T=[],C,h,r,f;if(m)for(f=0;f<q;f+=1)C=n[f],h=d(C,f),r=A.get(h),r!==void 0&&(r.a?.measure(),(c??=new Set).add(r));for(f=0;f<q;f+=1){if(C=n[f],h=d(C,f),r=A.get(h),r===void 0){var p=i.get(h);if(p!==void 0){i.delete(h),A.set(h,p);var D=l?l.next:s;x(e,l,p),x(e,p,D),U(p,D,a),l=p}else{var b=s?s.e.nodes_start:a;l=Y(b,e,l,l===null?e.first:l.next,C,h,f,v,t,w)}A.set(h,l),E=[],T=[],s=l.next;continue}if(_&&j(r,C,f,t),(r.e.f&F)!==0&&(Z(r.e),m&&(r.a?.unfix(),(c??=new Set).delete(r))),r!==s){if(o!==void 0&&o.has(r)){if(E.length<T.length){var N=T[0],I;l=N.prev;var O=E[0],z=E[E.length-1];for(I=0;I<E.length;I+=1)U(E[I],N,a);for(I=0;I<T.length;I+=1)o.delete(T[I]);x(e,O.prev,z.next),x(e,l,O),x(e,z,N),s=N,l=z,f-=1,E=[],T=[]}else o.delete(r),U(r,s,a),x(e,r.prev,r.next),x(e,r,l===null?e.first:l.next),x(e,l,r),l=r;continue}for(E=[],T=[];s!==null&&s.k!==h;)(s.e.f&F)===0&&(o??=new Set).add(s),T.push(s),s=s.next;if(s===null)continue;r=s}E.push(r),l=r,s=r.next}if(s!==null||o!==void 0){for(var H=o===void 0?[]:k(o);s!==null;)(s.e.f&F)===0&&H.push(s),s=s.next;var V=H.length;if(V>0){var ee=(t&y)!==0&&q===0?a:null;if(m){for(f=0;f<V;f+=1)H[f].a?.measure();for(f=0;f<V;f+=1)H[f].a?.fix()}Ce(e,H,ee)}}m&&Te(()=>{if(c!==void 0)for(r of c)r.a?.apply()}),u.first=e.first&&e.first.e,u.last=l&&l.e;for(var re of i.values())$(re.e);i.clear()}function j(u,n,e,i){(i&Q)!==0&&P(u.v,n),(i&L)!==0?P(u.i,e):u.i=e}function Y(u,n,e,i,a,v,t,d,w,m,_){var q=(w&Q)!==0,A=(w&he)===0,M=q?A?ce(a,!1,!1):K(a):a,s=(w&L)===0?t:K(t),o={i:s,v:M,k:v,a:null,e:null,prev:e,next:i};try{if(u===null){var l=document.createDocumentFragment();l.append(u=W())}return o.e=X(()=>d(u,M,s,m),S),o.e.prev=e&&e.e,o.e.next=i&&i.e,e===null?_||(n.first=o):(e.next=o,e.e.next=o.e),i!==null&&(i.prev=o,i.e.prev=o.e),o}finally{}}function U(u,n,e){for(var i=u.next?u.next.e.nodes_start:e,a=n?n.e.nodes_start:e,v=u.e.nodes_start;v!==null&&v!==i;){var t=me(v);a.before(v),v=t}}function x(u,n,e){n===null?u.first=e:(n.next=e,n.e.next=e&&e.e),e!==null&&(e.prev=n,e.e.prev=n&&n.e)}function Me(){const{subscribe:u,set:n,update:e}=xe({questions:[],current:0,score:0,answers:[],finished:!1,mode:void 0});return{subscribe:u,start:(i,a)=>{const v=a.generateQuestions(i);n({questions:v,current:0,score:0,answers:[],finished:!1,mode:a})},answer:i=>e(a=>{if(!a.mode)return a;const v=a.questions[a.current],t=a.mode.checkAnswer(v,i),d=a.score+(t?1:0),w=[...a.answers,i],m=a.current+1>=a.questions.length;return{...a,current:a.current+1,score:d,answers:w,finished:m}}),reset:()=>n({questions:[],current:0,score:0,answers:[],finished:!1,mode:void 0})}}const Re=Me();export{He as e,De as i,Re as q};
