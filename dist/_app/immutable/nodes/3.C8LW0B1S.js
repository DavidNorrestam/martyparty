import"../chunks/DsnmJJEf.js";import{i as ee}from"../chunks/D5IGNq5k.js";import{c as fe,s as X,e as te,o as he,g as be}from"../chunks/CHwlRkQ7.js";import{h as J,p as se,f as d,d as p,s as k,r as v,a9 as E,i as e,b as n,c as ae,aX as _e,$ as m,a2 as xe,as as we,at as ye,e as H,m as O,a5 as K,a7 as T,q as U}from"../chunks/CUZGuqIv.js";import{p as C,i as L,s as qe,a as ke}from"../chunks/ZZNWNwK_.js";import{e as re,i as ie,q as A}from"../chunks/CHXTsUpk.js";import{s as D}from"../chunks/rCPfacxy.js";import{s as ze,g as R}from"../chunks/B7C0ERxm.js";import{r as W,a as je}from"../chunks/-PI_dqeD.js";function Me(s,a){return s==null?null:String(s)}function Qe(s,a,r,f){var l=s.__style;if(J||l!==a){var t=Me(a);(!J||t!==s.getAttribute("style"))&&(t==null?s.removeAttribute("style"):s.style.cssText=t),s.__style=a}return f}const Se={id:"image-to-swedish",label:"Image → Swedish name",generateQuestions(s){return[...s].sort(()=>Math.random()-.5).slice(0,5).map(r=>({...r,images:r.images||[],answer:r.swedishName}))},checkAnswer(s,a){return a.trim().toLowerCase()===s.swedishName.trim().toLowerCase()}},Y=[Se];var $e=d('<h3 class="svelte-1cbt2hp">Vad är det svenska namnet för växten på bilden?</h3>'),Ae=d('<h3 class="svelte-1cbt2hp">Vad är det latinska namnet för <span> </span>?</h3>'),Le=d('<li class="svelte-1cbt2hp"><button type="button" class="mode-toggle svelte-1cbt2hp"> </button></li>'),Ce=d('<div class="quiz-question svelte-1cbt2hp"><!> <ul class="options-grid svelte-1cbt2hp"></ul></div>');function Z(s,a){se(a,!1);let r=C(a,"question",8),f=C(a,"options",8),l=C(a,"mode",8,"latin");const t=fe();function y(i){t("answer",i)}ee();var o=Ce(),S=p(o);{var N=i=>{var g=$e();n(i,g)},V=i=>{var g=Ae(),b=k(p(g)),q=p(b,!0);v(b),_e(),v(g),E(()=>X(q,(xe(r()),m(()=>r().swedishName)))),n(i,g)};L(S,i=>{l()==="image-to-swedish"?i(N):i(V,!1)})}var z=k(S,2);re(z,5,f,ie,(i,g)=>{var b=Le(),q=p(b),F=p(q,!0);v(q),v(b),E(()=>X(F,e(g))),te("click",q,()=>y(e(g))),n(i,b)}),v(z),v(o),n(s,o),ae()}var Ne=d('<div class="quiz-progress svelte-4hxcfj" role="progressbar" tabindex="0"> <div class="progress-bar svelte-4hxcfj"><div class="progress svelte-4hxcfj"></div></div></div>');function Ve(s,a){let r=C(a,"current",8),f=C(a,"total",8);var l=Ne();D(l,"aria-valuemin",1);var t=p(l),y=k(t),o=p(y);v(y),v(l),E(()=>{D(l,"aria-valuenow",r()),D(l,"aria-valuemax",f()),X(t,`Fråga ${r()??""} av ${f()??""} `),Qe(o,`width: ${100*r()/f()}%`)}),n(s,l)}const Ie=()=>{const s=ze;return{page:{subscribe:s.page.subscribe},navigating:{subscribe:s.navigating.subscribe},updated:s.updated}},Pe={subscribe(s){return Ie().page.subscribe(s)}};var Te=d("<p>Laddar frågor...</p>"),De=d('<img alt="Växtbild" style="max-width:260px;max-height:320px;width:100%;height:320px;object-fit:cover;border-radius:12px;box-shadow:0 2px 12px #0002;background:#e5e7eb;"/>'),Ee=d('<div style="display:inline-block;width:100%;max-width:260px;height:320px;border-radius:12px;background:#e5e7eb;box-shadow:0 2px 12px #0002;position:relative;"><span style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#888;">Laddar bild...</span></div>'),Fe=d('<div style="text-align:center;margin-bottom:1em;display:flex;gap:1em;justify-content:center;overflow-x:auto;"><!></div> <!>',1),He=d("<!> <!>",1),Oe=d("<p>Inga frågor tillgängliga.</p>"),Ue=d('<main><div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:1em;"><h2 style="margin:0;">Quizfrågor</h2> <button style="padding:0.3em 1em;font-size:1em;">Hem</button></div> <!></main>');function et(s,a){se(a,!1);const r=()=>ke(A,"$quiz",f),[f,l]=qe(),t=O();let y=O(!0),o=O(void 0);he(async()=>{const u=be(Pe).url.searchParams.get("mode");H(o,Y.find(c=>c.id===u)||Y[0]);const _=A.subscribe(c=>{c.finished&&R(W("/result"))});A.subscribe(c=>{c.questions.length>0&&H(y,!1)});let h=await(await fetch(je("/plants.json"))).json();return A.start(h,e(o)),_});function S(u){A.answer(u)}function N(u){if(!e(t).questions.length||!e(o))return[];const _=e(t).questions[u].answer,j=e(t).questions.map(c=>c.answer),h=[_];for(;h.length<4&&j.length>h.length;){const c=j[Math.floor(Math.random()*j.length)];h.includes(c)||h.push(c)}return h.sort(()=>Math.random()-.5)}let V=[];we(()=>r(),()=>{H(t,r())}),ye(),ee();var z=Ue(),i=p(z),g=k(p(i),2);v(i);var b=k(i,2);{var q=u=>{var _=Te();n(u,_)},F=u=>{var _=K(),j=T(_);{var h=M=>{var I=He(),B=T(I);{let x=U(()=>(e(t),m(()=>e(t).current+1)));Ve(B,{get current(){return e(x)},get total(){return e(t),m(()=>e(t).questions.length)}})}var ne=k(B,2);{var oe=x=>{var P=Fe(),$=T(P),ue=p($);{var ce=w=>{var Q=K(),ge=T(Q);re(ge,1,()=>V,ie,(me,pe)=>{var G=De();E(()=>D(G,"src",e(pe))),n(me,G)}),n(w,Q)},de=w=>{var Q=Ee();n(w,Q)};L(ue,w=>{m(()=>V.length>0)?w(ce):w(de,!1)})}v($);var ve=k($,2);{let w=U(()=>(e(t),m(()=>N(e(t).current))));Z(ve,{get question(){return e(t),m(()=>e(t).questions[e(t).current])},get options(){return e(w)},get mode(){return e(o)},$$events:{answer:Q=>S(Q.detail)}})}n(x,P)},le=x=>{{let P=U(()=>(e(t),m(()=>N(e(t).current))));Z(x,{get question(){return e(t),m(()=>e(t).questions[e(t).current])},get options(){return e(P)},get mode(){return e(o)},$$events:{answer:$=>S($.detail)}})}};L(ne,x=>{e(o),m(()=>e(o)?.id==="image-to-swedish")?x(oe):x(le,!1)})}n(M,I)},c=M=>{var I=Oe();n(M,I)};L(j,M=>{e(t),m(()=>e(t).questions.length&&!e(t).finished)?M(h):M(c,!1)},!0)}n(u,_)};L(b,u=>{e(y)?u(q):u(F,!1)})}v(z),te("click",g,()=>R(W("/"))),n(s,z),ae(),l()}export{et as component};
