import"../chunks/DsnmJJEf.js";import{i as Zt}from"../chunks/SYV4gySI.js";import{c as _n,o as en,s as ut,g as Sn}from"../chunks/BFMGC_bP.js";import{ba as En,y as P,R as Tn,ae as Ke,v as B,bb as jt,a3 as An,a$ as Cn,h as pe,d as qt,l as ot,bc as In,e as Pn,E as kn,i as Ln,bd as Nn,aG as On,be as Mn,G as jn,g as qn,L as zt,F as Dt,a1 as zn,m as Dn,T as Fn,W as Rn,ad as Bn,z as se,aH as $n,bf as tn,j as Me,aT as Vn,bg as Hn,p as te,a7 as Y,C as $,a as L,b as ne,f as z,aR as Gn,aQ as Wn,aP as Un,al as nn,q as Qn,c as Q,a5 as xe,a6 as Ie,r as W,bh as rn,bi as Xn,s as ce,aV as ve,bj as Kn,n as Ne,aa as ft,Q as Ae,a9 as ie,ab as on,t as dt,D as qe,aU as Yn,bk as Ft,bl as Jn,H as Rt}from"../chunks/00BUH1eq.js";import{p as j,i as ee,r as ue,b as De,c as He,s as Zn,a as er}from"../chunks/Cu1WIsBQ.js";import{e as mt,i as pt,q as Ue}from"../chunks/uBI9sYbC.js";import{s as tr,g as Bt}from"../chunks/DITIDFRM.js";import{r as $t,a as we,s as nr,c as st,b as rr}from"../chunks/BFJ4aEML.js";import{c as _e,B as Fe}from"../chunks/ByTjvTMx.js";import{c as or}from"../chunks/DZwiDgis.js";import{r as Vt,b as sr,C as ir,a as ar}from"../chunks/BBqLmBpK.js";function cr(e){let t=0,n=Tn(0),r;return()=>{En()&&(P(n),Ke(()=>(t===0&&(r=B(()=>e(()=>jt(n)))),t+=1,()=>{An(()=>{t-=1,t===0&&(r?.(),r=void 0,jt(n))})})))}}function lr(){return Symbol(Cn)}function ur(e,t,n,r,s,o){let i=pe;pe&&qt();var c,a,l=null;pe&&ot.nodeType===In&&(l=ot,qt());var p=pe?ot:e,u;Pn(()=>{const f=t()||null;var b=Nn;f!==c&&(u&&(f===null?Dn(u,()=>{u=null,a=null}):f===a?Fn(u):Rn(u)),f&&f!==a&&(u=Ln(()=>{if(l=pe?l:document.createElementNS(b,f),On(l,l),r){pe&&Mn(f)&&l.append(document.createComment(""));var g=pe?jn(l):l.appendChild(qn());pe&&(g===null?zt(!1):Dt(g)),r(l,g)}zn.nodes_end=l,p.before(l)})),c=f,c&&(a=c))},kn),i&&(zt(!0),Dt(p))}function fr(e,t,n){Bn(()=>{var r=B(()=>t(e,n?.())||{});if(n&&r?.update){var s=!1,o={};Ke(()=>{var i=n();se(i),s&&$n(o,i)&&(o=i,r.update(i))}),s=!0}if(r?.destroy)return()=>r.destroy()})}function Ht(e,t,n=t){var r=new WeakSet;tn(e,"input",async s=>{var o=s?e.defaultValue:e.value;if(o=it(e)?at(o):o,n(o),Me!==null&&r.add(Me),await Vn(),o!==(o=t())){var i=e.selectionStart,c=e.selectionEnd;e.value=o??"",c!==null&&(e.selectionStart=i,e.selectionEnd=Math.min(c,e.value.length))}}),(pe&&e.defaultValue!==e.value||B(t)==null&&e.value)&&(n(it(e)?at(e.value):e.value),Me!==null&&r.add(Me)),Ke(()=>{var s=t();if(e===document.activeElement){var o=Hn??Me;if(r.has(o))return}it(e)&&s===at(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function it(e){var t=e.type;return t==="number"||t==="range"}function at(e){return e===""?null:+e}function dr(e,t,n=t){tn(e,"change",()=>{n(e.files)}),pe&&e.files&&n(e.files),Ke(()=>{e.files=t()})}function mr(e){return function(...t){var n=t[0];return n.preventDefault(),e?.apply(this,t)}}const pr={id:"image-to-swedish",label:"Image → Swedish name",generateQuestions(e){return[...e].sort(()=>Math.random()-.5).map(n=>({...n,images:n.images||[],answer:n.swedishName}))},checkAnswer(e,t){return t.trim().toLowerCase()===e.swedishName.trim().toLowerCase()},getOptions(e,t){const n=e[t].answer,r=e.map(o=>o.answer),s=[n];for(;s.length<4&&r.length>s.length;){const o=r[Math.floor(Math.random()*r.length)];s.includes(o)||s.push(o)}return s.sort(()=>Math.random()-.5)}},gr={id:"swedish-to-latin",label:"Swedish name → Latin name",generateQuestions(e){return[...e].sort(()=>Math.random()-.5).map(n=>({...n,question:n.swedishName,answer:n.latinName}))},checkAnswer(e,t){return t.trim().toLowerCase()===e.latinName.trim().toLowerCase()},getOptions(e,t){const n=e[t].answer,r=e.map(o=>o.answer),s=[n];for(;s.length<4&&r.length>s.length;){const o=r[Math.floor(Math.random()*r.length)];s.includes(o)||s.push(o)}return s.sort(()=>Math.random()-.5)}},hr={id:"imageToNameFreetext",label:"Image to name (freetext)",generateQuestions:e=>[...e].sort(()=>Math.random()-.5).map(n=>({images:n.images||[],swedishName:n.swedishName||n.swedish||"",latinName:n.latinName||n.latin||"",answer:""})),checkAnswer:(e,t)=>{let n={};try{n=JSON.parse(t)}catch{return!1}const r=p=>p.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9 ]/gi,"").replace(/\s+/g," ").trim().toLowerCase(),s=e.swedishName||"",o=e.latinName||"",i=n.swedish||"",c=n.latin||"",a=r(i)===r(s),l=r(c)===r(o);return a&&l},getOptions:()=>[]},ct=[pr,gr,hr];var vr=z("<input/>"),br=z("<input/>");function Gt(e,t){te(t,!0);let n=j(t,"ref",15,null),r=j(t,"value",15),s=j(t,"files",15),o=ue(t,["$$slots","$$events","$$legacy","ref","value","type","files","class"]);var i=Y(),c=$(i);{var a=p=>{var u=vr();$t(u),we(u,f=>({"data-slot":"input",class:f,type:"file",...o}),[()=>_e("selection:bg-primary dark:bg-input/30 selection:text-primary-foreground border-input ring-offset-background placeholder:text-muted-foreground shadow-xs flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 pt-1.5 text-sm font-medium outline-none transition-[color,box-shadow] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t.class)]),De(u,f=>n(f),()=>n()),dr(u,s),Ht(u,r),L(p,u)},l=p=>{var u=br();$t(u),we(u,f=>({"data-slot":"input",class:f,type:t.type,...o}),[()=>_e("border-input bg-background selection:bg-primary dark:bg-input/30 selection:text-primary-foreground ring-offset-background placeholder:text-muted-foreground shadow-xs flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base outline-none transition-[color,box-shadow] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t.class)]),De(u,f=>n(f),()=>n()),Ht(u,r),L(p,u)};ee(c,p=>{t.type==="file"?p(a):p(l,!1)})}L(e,i),ne()}const gt=Symbol("EMBLA_CAROUSEL_CONTEXT");function yr(e){return Gn(gt,e),e}function Ye(e="This component"){if(!Wn(gt))throw new Error(`${e} must be used within a <Carousel.Root> component`);return Un(gt)}var xr=z("<div><!></div>");function wr(e,t){te(t,!0);let n=j(t,"ref",15,null),r=j(t,"opts",19,()=>({})),s=j(t,"plugins",19,()=>[]),o=j(t,"setApi",3,()=>{}),i=j(t,"orientation",3,"horizontal"),c=ue(t,["$$slots","$$events","$$legacy","ref","opts","plugins","setApi","orientation","class","children"]),a=nn({api:void 0,scrollPrev:l,scrollNext:p,orientation:i(),canScrollNext:!1,canScrollPrev:!1,handleKeyDown:b,options:r(),plugins:s(),onInit:g,scrollSnaps:[],selectedIndex:0,scrollTo:u});yr(a);function l(){a.api?.scrollPrev()}function p(){a.api?.scrollNext()}function u(d,h){a.api?.scrollTo(d,h)}function f(){a.api&&(a.selectedIndex=a.api.selectedScrollSnap(),a.canScrollNext=a.api.canScrollNext(),a.canScrollPrev=a.api.canScrollPrev())}function b(d){d.key==="ArrowLeft"?(d.preventDefault(),l()):d.key==="ArrowRight"&&(d.preventDefault(),p())}function g(d){a.api=d.detail,o()(a.api),a.scrollSnaps=a.api.scrollSnapList(),a.api.on("select",f),f()}Qn(()=>()=>{a.api?.off("select",f)});var m=xr();we(m,d=>({"data-slot":"carousel",class:d,role:"region","aria-roledescription":"carousel",...c}),[()=>_e("relative",t.class)]);var v=Q(m);xe(v,()=>t.children??Ie),W(m),De(m,d=>n(d),()=>n()),L(e,m),ne()}function _r(e){return Object.prototype.toString.call(e)==="[object Object]"}function Wt(e){return _r(e)||Array.isArray(e)}function Sr(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function yt(e,t){const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;const s=JSON.stringify(Object.keys(e.breakpoints||{})),o=JSON.stringify(Object.keys(t.breakpoints||{}));return s!==o?!1:n.every(i=>{const c=e[i],a=t[i];return typeof c=="function"?`${c}`==`${a}`:!Wt(c)||!Wt(a)?c===a:yt(c,a)})}function Ut(e){return e.concat().sort((t,n)=>t.name>n.name?1:-1).map(t=>t.options)}function Er(e,t){if(e.length!==t.length)return!1;const n=Ut(e),r=Ut(t);return n.every((s,o)=>{const i=r[o];return yt(s,i)})}function xt(e){return typeof e=="number"}function ht(e){return typeof e=="string"}function Je(e){return typeof e=="boolean"}function Qt(e){return Object.prototype.toString.call(e)==="[object Object]"}function F(e){return Math.abs(e)}function wt(e){return Math.sign(e)}function ze(e,t){return F(e-t)}function Tr(e,t){if(e===0||t===0||F(e)<=F(t))return 0;const n=ze(F(e),F(t));return F(n/e)}function Ar(e){return Math.round(e*100)/100}function Re(e){return Be(e).map(Number)}function le(e){return e[Ge(e)]}function Ge(e){return Math.max(0,e.length-1)}function _t(e,t){return t===Ge(e)}function Xt(e,t=0){return Array.from(Array(e),(n,r)=>t+r)}function Be(e){return Object.keys(e)}function sn(e,t){return[e,t].reduce((n,r)=>(Be(r).forEach(s=>{const o=n[s],i=r[s],c=Qt(o)&&Qt(i);n[s]=c?sn(o,i):i}),n),{})}function vt(e,t){return typeof t.MouseEvent<"u"&&e instanceof t.MouseEvent}function Cr(e,t){const n={start:r,center:s,end:o};function r(){return 0}function s(a){return o(a)/2}function o(a){return t-a}function i(a,l){return ht(e)?n[e](a):e(t,a,l)}return{measure:i}}function $e(){let e=[];function t(s,o,i,c={passive:!0}){let a;if("addEventListener"in s)s.addEventListener(o,i,c),a=()=>s.removeEventListener(o,i,c);else{const l=s;l.addListener(i),a=()=>l.removeListener(i)}return e.push(a),r}function n(){e=e.filter(s=>s())}const r={add:t,clear:n};return r}function Ir(e,t,n,r){const s=$e(),o=1e3/60;let i=null,c=0,a=0;function l(){s.add(e,"visibilitychange",()=>{e.hidden&&g()})}function p(){b(),s.clear()}function u(v){if(!a)return;i||(i=v,n(),n());const d=v-i;for(i=v,c+=d;c>=o;)n(),c-=o;const h=c/o;r(h),a&&(a=t.requestAnimationFrame(u))}function f(){a||(a=t.requestAnimationFrame(u))}function b(){t.cancelAnimationFrame(a),i=null,c=0,a=0}function g(){i=null,c=0}return{init:l,destroy:p,start:f,stop:b,update:n,render:r}}function Pr(e,t){const n=t==="rtl",r=e==="y",s=r?"y":"x",o=r?"x":"y",i=!r&&n?-1:1,c=p(),a=u();function l(g){const{height:m,width:v}=g;return r?m:v}function p(){return r?"top":n?"right":"left"}function u(){return r?"bottom":n?"left":"right"}function f(g){return g*i}return{scroll:s,cross:o,startEdge:c,endEdge:a,measureSize:l,direction:f}}function Ce(e=0,t=0){const n=F(e-t);function r(l){return l<e}function s(l){return l>t}function o(l){return r(l)||s(l)}function i(l){return o(l)?r(l)?e:t:l}function c(l){return n?l-n*Math.ceil((l-t)/n):l}return{length:n,max:t,min:e,constrain:i,reachedAny:o,reachedMax:s,reachedMin:r,removeOffset:c}}function an(e,t,n){const{constrain:r}=Ce(0,e),s=e+1;let o=i(t);function i(f){return n?F((s+f)%s):r(f)}function c(){return o}function a(f){return o=i(f),u}function l(f){return p().set(c()+f)}function p(){return an(e,c(),n)}const u={get:c,set:a,add:l,clone:p};return u}function kr(e,t,n,r,s,o,i,c,a,l,p,u,f,b,g,m,v,d,h){const{cross:x,direction:N}=e,w=["INPUT","SELECT","TEXTAREA"],A={passive:!1},_=$e(),C=$e(),k=Ce(50,225).constrain(b.measure(20)),S={mouse:300,touch:400},E={mouse:500,touch:600},O=g?43:25;let T=!1,y=0,M=0,H=!1,re=!1,J=!1,Z=!1;function be(I){if(!h)return;function q(K){(Je(h)||h(I,K))&&Pe(K)}const R=t;_.add(R,"dragstart",K=>K.preventDefault(),A).add(R,"touchmove",()=>{},A).add(R,"touchend",()=>{}).add(R,"touchstart",q).add(R,"mousedown",q).add(R,"touchcancel",X).add(R,"contextmenu",X).add(R,"click",ge,!0)}function G(){_.clear(),C.clear()}function fe(){const I=Z?n:t;C.add(I,"touchmove",U,A).add(I,"touchend",X).add(I,"mousemove",U,A).add(I,"mouseup",X)}function de(I){const q=I.nodeName||"";return w.includes(q)}function ae(){return(g?E:S)[Z?"mouse":"touch"]}function Se(I,q){const R=u.add(wt(I)*-1),K=p.byDistance(I,!g).distance;return g||F(I)<k?K:v&&q?K*.5:p.byIndex(R.get(),0).distance}function Pe(I){const q=vt(I,r);Z=q,J=g&&q&&!I.buttons&&T,T=ze(s.get(),i.get())>=2,!(q&&I.button!==0)&&(de(I.target)||(H=!0,o.pointerDown(I),l.useFriction(0).useDuration(0),s.set(i),fe(),y=o.readPoint(I),M=o.readPoint(I,x),f.emit("pointerDown")))}function U(I){if(!vt(I,r)&&I.touches.length>=2)return X(I);const R=o.readPoint(I),K=o.readPoint(I,x),me=ze(R,y),he=ze(K,M);if(!re&&!Z&&(!I.cancelable||(re=me>he,!re)))return X(I);const Ee=o.pointerMove(I);me>m&&(J=!0),l.useFriction(.3).useDuration(.75),c.start(),s.add(N(Ee)),I.preventDefault()}function X(I){const R=p.byDistance(0,!1).index!==u.get(),K=o.pointerUp(I)*ae(),me=Se(N(K),R),he=Tr(K,me),Ee=O-10*he,ye=d+he/50;re=!1,H=!1,C.clear(),l.useDuration(Ee).useFriction(ye),a.distance(me,!g),Z=!1,f.emit("pointerUp")}function ge(I){J&&(I.stopPropagation(),I.preventDefault(),J=!1)}function oe(){return H}return{init:be,destroy:G,pointerDown:oe}}function Lr(e,t){let r,s;function o(u){return u.timeStamp}function i(u,f){const g=`client${(f||e.scroll)==="x"?"X":"Y"}`;return(vt(u,t)?u:u.touches[0])[g]}function c(u){return r=u,s=u,i(u)}function a(u){const f=i(u)-i(s),b=o(u)-o(r)>170;return s=u,b&&(r=u),f}function l(u){if(!r||!s)return 0;const f=i(s)-i(r),b=o(u)-o(r),g=o(u)-o(s)>170,m=f/b;return b&&!g&&F(m)>.1?m:0}return{pointerDown:c,pointerMove:a,pointerUp:l,readPoint:i}}function Nr(){function e(n){const{offsetTop:r,offsetLeft:s,offsetWidth:o,offsetHeight:i}=n;return{top:r,right:s+o,bottom:r+i,left:s,width:o,height:i}}return{measure:e}}function Or(e){function t(r){return e*(r/100)}return{measure:t}}function Mr(e,t,n,r,s,o,i){const c=[e].concat(r);let a,l,p=[],u=!1;function f(v){return s.measureSize(i.measure(v))}function b(v){if(!o)return;l=f(e),p=r.map(f);function d(h){for(const x of h){if(u)return;const N=x.target===e,w=r.indexOf(x.target),A=N?l:p[w],_=f(N?e:r[w]);if(F(_-A)>=.5){v.reInit(),t.emit("resize");break}}}a=new ResizeObserver(h=>{(Je(o)||o(v,h))&&d(h)}),n.requestAnimationFrame(()=>{c.forEach(h=>a.observe(h))})}function g(){u=!0,a&&a.disconnect()}return{init:b,destroy:g}}function jr(e,t,n,r,s,o){let i=0,c=0,a=s,l=o,p=e.get(),u=0;function f(){const A=r.get()-e.get(),_=!a;let C=0;return _?(i=0,n.set(r),e.set(r),C=A):(n.set(e),i+=A/a,i*=l,p+=i,e.add(i),C=p-u),c=wt(C),u=p,w}function b(){const A=r.get()-t.get();return F(A)<.001}function g(){return a}function m(){return c}function v(){return i}function d(){return x(s)}function h(){return N(o)}function x(A){return a=A,w}function N(A){return l=A,w}const w={direction:m,duration:g,velocity:v,seek:f,settled:b,useBaseFriction:h,useBaseDuration:d,useFriction:N,useDuration:x};return w}function qr(e,t,n,r,s){const o=s.measure(10),i=s.measure(50),c=Ce(.1,.99);let a=!1;function l(){return!(a||!e.reachedAny(n.get())||!e.reachedAny(t.get()))}function p(b){if(!l())return;const g=e.reachedMin(t.get())?"min":"max",m=F(e[g]-t.get()),v=n.get()-t.get(),d=c.constrain(m/i);n.subtract(v*d),!b&&F(v)<o&&(n.set(e.constrain(n.get())),r.useDuration(25).useBaseFriction())}function u(b){a=!b}return{shouldConstrain:l,constrain:p,toggleActive:u}}function zr(e,t,n,r,s){const o=Ce(-t+e,0),i=u(),c=p(),a=f();function l(g,m){return ze(g,m)<=1}function p(){const g=i[0],m=le(i),v=i.lastIndexOf(g),d=i.indexOf(m)+1;return Ce(v,d)}function u(){return n.map((g,m)=>{const{min:v,max:d}=o,h=o.constrain(g),x=!m,N=_t(n,m);return x?d:N||l(v,h)?v:l(d,h)?d:h}).map(g=>parseFloat(g.toFixed(3)))}function f(){if(t<=e+s)return[o.max];if(r==="keepSnaps")return i;const{min:g,max:m}=c;return i.slice(g,m)}return{snapsContained:a,scrollContainLimit:c}}function Dr(e,t,n){const r=t[0],s=n?r-e:le(t);return{limit:Ce(s,r)}}function Fr(e,t,n,r){const o=t.min+.1,i=t.max+.1,{reachedMin:c,reachedMax:a}=Ce(o,i);function l(f){return f===1?a(n.get()):f===-1?c(n.get()):!1}function p(f){if(!l(f))return;const b=e*(f*-1);r.forEach(g=>g.add(b))}return{loop:p}}function Rr(e){const{max:t,length:n}=e;function r(o){const i=o-t;return n?i/-n:0}return{get:r}}function Br(e,t,n,r,s){const{startEdge:o,endEdge:i}=e,{groupSlides:c}=s,a=u().map(t.measure),l=f(),p=b();function u(){return c(r).map(m=>le(m)[i]-m[0][o]).map(F)}function f(){return r.map(m=>n[o]-m[o]).map(m=>-F(m))}function b(){return c(l).map(m=>m[0]).map((m,v)=>m+a[v])}return{snaps:l,snapsAligned:p}}function $r(e,t,n,r,s,o){const{groupSlides:i}=s,{min:c,max:a}=r,l=p();function p(){const f=i(o),b=!e||t==="keepSnaps";return n.length===1?[o]:b?f:f.slice(c,a).map((g,m,v)=>{const d=!m,h=_t(v,m);if(d){const x=le(v[0])+1;return Xt(x)}if(h){const x=Ge(o)-le(v)[0]+1;return Xt(x,le(v)[0])}return g})}return{slideRegistry:l}}function Vr(e,t,n,r,s){const{reachedAny:o,removeOffset:i,constrain:c}=r;function a(g){return g.concat().sort((m,v)=>F(m)-F(v))[0]}function l(g){const m=e?i(g):c(g),v=t.map((h,x)=>({diff:p(h-m,0),index:x})).sort((h,x)=>F(h.diff)-F(x.diff)),{index:d}=v[0];return{index:d,distance:m}}function p(g,m){const v=[g,g+n,g-n];if(!e)return g;if(!m)return a(v);const d=v.filter(h=>wt(h)===m);return d.length?a(d):le(v)-n}function u(g,m){const v=t[g]-s.get(),d=p(v,m);return{index:g,distance:d}}function f(g,m){const v=s.get()+g,{index:d,distance:h}=l(v),x=!e&&o(v);if(!m||x)return{index:d,distance:g};const N=t[d]-h,w=g+p(N,0);return{index:d,distance:w}}return{byDistance:f,byIndex:u,shortcut:p}}function Hr(e,t,n,r,s,o,i){function c(u){const f=u.distance,b=u.index!==t.get();o.add(f),f&&(r.duration()?e.start():(e.update(),e.render(1),e.update())),b&&(n.set(t.get()),t.set(u.index),i.emit("select"))}function a(u,f){const b=s.byDistance(u,f);c(b)}function l(u,f){const b=t.clone().set(u),g=s.byIndex(b.get(),f);c(g)}return{distance:a,index:l}}function Gr(e,t,n,r,s,o,i,c){const a={passive:!0,capture:!0};let l=0;function p(b){if(!c)return;function g(m){if(new Date().getTime()-l>10)return;i.emit("slideFocusStart"),e.scrollLeft=0;const h=n.findIndex(x=>x.includes(m));xt(h)&&(s.useDuration(0),r.index(h,0),i.emit("slideFocus"))}o.add(document,"keydown",u,!1),t.forEach((m,v)=>{o.add(m,"focus",d=>{(Je(c)||c(b,d))&&g(v)},a)})}function u(b){b.code==="Tab"&&(l=new Date().getTime())}return{init:p}}function je(e){let t=e;function n(){return t}function r(a){t=i(a)}function s(a){t+=i(a)}function o(a){t-=i(a)}function i(a){return xt(a)?a:a.get()}return{get:n,set:r,add:s,subtract:o}}function cn(e,t){const n=e.scroll==="x"?i:c,r=t.style;let s=null,o=!1;function i(f){return`translate3d(${f}px,0px,0px)`}function c(f){return`translate3d(0px,${f}px,0px)`}function a(f){if(o)return;const b=Ar(e.direction(f));b!==s&&(r.transform=n(b),s=b)}function l(f){o=!f}function p(){o||(r.transform="",t.getAttribute("style")||t.removeAttribute("style"))}return{clear:p,to:a,toggleActive:l}}function Wr(e,t,n,r,s,o,i,c,a){const p=Re(s),u=Re(s).reverse(),f=d().concat(h());function b(_,C){return _.reduce((k,S)=>k-s[S],C)}function g(_,C){return _.reduce((k,S)=>b(k,C)>0?k.concat([S]):k,[])}function m(_){return o.map((C,k)=>({start:C-r[k]+.5+_,end:C+t-.5+_}))}function v(_,C,k){const S=m(C);return _.map(E=>{const O=k?0:-n,T=k?n:0,y=k?"end":"start",M=S[E][y];return{index:E,loopPoint:M,slideLocation:je(-1),translate:cn(e,a[E]),target:()=>c.get()>M?O:T}})}function d(){const _=i[0],C=g(u,_);return v(C,n,!1)}function h(){const _=t-i[0]-1,C=g(p,_);return v(C,-n,!0)}function x(){return f.every(({index:_})=>{const C=p.filter(k=>k!==_);return b(C,t)<=.1})}function N(){f.forEach(_=>{const{target:C,translate:k,slideLocation:S}=_,E=C();E!==S.get()&&(k.to(E),S.set(E))})}function w(){f.forEach(_=>_.translate.clear())}return{canLoop:x,clear:w,loop:N,loopPoints:f}}function Ur(e,t,n){let r,s=!1;function o(a){if(!n)return;function l(p){for(const u of p)if(u.type==="childList"){a.reInit(),t.emit("slidesChanged");break}}r=new MutationObserver(p=>{s||(Je(n)||n(a,p))&&l(p)}),r.observe(e,{childList:!0})}function i(){r&&r.disconnect(),s=!0}return{init:o,destroy:i}}function Qr(e,t,n,r){const s={};let o=null,i=null,c,a=!1;function l(){c=new IntersectionObserver(g=>{a||(g.forEach(m=>{const v=t.indexOf(m.target);s[v]=m}),o=null,i=null,n.emit("slidesInView"))},{root:e.parentElement,threshold:r}),t.forEach(g=>c.observe(g))}function p(){c&&c.disconnect(),a=!0}function u(g){return Be(s).reduce((m,v)=>{const d=parseInt(v),{isIntersecting:h}=s[d];return(g&&h||!g&&!h)&&m.push(d),m},[])}function f(g=!0){if(g&&o)return o;if(!g&&i)return i;const m=u(g);return g&&(o=m),g||(i=m),m}return{init:l,destroy:p,get:f}}function Xr(e,t,n,r,s,o){const{measureSize:i,startEdge:c,endEdge:a}=e,l=n[0]&&s,p=g(),u=m(),f=n.map(i),b=v();function g(){if(!l)return 0;const h=n[0];return F(t[c]-h[c])}function m(){if(!l)return 0;const h=o.getComputedStyle(le(r));return parseFloat(h.getPropertyValue(`margin-${a}`))}function v(){return n.map((h,x,N)=>{const w=!x,A=_t(N,x);return w?f[x]+p:A?f[x]+u:N[x+1][c]-h[c]}).map(F)}return{slideSizes:f,slideSizesWithGaps:b,startGap:p,endGap:u}}function Kr(e,t,n,r,s,o,i,c,a){const{startEdge:l,endEdge:p,direction:u}=e,f=xt(n);function b(d,h){return Re(d).filter(x=>x%h===0).map(x=>d.slice(x,x+h))}function g(d){return d.length?Re(d).reduce((h,x,N)=>{const w=le(h)||0,A=w===0,_=x===Ge(d),C=s[l]-o[w][l],k=s[l]-o[x][p],S=!r&&A?u(i):0,E=!r&&_?u(c):0,O=F(k-E-(C+S));return N&&O>t+a&&h.push(x),_&&h.push(d.length),h},[]).map((h,x,N)=>{const w=Math.max(N[x-1]||0);return d.slice(w,h)}):[]}function m(d){return f?b(d,n):g(d)}return{groupSlides:m}}function Yr(e,t,n,r,s,o,i){const{align:c,axis:a,direction:l,startIndex:p,loop:u,duration:f,dragFree:b,dragThreshold:g,inViewThreshold:m,slidesToScroll:v,skipSnaps:d,containScroll:h,watchResize:x,watchSlides:N,watchDrag:w,watchFocus:A}=o,_=2,C=Nr(),k=C.measure(t),S=n.map(C.measure),E=Pr(a,l),O=E.measureSize(k),T=Or(O),y=Cr(c,O),M=!u&&!!h,H=u||!!h,{slideSizes:re,slideSizesWithGaps:J,startGap:Z,endGap:be}=Xr(E,k,S,n,H,s),G=Kr(E,O,v,u,k,S,Z,be,_),{snaps:fe,snapsAligned:de}=Br(E,y,k,S,G),ae=-le(fe)+le(J),{snapsContained:Se,scrollContainLimit:Pe}=zr(O,ae,de,h,_),U=M?Se:de,{limit:X}=Dr(ae,U,u),ge=an(Ge(U),p,u),oe=ge.clone(),D=Re(n),I=({dragHandler:ke,scrollBody:nt,scrollBounds:rt,options:{loop:We}})=>{We||rt.constrain(ke.pointerDown()),nt.seek()},q=({scrollBody:ke,translate:nt,location:rt,offsetLocation:We,previousLocation:pn,scrollLooper:gn,slideLooper:hn,dragHandler:vn,animation:bn,eventHandler:Pt,scrollBounds:yn,options:{loop:kt}},Lt)=>{const Nt=ke.settled(),xn=!yn.shouldConstrain(),Ot=kt?Nt:Nt&&xn,Mt=Ot&&!vn.pointerDown();Mt&&bn.stop();const wn=rt.get()*Lt+pn.get()*(1-Lt);We.set(wn),kt&&(gn.loop(ke.direction()),hn.loop()),nt.to(We.get()),Mt&&Pt.emit("settle"),Ot||Pt.emit("scroll")},R=Ir(r,s,()=>I(tt),ke=>q(tt,ke)),K=.68,me=U[ge.get()],he=je(me),Ee=je(me),ye=je(me),Te=je(me),Oe=jr(he,ye,Ee,Te,f,K),Ze=Vr(u,U,ae,X,Te),et=Hr(R,ge,oe,Oe,Ze,Te,i),At=Rr(X),Ct=$e(),dn=Qr(t,n,i,m),{slideRegistry:It}=$r(M,h,U,Pe,G,D),mn=Gr(e,n,It,et,Oe,Ct,i,A),tt={ownerDocument:r,ownerWindow:s,eventHandler:i,containerRect:k,slideRects:S,animation:R,axis:E,dragHandler:kr(E,e,r,s,Te,Lr(E,s),he,R,et,Oe,Ze,ge,i,T,b,g,d,K,w),eventStore:Ct,percentOfView:T,index:ge,indexPrevious:oe,limit:X,location:he,offsetLocation:ye,previousLocation:Ee,options:o,resizeHandler:Mr(t,i,s,n,E,x,C),scrollBody:Oe,scrollBounds:qr(X,ye,Te,Oe,T),scrollLooper:Fr(ae,X,ye,[he,ye,Ee,Te]),scrollProgress:At,scrollSnapList:U.map(At.get),scrollSnaps:U,scrollTarget:Ze,scrollTo:et,slideLooper:Wr(E,O,ae,re,J,fe,U,ye,n),slideFocus:mn,slidesHandler:Ur(t,i,N),slidesInView:dn,slideIndexes:D,slideRegistry:It,slidesToScroll:G,target:Te,translate:cn(E,t)};return tt}function Jr(){let e={},t;function n(l){t=l}function r(l){return e[l]||[]}function s(l){return r(l).forEach(p=>p(t,l)),a}function o(l,p){return e[l]=r(l).concat([p]),a}function i(l,p){return e[l]=r(l).filter(u=>u!==p),a}function c(){e={}}const a={init:n,emit:s,off:i,on:o,clear:c};return a}const Zr={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function eo(e){function t(o,i){return sn(o,i||{})}function n(o){const i=o.breakpoints||{},c=Be(i).filter(a=>e.matchMedia(a).matches).map(a=>i[a]).reduce((a,l)=>t(a,l),{});return t(o,c)}function r(o){return o.map(i=>Be(i.breakpoints||{})).reduce((i,c)=>i.concat(c),[]).map(e.matchMedia)}return{mergeOptions:t,optionsAtMedia:n,optionsMediaQueries:r}}function to(e){let t=[];function n(o,i){return t=i.filter(({options:c})=>e.optionsAtMedia(c).active!==!1),t.forEach(c=>c.init(o,e)),i.reduce((c,a)=>Object.assign(c,{[a.name]:a}),{})}function r(){t=t.filter(o=>o.destroy())}return{init:n,destroy:r}}function Xe(e,t,n){const r=e.ownerDocument,s=r.defaultView,o=eo(s),i=to(o),c=$e(),a=Jr(),{mergeOptions:l,optionsAtMedia:p,optionsMediaQueries:u}=o,{on:f,off:b,emit:g}=a,m=E;let v=!1,d,h=l(Zr,Xe.globalOptions),x=l(h),N=[],w,A,_;function C(){const{container:D,slides:I}=x;A=(ht(D)?e.querySelector(D):D)||e.children[0];const R=ht(I)?A.querySelectorAll(I):I;_=[].slice.call(R||A.children)}function k(D){const I=Yr(e,A,_,r,s,D,a);if(D.loop&&!I.slideLooper.canLoop()){const q=Object.assign({},D,{loop:!1});return k(q)}return I}function S(D,I){v||(h=l(h,D),x=p(h),N=I||N,C(),d=k(x),u([h,...N.map(({options:q})=>q)]).forEach(q=>c.add(q,"change",E)),x.active&&(d.translate.to(d.location.get()),d.animation.init(),d.slidesInView.init(),d.slideFocus.init(oe),d.eventHandler.init(oe),d.resizeHandler.init(oe),d.slidesHandler.init(oe),d.options.loop&&d.slideLooper.loop(),A.offsetParent&&_.length&&d.dragHandler.init(oe),w=i.init(oe,N)))}function E(D,I){const q=G();O(),S(l({startIndex:q},D),I),a.emit("reInit")}function O(){d.dragHandler.destroy(),d.eventStore.clear(),d.translate.clear(),d.slideLooper.clear(),d.resizeHandler.destroy(),d.slidesHandler.destroy(),d.slidesInView.destroy(),d.animation.destroy(),i.destroy(),c.clear()}function T(){v||(v=!0,c.clear(),O(),a.emit("destroy"),a.clear())}function y(D,I,q){!x.active||v||(d.scrollBody.useBaseFriction().useDuration(I===!0?0:x.duration),d.scrollTo.index(D,q||0))}function M(D){const I=d.index.add(1).get();y(I,D,-1)}function H(D){const I=d.index.add(-1).get();y(I,D,1)}function re(){return d.index.add(1).get()!==G()}function J(){return d.index.add(-1).get()!==G()}function Z(){return d.scrollSnapList}function be(){return d.scrollProgress.get(d.offsetLocation.get())}function G(){return d.index.get()}function fe(){return d.indexPrevious.get()}function de(){return d.slidesInView.get()}function ae(){return d.slidesInView.get(!1)}function Se(){return w}function Pe(){return d}function U(){return e}function X(){return A}function ge(){return _}const oe={canScrollNext:re,canScrollPrev:J,containerNode:X,internalEngine:Pe,destroy:T,off:b,on:f,emit:g,plugins:Se,previousScrollSnap:fe,reInit:m,rootNode:U,scrollNext:M,scrollPrev:H,scrollProgress:be,scrollSnapList:Z,scrollTo:y,selectedScrollSnap:G,slideNodes:ge,slidesInView:de,slidesNotInView:ae};return S(t,n),setTimeout(()=>a.emit("init"),0),oe}Xe.globalOptions=void 0;function St(e,t={options:{},plugins:[]}){let n=t,r;return Sr()&&(Xe.globalOptions=St.globalOptions,r=Xe(e,n.options,n.plugins),r.on("init",()=>e.dispatchEvent(new CustomEvent("emblaInit",{detail:r})))),{destroy:()=>{r&&r.destroy()},update:s=>{const o=!yt(n.options,s.options),i=!Er(n.plugins,s.plugins);!o&&!i||(n=s,r&&r.reInit(n.options,n.plugins))}}}St.globalOptions=void 0;var no=z('<div data-slot="carousel-content" class="overflow-hidden"><div><!></div></div>');function ro(e,t){te(t,!0);let n=j(t,"ref",15,null),r=ue(t,["$$slots","$$events","$$legacy","ref","class","children"]);const s=Ye("<Carousel.Content/>");var o=no(),i=Q(o);we(i,a=>({class:a,"data-embla-container":"",...r}),[()=>_e("flex",s.orientation==="horizontal"?"-ml-4":"-mt-4 flex-col",t.class)]);var c=Q(i);xe(c,()=>t.children??Ie),W(i),De(i,a=>n(a),()=>n()),W(o),fr(o,(a,l)=>St?.(a,l),()=>({options:{container:"[data-embla-container]",slides:"[data-embla-slide]",...s.options,axis:s.orientation==="horizontal"?"x":"y"},plugins:s.plugins})),rn("emblaInit",o,function(...a){s.onInit?.apply(this,a)}),L(e,o),ne()}var oo=z("<div><!></div>");function so(e,t){te(t,!0);let n=j(t,"ref",15,null),r=ue(t,["$$slots","$$events","$$legacy","ref","class","children"]);const s=Ye("<Carousel.Item/>");var o=oo();we(o,c=>({"data-slot":"carousel-item",role:"group","aria-roledescription":"slide",class:c,"data-embla-slide":"",...r}),[()=>_e("min-w-0 shrink-0 grow-0 basis-full",s.orientation==="horizontal"?"pl-4":"pt-4",t.class)]);var i=Q(o);xe(i,()=>t.children??Ie),W(o),De(o,c=>n(c),()=>n()),L(e,o),ne()}/**
 * @license @lucide/svelte v0.515.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 */const io={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var ao=Xn("<svg><!><!></svg>");function ln(e,t){te(t,!0);const n=j(t,"color",3,"currentColor"),r=j(t,"size",3,24),s=j(t,"strokeWidth",3,2),o=j(t,"absoluteStrokeWidth",3,!1),i=j(t,"iconNode",19,()=>[]),c=ue(t,["$$slots","$$events","$$legacy","name","color","size","strokeWidth","absoluteStrokeWidth","iconNode","children"]);var a=ao();we(a,u=>({...io,...c,width:r(),height:r(),stroke:n(),"stroke-width":u,class:["lucide-icon lucide",t.name&&`lucide-${t.name}`,t.class]}),[()=>o()?Number(s())*24/Number(r()):s()]);var l=Q(a);mt(l,17,i,pt,(u,f)=>{var b=ve(()=>Kn(P(f),2));let g=()=>P(b)[0],m=()=>P(b)[1];var v=Y(),d=$(v);ur(d,g,!0,(h,x)=>{we(h,()=>({...m()}))}),L(u,v)});var p=ce(l);xe(p,()=>t.children??Ie),W(a),L(e,a),ne()}function co(e,t){te(t,!0);/**
 * @license @lucide/svelte v0.515.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let n=ue(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];ln(e,He({name:"arrow-left"},()=>n,{get iconNode(){return r},children:(s,o)=>{var i=Y(),c=$(i);xe(c,()=>t.children??Ie),L(s,i)},$$slots:{default:!0}})),ne()}var lo=z('<!> <span class="sr-only">Previous slide</span>',1);function uo(e,t){te(t,!0);let n=j(t,"ref",15,null),r=j(t,"variant",3,"outline"),s=j(t,"size",3,"icon"),o=ue(t,["$$slots","$$events","$$legacy","ref","class","variant","size"]);const i=Ye("<Carousel.Previous/>");{let c=ve(()=>!i.canScrollPrev),a=ve(()=>_e("absolute size-8 rounded-full",i.orientation==="horizontal"?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",t.class));Fe(e,He({"data-slot":"carousel-previous",get variant(){return r()},get size(){return s()},get"aria-disabled"(){return P(c)},get class(){return P(a)},get onclick(){return i.scrollPrev},get onkeydown(){return i.handleKeyDown}},()=>o,{get ref(){return n()},set ref(l){n(l)},children:(l,p)=>{var u=lo(),f=$(u);co(f,{class:"size-4"}),Ne(2),L(l,u)},$$slots:{default:!0}}))}ne()}function fo(e,t){te(t,!0);/**
 * @license @lucide/svelte v0.515.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let n=ue(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M5 12h14"}],["path",{d:"m12 5 7 7-7 7"}]];ln(e,He({name:"arrow-right"},()=>n,{get iconNode(){return r},children:(s,o)=>{var i=Y(),c=$(i);xe(c,()=>t.children??Ie),L(s,i)},$$slots:{default:!0}})),ne()}var mo=z('<!> <span class="sr-only">Next slide</span>',1);function po(e,t){te(t,!0);let n=j(t,"ref",15,null),r=j(t,"variant",3,"outline"),s=j(t,"size",3,"icon"),o=ue(t,["$$slots","$$events","$$legacy","ref","class","variant","size"]);const i=Ye("<Carousel.Next/>");{let c=ve(()=>!i.canScrollNext),a=ve(()=>_e("absolute size-8 rounded-full",i.orientation==="horizontal"?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",t.class));Fe(e,He({"data-slot":"carousel-next",get variant(){return r()},get size(){return s()},get"aria-disabled"(){return P(c)},get class(){return P(a)},get onclick(){return i.scrollNext},get onkeydown(){return i.handleKeyDown}},()=>o,{get ref(){return n()},set ref(l){n(l)},children:(l,p)=>{var u=mo(),f=$(u);fo(f,{class:"size-4"}),Ne(2),L(l,u)},$$slots:{default:!0}}))}ne()}var go=z('<img alt="Växtbild" class="quiz-carousel-image svelte-11qjbgp"/>'),ho=z("<!> <!> <!>",1),vo=z('<div class="quiz-carousel-wrapper svelte-11qjbgp"><!></div>'),bo=z('<div class="quiz-image-placeholder svelte-11qjbgp"><span class="svelte-11qjbgp">Laddar bild...</span></div>'),yo=z('<h3 class="svelte-11qjbgp">Vad är det svenska namnet för växten på bilden?</h3>'),xo=z('<h3 class="svelte-11qjbgp">Vad är det latinska namnet för <span> </span>?</h3>'),wo=z('<h3 class="svelte-11qjbgp">Vad heter växten på bilderna? <span class="quiz-question-desc svelte-11qjbgp">Ange både svenska och latinska namnet.</span></h3>'),_o=z('<div class="answer-grid svelte-11qjbgp"></div>'),So=z('<form class="freetext-form svelte-11qjbgp"><!> <!> <!></form>'),Eo=z('<div class="quiz-question svelte-11qjbgp"><!> <!> <div class="quiz-divider svelte-11qjbgp"></div> <!></div>');function To(e,t){te(t,!1);let n=j(t,"question",8),r=j(t,"options",8),s=j(t,"mode",8),o=j(t,"loadingImages",8,!1);const i=_n();let c=Ae(""),a=Ae("");function l(w){i("answer",w)}function p(w){w.preventDefault(),i("answer",JSON.stringify({swedish:P(c),latin:P(a)})),ie(c,""),ie(a,""),setTimeout(()=>{document.querySelector(".freetext-input.swedish")?.focus()},0)}en(()=>{s()?.id==="imageToNameFreetext"&&document.querySelector(".freetext-input.swedish")?.focus()});let u=Ae("");ft(()=>(se(s()),se(n()),P(u)),()=>{const w=s()?.id==="imageToNameFreetext"&&n()?`${n().swedishName}|${n().latinName}`:"";w&&w!==P(u)&&(ie(u,w),setTimeout(()=>{document.querySelector(".freetext-input.swedish")?.focus()},0))}),on(),Zt();var f=Eo(),b=Q(f);{var g=w=>{var A=Y(),_=$(A);{var C=S=>{var E=vo(),O=Q(E);wr(O,{opts:{align:"center",loop:!0},children:(T,y)=>{var M=ho(),H=$(M);ro(H,{class:"-ml-4",children:(Z,be)=>{var G=Y(),fe=$(G);mt(fe,1,()=>(se(n()),B(()=>n().images)),pt,(de,ae)=>{so(de,{class:"carousel-peek",children:(Se,Pe)=>{var U=go();qe(()=>nr(U,"src",P(ae))),L(Se,U)},$$slots:{default:!0}})}),L(Z,G)},$$slots:{default:!0}});var re=ce(H,2);uo(re,{class:"carousel-nav-btn prev","aria-label":"Föregående bild"});var J=ce(re,2);po(J,{class:"carousel-nav-btn next","aria-label":"Nästa bild"}),L(T,M)},$$slots:{default:!0}}),W(E),L(S,E)},k=S=>{var E=Y(),O=$(E);{var T=y=>{var M=bo();L(y,M)};ee(O,y=>{o()&&y(T)},!0)}L(S,E)};ee(_,S=>{se(n()),B(()=>n()?.images&&n().images.length>0)?S(C):S(k,!1)})}L(w,A)};ee(b,w=>{se(s()),B(()=>s()?.id==="image-to-swedish"||s()?.id==="imageToNameFreetext")&&w(g)})}var m=ce(b,2);{var v=w=>{var A=yo();L(w,A)},d=w=>{var A=Y(),_=$(A);{var C=S=>{var E=xo(),O=ce(Q(E)),T=Q(O,!0);W(O),Ne(),W(E),qe(()=>ut(T,(se(n()),B(()=>n()?.swedishName)))),L(S,E)},k=S=>{var E=Y(),O=$(E);{var T=y=>{var M=wo();L(y,M)};ee(O,y=>{se(s()),B(()=>s()?.id==="imageToNameFreetext")&&y(T)},!0)}L(S,E)};ee(_,S=>{se(s()),B(()=>s()?.id==="swedish-to-latin")?S(C):S(k,!1)},!0)}L(w,A)};ee(m,w=>{se(s()),B(()=>s()?.id==="image-to-swedish")?w(v):w(d,!1)})}var h=ce(m,4);{var x=w=>{var A=_o();mt(A,5,r,pt,(_,C)=>{Fe(_,{type:"button",class:"mode-toggle answer-btn",onclick:()=>l(P(C)),children:(k,S)=>{Ne();var E=dt();qe(()=>ut(E,P(C))),L(k,E)},$$slots:{default:!0}})}),W(A),L(w,A)},N=w=>{var A=Y(),_=$(A);{var C=k=>{var S=So(),E=Q(S);Gt(E,{type:"text",placeholder:"Svenskt namn",required:!0,autocomplete:"off",class:"freetext-input swedish",get value(){return P(c)},set value(y){ie(c,y)},$$legacy:!0});var O=ce(E,2);Gt(O,{type:"text",placeholder:"Latinskt namn",required:!0,autocomplete:"off",class:"freetext-input",get value(){return P(a)},set value(y){ie(a,y)},$$legacy:!0});var T=ce(O,2);Fe(T,{type:"submit",class:"mode-toggle",style:"width:100%;",children:(y,M)=>{Ne();var H=dt("Svara");L(y,H)},$$slots:{default:!0}}),W(S),rn("submit",S,mr(p)),L(k,S)};ee(_,k=>{se(s()),B(()=>s()?.id==="imageToNameFreetext")&&k(C)},!0)}L(w,A)};ee(h,w=>{se(s()),B(()=>s()?.id==="image-to-swedish"||s()?.id==="swedish-to-latin")?w(x):w(N,!1)})}W(f),L(e,f),ne()}function Ao(e){return typeof e=="function"}function Co(e){return e!==null&&typeof e=="object"}const Io=["string","number","bigint","boolean"];function bt(e){return e==null||Io.includes(typeof e)?!0:Array.isArray(e)?e.every(t=>bt(t)):typeof e=="object"?Object.getPrototypeOf(e)===Object.prototype:!1}const Ve=Symbol("box"),Et=Symbol("is-writable");function Po(e){return Co(e)&&Ve in e}function ko(e){return V.isBox(e)&&Et in e}function V(e){let t=Yn(nn(e));return{[Ve]:!0,[Et]:!0,get current(){return P(t)},set current(n){ie(t,n,!0)}}}function Lo(e,t){const n=ve(e);return t?{[Ve]:!0,[Et]:!0,get current(){return P(n)},set current(r){t(r)}}:{[Ve]:!0,get current(){return e()}}}function No(e){return V.isBox(e)?e:Ao(e)?V.with(e):V(e)}function Oo(e){return Object.entries(e).reduce((t,[n,r])=>V.isBox(r)?(V.isWritableBox(r)?Object.defineProperty(t,n,{get(){return r.current},set(s){r.current=s}}):Object.defineProperty(t,n,{get(){return r.current}}),t):Object.assign(t,{[n]:r}),{})}function Mo(e){return V.isWritableBox(e)?{[Ve]:!0,get current(){return e.current}}:e}V.from=No;V.with=Lo;V.flatten=Oo;V.readonly=Mo;V.isBox=Po;V.isWritableBox=ko;function jo(...e){return function(t){for(const n of e)if(n){if(t.defaultPrevented)return;typeof n=="function"?n.call(this,t):n.current?.call(this,t)}}}function qo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Le={},lt,Kt;function zo(){if(Kt)return lt;Kt=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,i=/^[;\s]*/,c=/^\s+|\s+$/g,a=`
`,l="/",p="*",u="",f="comment",b="declaration";lt=function(m,v){if(typeof m!="string")throw new TypeError("First argument must be a string");if(!m)return[];v=v||{};var d=1,h=1;function x(T){var y=T.match(t);y&&(d+=y.length);var M=T.lastIndexOf(a);h=~M?T.length-M:h+T.length}function N(){var T={line:d,column:h};return function(y){return y.position=new w(T),C(),y}}function w(T){this.start=T,this.end={line:d,column:h},this.source=v.source}w.prototype.content=m;function A(T){var y=new Error(v.source+":"+d+":"+h+": "+T);if(y.reason=T,y.filename=v.source,y.line=d,y.column=h,y.source=m,!v.silent)throw y}function _(T){var y=T.exec(m);if(y){var M=y[0];return x(M),m=m.slice(M.length),y}}function C(){_(n)}function k(T){var y;for(T=T||[];y=S();)y!==!1&&T.push(y);return T}function S(){var T=N();if(!(l!=m.charAt(0)||p!=m.charAt(1))){for(var y=2;u!=m.charAt(y)&&(p!=m.charAt(y)||l!=m.charAt(y+1));)++y;if(y+=2,u===m.charAt(y-1))return A("End of comment missing");var M=m.slice(2,y-2);return h+=2,x(M),m=m.slice(y),h+=2,T({type:f,comment:M})}}function E(){var T=N(),y=_(r);if(y){if(S(),!_(s))return A("property missing ':'");var M=_(o),H=T({type:b,property:g(y[0].replace(e,u)),value:M?g(M[0].replace(e,u)):u});return _(i),H}}function O(){var T=[];k(T);for(var y;y=E();)y!==!1&&(T.push(y),k(T));return T}return C(),O()};function g(m){return m?m.replace(c,u):u}return lt}var Yt;function Do(){if(Yt)return Le;Yt=1;var e=Le&&Le.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Le,"__esModule",{value:!0}),Le.default=n;var t=e(zo());function n(r,s){var o=null;if(!r||typeof r!="string")return o;var i=(0,t.default)(r),c=typeof s=="function";return i.forEach(function(a){if(a.type==="declaration"){var l=a.property,p=a.value;c?s(l,p,a):p&&(o=o||{},o[l]=p)}}),o}return Le}var Fo=Do();const Jt=qo(Fo),Ro=Jt.default||Jt,Bo=/\d/,$o=["-","_","/","."];function Vo(e=""){if(!Bo.test(e))return e!==e.toLowerCase()}function Ho(e){const t=[];let n="",r,s;for(const o of e){const i=$o.includes(o);if(i===!0){t.push(n),n="",r=void 0;continue}const c=Vo(o);if(s===!1){if(r===!1&&c===!0){t.push(n),n=o,r=c;continue}if(r===!0&&c===!1&&n.length>1){const a=n.at(-1);t.push(n.slice(0,Math.max(0,n.length-1))),n=a+o,r=c;continue}}n+=o,r=c,s=i}return t.push(n),t}function un(e){return e?Ho(e).map(t=>Wo(t)).join(""):""}function Go(e){return Uo(un(e||""))}function Wo(e){return e?e[0].toUpperCase()+e.slice(1):""}function Uo(e){return e?e[0].toLowerCase()+e.slice(1):""}function Qe(e){if(!e)return{};const t={};function n(r,s){if(r.startsWith("-moz-")||r.startsWith("-webkit-")||r.startsWith("-ms-")||r.startsWith("-o-")){t[un(r)]=s;return}if(r.startsWith("--")){t[r]=s;return}t[Go(r)]=s}return Ro(e,n),t}function Qo(...e){return(...t)=>{for(const n of e)typeof n=="function"&&n(...t)}}function Xo(e,t){const n=RegExp(e,"g");return r=>{if(typeof r!="string")throw new TypeError(`expected an argument of type string, but got ${typeof r}`);return r.match(n)?r.replace(n,t):r}}const Ko=Xo(/[A-Z]/,e=>`-${e.toLowerCase()}`);function Yo(e){if(!e||typeof e!="object"||Array.isArray(e))throw new TypeError(`expected an argument of type object, but got ${typeof e}`);return Object.keys(e).map(t=>`${Ko(t)}: ${e[t]};`).join(`
`)}function fn(e={}){return Yo(e).replace(`
`," ")}const Jo={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",transform:"translateX(-100%)"};fn(Jo);const Zo=["onabort","onanimationcancel","onanimationend","onanimationiteration","onanimationstart","onauxclick","onbeforeinput","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncompositionend","oncompositionstart","oncompositionupdate","oncontextlost","oncontextmenu","oncontextrestored","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onfocusin","onfocusout","onformdata","ongotpointercapture","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onlostpointercapture","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onpaste","onpause","onplay","onplaying","onpointercancel","onpointerdown","onpointerenter","onpointerleave","onpointermove","onpointerout","onpointerover","onpointerup","onprogress","onratechange","onreset","onresize","onscroll","onscrollend","onsecuritypolicyviolation","onseeked","onseeking","onselect","onselectionchange","onselectstart","onslotchange","onstalled","onsubmit","onsuspend","ontimeupdate","ontoggle","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ontransitioncancel","ontransitionend","ontransitionrun","ontransitionstart","onvolumechange","onwaiting","onwebkitanimationend","onwebkitanimationiteration","onwebkitanimationstart","onwebkittransitionend","onwheel"],es=new Set(Zo);function ts(e){return es.has(e)}function ns(...e){const t={...e[0]};for(let n=1;n<e.length;n++){const r=e[n];if(r){for(const s of Object.keys(r)){const o=t[s],i=r[s],c=typeof o=="function",a=typeof i=="function";if(c&&ts(s)){const l=o,p=i;t[s]=jo(l,p)}else if(c&&a)t[s]=Qo(o,i);else if(s==="class"){const l=bt(o),p=bt(i);l&&p?t[s]=st(o,i):l?t[s]=st(o):p&&(t[s]=st(i))}else if(s==="style"){const l=typeof o=="object",p=typeof i=="object",u=typeof o=="string",f=typeof i=="string";if(l&&p)t[s]={...o,...i};else if(l&&f){const b=Qe(i);t[s]={...o,...b}}else if(u&&p){const b=Qe(o);t[s]={...b,...i}}else if(u&&f){const b=Qe(o),g=Qe(i);t[s]={...b,...g}}else l?t[s]=o:p?t[s]=i:u?t[s]=o:f&&(t[s]=i)}else t[s]=i!==void 0?i:o}for(const s of Object.getOwnPropertySymbols(r)){const o=t[s],i=r[s];t[s]=i!==void 0?i:o}}}return typeof t.style=="object"&&(t.style=fn(t.style).replaceAll(`
`," ")),t.hidden!==!0&&(t.hidden=void 0,delete t.hidden),t.disabled!==!0&&(t.disabled=void 0,delete t.disabled),t}const rs=typeof window<"u"?window:void 0;function os(e){let t=e.activeElement;for(;t?.shadowRoot;){const n=t.shadowRoot.activeElement;if(n===t)break;t=n}return t}class ss{#e;#t;constructor(t={}){const{window:n=rs,document:r=n?.document}=t;n!==void 0&&(this.#e=r,this.#t=cr(s=>{const o=Ft(n,"focusin",s),i=Ft(n,"focusout",s);return()=>{o(),i()}}))}get current(){return this.#t?.(),this.#e?os(this.#e):null}}new ss;function is(e,t){return{[lr()]:n=>V.isBox(e)?(e.current=n,B(()=>t?.(n)),()=>{"isConnected"in n&&n.isConnected||(e.current=null)}):(e(n),B(()=>t?.(n)),()=>{"isConnected"in n&&n.isConnected||e(null)})}}class as{#e;#t;attrs;constructor(t){this.#e=t.getVariant?t.getVariant():null,this.#t=this.#e?`data-${this.#e}-`:`data-${t.component}-`,this.getAttr=this.getAttr.bind(this),this.selector=this.selector.bind(this),this.attrs=Object.fromEntries(t.parts.map(n=>[n,this.getAttr(n)]))}getAttr(t,n){return n?`data-${n}-${t}`:`${this.#t}${t}`}selector(t,n){return`[${this.getAttr(t,n)}]`}}function cs(e){const t=new as(e);return{...t.attrs,selector:t.selector,getAttr:t.getAttr}}function ls(e,t){return`bits-${e}`}const us=cs({component:"progress",parts:["root"]});class Tt{static create(t){return new Tt(t)}opts;attachment;constructor(t){this.opts=t,this.attachment=is(this.opts.ref)}#e=ve(()=>({role:"progressbar",value:this.opts.value.current,"aria-valuemin":this.opts.min.current,"aria-valuemax":this.opts.max.current,"aria-valuenow":this.opts.value.current===null?void 0:this.opts.value.current,"data-value":this.opts.value.current===null?void 0:this.opts.value.current,"data-state":fs(this.opts.value.current,this.opts.max.current),"data-max":this.opts.max.current,"data-min":this.opts.min.current,"data-indeterminate":this.opts.value.current===null?"":void 0,[us.root]:"",...this.attachment}));get props(){return P(this.#e)}set props(t){ie(this.#e,t)}}function fs(e,t){return e===null?"indeterminate":e===t?"loaded":"loading"}var ds=z("<div><!></div>");function ms(e,t){const n=Jn();te(t,!0);let r=j(t,"value",3,0),s=j(t,"max",3,100),o=j(t,"min",3,0),i=j(t,"id",19,()=>ls(n)),c=j(t,"ref",15,null),a=ue(t,["$$slots","$$events","$$legacy","child","children","value","max","min","id","ref"]);const l=Tt.create({value:V.with(()=>r()),max:V.with(()=>s()),min:V.with(()=>o()),id:V.with(()=>i()),ref:V.with(()=>c(),m=>c(m))}),p=ve(()=>ns(a,l.props));var u=Y(),f=$(u);{var b=m=>{var v=Y(),d=$(v);xe(d,()=>t.child,()=>({props:P(p)})),L(m,v)},g=m=>{var v=ds();we(v,()=>({...P(p)}));var d=Q(v);xe(d,()=>t.children??Ie),W(v),L(m,v)};ee(f,m=>{t.child?m(b):m(g,!1)})}L(e,u),ne()}var ps=z('<div data-slot="progress-indicator" class="bg-primary h-full w-full flex-1 transition-all"></div>');function gs(e,t){te(t,!0);let n=j(t,"ref",15,null),r=j(t,"max",3,100),s=ue(t,["$$slots","$$events","$$legacy","ref","class","max","value"]);var o=Y(),i=$(o);{let c=ve(()=>_e("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t.class));or(i,()=>ms,(a,l)=>{l(a,He({"data-slot":"progress",get class(){return P(c)},get value(){return t.value},get max(){return r()}},()=>s,{get ref(){return n()},set ref(p){n(p)},children:(p,u)=>{var f=ps();qe(()=>rr(f,`transform: translateX(-${100-100*(t.value??0)/(r()??1)}%)`)),L(p,f)},$$slots:{default:!0}}))})}L(e,o),ne()}var hs=z('<div class="quiz-progress svelte-m2m21z"><div class="progress-label svelte-m2m21z"> </div> <!></div>');function vs(e,t){let n=j(t,"current",8),r=j(t,"total",8);var s=hs(),o=Q(s),i=Q(o);W(o);var c=ce(o,2);gs(c,{get value(){return n()},get max(){return r()},"aria-label":"Quiz progress"}),W(s),qe(()=>ut(i,`Fråga ${n()??""} av ${r()??""}`)),L(e,s)}const bs=()=>{const e=tr;return{page:{subscribe:e.page.subscribe},navigating:{subscribe:e.navigating.subscribe},updated:e.updated}},ys={subscribe(e){return bs().page.subscribe(e)}};var xs=z('<div class="quiz-loading-overlay svelte-1nnq7wb"><div class="spinner svelte-1nnq7wb"></div> <div class="loading-text svelte-1nnq7wb">Laddar frågor<span class="dot one svelte-1nnq7wb">.</span><span class="dot two svelte-1nnq7wb">.</span><span class="dot three svelte-1nnq7wb">.</span></div></div>'),ws=z('<div class="card-progress-bar svelte-1nnq7wb"><!></div> <!>',1),_s=z('<div style="display: flex; justify-content: center; margin-top: 2em;" class="svelte-1nnq7wb"><!></div>'),Ss=z('<p class="quiz-loading svelte-1nnq7wb">Inga frågor tillgängliga.</p>'),Es=z('<main class="svelte-1nnq7wb"><!> <!></main>');function qs(e,t){te(t,!1);const n=()=>er(Ue,"$quiz",r),[r,s]=Zn(),o=Ae();let i=Ae(!0),c=Ae(void 0);async function a(h){let x=h.latinName.replace(/"[^"]*"|'[^']*'/g,"").replace(/\s+sp\.?$/i,"").trim();h.latinName.trim().toLowerCase()==="antirrhinum majus"&&(x=x.split(" ")[0]);try{const w=await(await fetch(`https://api.inaturalist.org/v1/taxa?q=${encodeURIComponent(x)}`)).json();if(!w.results||w.results.length===0)return[];const A=w.results[0].id,C=await(await fetch(`https://api.inaturalist.org/v1/taxa/${A}`)).json();let k=[];C.results&&C.results.length>0&&C.results[0].taxon_photos&&(k=C.results[0].taxon_photos.map(E=>E.photo?.medium_url||E.photo?.url).filter(Boolean));let S=Array.from(new Set(k));if(S.length<3)try{const O=await(await fetch(`https://api.inaturalist.org/v1/observations?taxon_name=${encodeURIComponent(x)}&photos=true`)).json();if(O.results&&O.results.length>0){let T=O.results.flatMap(y=>(y.photos||[]).map(M=>M.medium_url||M.url)).filter(Boolean);for(let y=T.length-1;y>0;y--){const M=Math.floor(Math.random()*(y+1));[T[y],T[M]]=[T[M],T[y]]}for(const y of T){if(S.length>=3)break;S.includes(y)||S.push(y)}}}catch{}if(S.length>3){for(let E=S.length-1;E>0;E--){const O=Math.floor(Math.random()*(E+1));[S[E],S[O]]=[S[O],S[E]]}return S.slice(0,3)}else return S.length>0?S:[]}catch{return[]}}async function l(h){const x=ct.find(A=>A.id===h)||ct[0];ie(c,x),P(c).id,ie(i,!0);let w=await(await fetch(sr("/plants.json"))).json();P(c)&&(P(c).id==="image-to-swedish"||P(c).id==="imageToNameFreetext")&&(w=await Promise.all(w.map(async A=>{const _=await a(A);return{...A,images:_}}))),P(c)&&Ue.start(w,P(c)),ie(i,!1)}en(()=>{const x=Sn(ys).url.searchParams.get("mode")||ct[0].id;return l(x),Ue.subscribe(w=>{w.finished&&Bt(Vt("/result"))})});function p(h){Ue.answer(h)}function u(h){return!P(o).questions.length||!P(c)?[]:P(c).getOptions(P(o).questions,h)}let f=Ae(!1);ft(()=>n(),()=>{ie(o,n())}),ft(()=>(P(i),P(c)),()=>{ie(f,P(i)&&(P(c)?.id==="image-to-swedish"||P(c)?.id==="imageToNameFreetext"))}),on(),Zt();var b=Es(),g=Q(b);Fe(g,{onclick:()=>Bt(Vt("/")),class:"floating-home-btn","aria-label":"Hem",children:(h,x)=>{Ne();var N=dt("Hem");L(h,N)},$$slots:{default:!0}});var m=ce(g,2);{var v=h=>{var x=xs();L(h,x)},d=h=>{var x=Y(),N=$(x);{var w=_=>{var C=_s(),k=Q(C);ir(k,{style:"max-width: 480px; width: 100%; min-height: 420px; box-shadow: 0 2px 16px #0001; position: relative; display: flex; flex-direction: column; justify-content: flex-start;",children:(S,E)=>{var O=ws(),T=$(O),y=Q(T);{let H=Rt(()=>(P(o),B(()=>P(o).current+1)));vs(y,{get current(){return P(H)},get total(){return P(o),B(()=>P(o).questions.length)}})}W(T);var M=ce(T,2);ar(M,{children:(H,re)=>{var J=Y(),Z=$(J);{var be=G=>{{let fe=Rt(()=>(P(o),B(()=>u(P(o).current))));To(G,{get question(){return P(o),B(()=>P(o).questions[P(o).current])},get options(){return P(fe)},get mode(){return P(c)},get loadingImages(){return P(f)},$$events:{answer:de=>p(de.detail)}})}};ee(Z,G=>{P(c)&&G(be)})}L(H,J)},$$slots:{default:!0}}),L(S,O)},$$slots:{default:!0}}),W(C),L(_,C)},A=_=>{var C=Ss();L(_,C)};ee(N,_=>{P(o),B(()=>P(o).questions.length&&!P(o).finished)?_(w):_(A,!1)},!0)}L(h,x)};ee(m,h=>{P(i)?h(v):h(d,!1)})}W(b),L(e,b),ne(),s()}export{qs as component};
