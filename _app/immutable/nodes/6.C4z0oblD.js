import"../chunks/DsnmJJEf.js";import{i as be}from"../chunks/DhL1VCxM.js";import{p as we,f as w,$ as a,a5 as x,a as r,b as ye,s as v,e as W,m as j,g as e,c as n,r as i,n as de,d as q,ae as ce,af as Ae,t as b,a6 as te,y as De}from"../chunks/BdU2Qewh.js";import{o as Ie,s as f}from"../chunks/Ai-LNryd.js";import{p as he,i as h,b as Se,a as Je,c as Oe}from"../chunks/QrMPNVZ5.js";import{e as ge,i as xe}from"../chunks/B0n3dYTo.js";import{b as ie}from"../chunks/DVit7hfp.js";import{q as pe}from"../chunks/K8fGTgIc.js";import{g as Qe}from"../chunks/IJSbyBPa.js";import{r as We,C as je,a as Ee}from"../chunks/Dox1Eiq0.js";import{B as Ge}from"../chunks/DFPvdS-z.js";var Ke=w('<canvas class="confetti-canvas svelte-17e6nia" width="320" height="180" aria-hidden="true"></canvas>'),Le=w('<div class="congrats svelte-17e6nia">ðŸŽ‰ Perfekt! Alla rÃ¤tt! ðŸŽ‰</div> <!>',1),Ue=w('<div class="quiz-result svelte-17e6nia"><h2 class="svelte-17e6nia">Resultat</h2> <div class="progress-container svelte-17e6nia"><svg width="120" height="120" viewBox="0 0 120 120" class="svelte-17e6nia"><circle class="progress-bg svelte-17e6nia" cx="60" cy="60" r="52" stroke="#e5e7eb" stroke-width="12" fill="none"></circle><circle class="progress-bar svelte-17e6nia" cx="60" cy="60" r="52" stroke="#22c55e" stroke-width="12" fill="none" stroke-linecap="round" style="transition: stroke-dashoffset 1s cubic-bezier(.4,2,.6,1);"></circle><text x="60" y="68" text-anchor="middle" font-size="2.2em" fill="#222" class="svelte-17e6nia"> </text><text x="60" y="92" text-anchor="middle" font-size="1em" fill="#888" class="svelte-17e6nia"> </text></svg></div> <p class="svelte-17e6nia">Du fick <b class="svelte-17e6nia"> </b> av <b class="svelte-17e6nia"> </b> rÃ¤tt!</p> <!></div>');function Xe(oe,E){we(E,!1);let m=he(E,"score",8),M=he(E,"total",8),ae=j(!1),H=j(0),C=j(null);Ie(()=>{W(H,Math.round(m()/M()*100)),m()===M()&&(W(ae,!0),setTimeout(()=>{e(C)&&l(e(C))},300))});function l(F){const g=F.getContext("2d");if(!g)return;const I=F.width=320,Y=F.height=180,$=80,S=[],z=["#FFD700","#FF69B4","#00CFFF","#7CFC00","#FF6347","#FFB347"];for(let _=0;_<$;_++)S.push({x:Math.random()*I,y:Math.random()*Y/2,r:4+Math.random()*4,c:z[Math.floor(Math.random()*z.length)],vx:-2+Math.random()*4,vy:2+Math.random()*3});let J=0;function P(){if(g){g.clearRect(0,0,I,Y);for(const _ of S)g.beginPath(),g.arc(_.x,_.y,_.r,0,2*Math.PI),g.fillStyle=_.c,g.fill(),_.x+=_.vx,_.y+=_.vy,_.vy+=.05;J++,J<60&&requestAnimationFrame(P)}}P()}be();var N=Ue(),G=v(n(N),2),K=n(G),T=v(n(K));ie(T,"stroke-dasharray",a(()=>2*Math.PI*52));var V=v(T),re=n(V,!0);i(V);var L=v(V),ve=n(L);i(L),i(K),i(G);var U=v(G,2),p=v(n(U)),A=n(p,!0);i(p);var D=v(p,2),t=n(D,!0);i(D),de(),i(U);var X=v(U,2);{var se=F=>{var g=Le(),I=v(q(g),2);{var Y=$=>{var S=Ke();Se(S,z=>W(C,z),()=>e(C)),r($,S)};h(I,$=>{e(ae)&&$(Y)})}r(F,g)};h(X,F=>{m()===M()&&F(se)})}i(N),x(()=>{ie(T,"stroke-dashoffset",(e(H),a(()=>2*Math.PI*52*(1-e(H)/100)))),f(re,m()),f(ve,`/ ${M()??""}`),f(A,m()),f(t,M())}),r(oe,N),ye()}var Ye=w("Vad Ã¤r det latinska namnet fÃ¶r <span> </span>?",1),Ze=w('<img alt="VÃ¤xtbild" class="answer-image svelte-1rhsotd"/>'),et=w('<div class="image-list svelte-1rhsotd"></div>'),tt=w("<div><b>Ditt svar:</b> <!></div>"),at=w('<div class="result-header svelte-1rhsotd"><span class="result-icon svelte-1rhsotd"> </span> <b> </b></div> <div><b>FrÃ¥ga:</b> <!></div> <!> <!> <div><b>RÃ¤tt svar:</b> <!></div>',1),rt=w('<li style="margin-bottom:1.5em;"><div class="card-container svelte-1rhsotd"><!></div></li>'),st=w('<ul style="width:100%;max-width:420px;padding:0;list-style:none;"></ul>'),it=w('<!> <main><div class="centered-main svelte-1rhsotd"><!> <hr class="result-divider svelte-1rhsotd"/> <!></div></main>',1);function gt(oe,E){we(E,!1);const m=()=>Oe(pe,"$quiz",M),[M,ae]=Je(),H=j(),C=j(),l=j();function N(p){try{return JSON.parse(p)}catch{return null}}function G(){pe.reset(),Qe(We("/"))}ce(()=>m(),()=>{W(H,m().score)}),ce(()=>m(),()=>{W(C,m().questions.length)}),ce(()=>m(),()=>{W(l,m().mode)}),Ae(),be();var K=it(),T=q(K);Ge(T,{onclick:G,class:"floating-home-btn","aria-label":"Hem",children:(p,A)=>{de();var D=b("Hem");r(p,D)},$$slots:{default:!0}});var V=v(T,2),re=n(V),L=n(re);Xe(L,{get score(){return e(H)},get total(){return e(C)}});var ve=v(L,4);{var U=p=>{var A=st();ge(A,5,()=>(m(),a(()=>m().answers)),xe,(D,t)=>{var X=rt(),se=n(X),F=n(se);{let g=De(()=>(e(t),a(()=>e(t).correct?"correct-card":"incorrect-card")));je(F,{get class(){return e(g)},children:(I,Y)=>{Ee(I,{children:($,S)=>{var z=at(),J=q(z),P=n(J),_=n(P,!0);i(P);var fe=v(P,2),Fe=n(fe,!0);i(fe),i(J);var le=v(J,2),qe=v(n(le),2);{var ke=s=>{var c=b("Vad Ã¤r det svenska namnet fÃ¶r vÃ¤xten pÃ¥ bilden?");r(s,c)},Me=s=>{var c=te(),R=q(c);{var B=o=>{var d=Ye(),O=v(q(d)),Z=n(O,!0);i(O),de(),x(()=>f(Z,(e(t),a(()=>e(t).question.swedishName)))),r(o,d)},k=o=>{var d=te(),O=q(d);{var Z=u=>{var y=b("Vad heter vÃ¤xten pÃ¥ bilderna? (Svenska och latin)");r(u,y)},ne=u=>{var y=b();x(()=>f(y,`${e(t),a(()=>e(t).question.swedishName)??""} (${e(t),a(()=>e(t).question.latinName)??""})`)),r(u,y)};h(O,u=>{e(l),a(()=>e(l).id==="imageToNameFreetext")?u(Z):u(ne,!1)},!0)}r(o,d)};h(R,o=>{e(l),a(()=>e(l).id==="swedish-to-latin")?o(B):o(k,!1)},!0)}r(s,c)};h(qe,s=>{e(l),a(()=>e(l).id==="image-to-swedish")?s(ke):s(Me,!1)})}i(le);var me=v(le,2);{var Ce=s=>{var c=et();ge(c,5,()=>(e(t),a(()=>e(t).question.images)),xe,(R,B)=>{var k=Ze();x(()=>ie(k,"src",e(B))),r(R,k)}),i(c),r(s,c)};h(me,s=>{e(l),e(t),a(()=>(e(l).id==="image-to-swedish"||e(l).id==="imageToNameFreetext")&&e(t).question.images&&e(t).question.images.length)&&s(Ce)})}var _e=v(me,2);{var Ne=s=>{var c=tt(),R=v(n(c),2);{var B=o=>{var d=te(),O=q(d);{var Z=u=>{var y=te(),Re=q(y);{var Be=Q=>{var ee=b();x((Te,Ve)=>f(ee,`${Te??""} / ${Ve??""}`),[()=>(e(t),a(()=>N(e(t).answer)?.swedish)),()=>(e(t),a(()=>N(e(t).answer)?.latin))]),r(Q,ee)},He=Q=>{var ee=b();x(()=>f(ee,(e(t),a(()=>e(t).answer)))),r(Q,ee)};h(Re,Q=>{e(t),a(()=>N(e(t).answer))?Q(Be):Q(He,!1)})}r(u,y)},ne=u=>{var y=b();x(()=>f(y,(e(t),a(()=>e(t).answer)))),r(u,y)};h(O,u=>{e(t),a(()=>e(t).answer)?u(Z):u(ne,!1)})}r(o,d)},k=o=>{var d=b();x(()=>f(d,(e(t),a(()=>e(t).answer)))),r(o,d)};h(R,o=>{e(l),a(()=>e(l).id==="imageToNameFreetext")?o(B):o(k,!1)})}i(c),r(s,c)};h(_e,s=>{e(t),a(()=>!e(t).correct)&&s(Ne)})}var ue=v(_e,2),$e=v(n(ue),2);{var ze=s=>{var c=b();x(()=>f(c,(e(t),a(()=>e(t).question.swedishName)))),r(s,c)},Pe=s=>{var c=te(),R=q(c);{var B=o=>{var d=b();x(()=>f(d,(e(t),a(()=>e(t).question.latinName)))),r(o,d)},k=o=>{var d=b();x(()=>f(d,`${e(t),a(()=>e(t).question.swedishName)??""} / ${e(t),a(()=>e(t).question.latinName)??""}`)),r(o,d)};h(R,o=>{e(l),a(()=>e(l).id==="swedish-to-latin")?o(B):o(k,!1)},!0)}r(s,c)};h($e,s=>{e(l),a(()=>e(l).id==="image-to-swedish")?s(ze):s(Pe,!1)})}i(ue),x(()=>{ie(P,"aria-label",(e(t),a(()=>e(t).correct?"RÃ¤tt":"Fel"))),f(_,(e(t),a(()=>e(t).correct?"âœ”":"âŒ"))),f(Fe,(e(t),a(()=>e(t).correct?"RÃ¤tt":"Fel")))}),r($,z)},$$slots:{default:!0}})},$$slots:{default:!0}})}i(se),i(X),r(D,X)}),i(A),r(p,A)};h(ve,p=>{e(l)&&p(U)})}i(re),i(V),r(oe,K),ye(),ae()}export{gt as component};
