import"../chunks/DsnmJJEf.js";import{i as be}from"../chunks/SYV4gySI.js";import{p as we,f as w,v as a,D as x,a as r,b as ye,s as v,a9 as W,Q as j,y as e,c as n,r as i,n as de,C as q,aa as ce,ab as Ve,t as b,a7 as te,H as Ae}from"../chunks/00BUH1eq.js";import{o as Ie,s as f}from"../chunks/BFMGC_bP.js";import{p as he,i as h,b as Se,s as Qe,a as Je}from"../chunks/Cu1WIsBQ.js";import{q as ge,e as xe,i as pe}from"../chunks/uBI9sYbC.js";import{s as ie}from"../chunks/BFJ4aEML.js";import{g as Oe}from"../chunks/Dv4Ei5s0.js";import{r as We,C as je,a as Ee}from"../chunks/CWoHBwzg.js";import{B as Ge}from"../chunks/ByTjvTMx.js";var Ke=w('<canvas class="confetti-canvas svelte-17e6nia" width="320" height="180" aria-hidden="true"></canvas>'),Le=w('<div class="congrats svelte-17e6nia">🎉 Perfekt! Alla rätt! 🎉</div> <!>',1),Ue=w('<div class="quiz-result svelte-17e6nia"><h2 class="svelte-17e6nia">Resultat</h2> <div class="progress-container svelte-17e6nia"><svg width="120" height="120" viewBox="0 0 120 120" class="svelte-17e6nia"><circle class="progress-bg svelte-17e6nia" cx="60" cy="60" r="52" stroke="#e5e7eb" stroke-width="12" fill="none"></circle><circle class="progress-bar svelte-17e6nia" cx="60" cy="60" r="52" stroke="#22c55e" stroke-width="12" fill="none" stroke-linecap="round" style="transition: stroke-dashoffset 1s cubic-bezier(.4,2,.6,1);"></circle><text x="60" y="68" text-anchor="middle" font-size="2.2em" fill="#222" class="svelte-17e6nia"> </text><text x="60" y="92" text-anchor="middle" font-size="1em" fill="#888" class="svelte-17e6nia"> </text></svg></div> <p class="svelte-17e6nia">Du fick <b class="svelte-17e6nia"> </b> av <b class="svelte-17e6nia"> </b> rätt!</p> <!></div>');function Xe(oe,E){we(E,!1);let m=he(E,"score",8),C=he(E,"total",8),ae=j(!1),H=j(0),M=j(null);Ie(()=>{W(H,Math.round(m()/C()*100)),m()===C()&&(W(ae,!0),setTimeout(()=>{e(M)&&l(e(M))},300))});function l(F){const g=F.getContext("2d");if(!g)return;const I=F.width=320,Y=F.height=180,$=80,S=[],z=["#FFD700","#FF69B4","#00CFFF","#7CFC00","#FF6347","#FFB347"];for(let _=0;_<$;_++)S.push({x:Math.random()*I,y:Math.random()*Y/2,r:4+Math.random()*4,c:z[Math.floor(Math.random()*z.length)],vx:-2+Math.random()*4,vy:2+Math.random()*3});let Q=0;function P(){if(g){g.clearRect(0,0,I,Y);for(const _ of S)g.beginPath(),g.arc(_.x,_.y,_.r,0,2*Math.PI),g.fillStyle=_.c,g.fill(),_.x+=_.vx,_.y+=_.vy,_.vy+=.05;Q++,Q<60&&requestAnimationFrame(P)}}P()}be();var N=Ue(),G=v(n(N),2),K=n(G),D=v(n(K));ie(D,"stroke-dasharray",a(()=>2*Math.PI*52));var T=v(D),re=n(T,!0);i(T);var L=v(T),ve=n(L);i(L),i(K),i(G);var U=v(G,2),p=v(n(U)),V=n(p,!0);i(p);var A=v(p,2),t=n(A,!0);i(A),de(),i(U);var X=v(U,2);{var se=F=>{var g=Le(),I=v(q(g),2);{var Y=$=>{var S=Ke();Se(S,z=>W(M,z),()=>e(M)),r($,S)};h(I,$=>{e(ae)&&$(Y)})}r(F,g)};h(X,F=>{m()===C()&&F(se)})}i(N),x(()=>{ie(D,"stroke-dashoffset",(e(H),a(()=>2*Math.PI*52*(1-e(H)/100)))),f(re,m()),f(ve,`/ ${C()??""}`),f(V,m()),f(t,C())}),r(oe,N),ye()}var Ye=w("Vad är det latinska namnet för <span> </span>?",1),Ze=w('<img alt="Växtbild" class="answer-image svelte-1rhsotd"/>'),et=w('<div class="image-list svelte-1rhsotd"></div>'),tt=w("<div><b>Ditt svar:</b> <!></div>"),at=w('<div class="result-header svelte-1rhsotd"><span class="result-icon svelte-1rhsotd"> </span> <b> </b></div> <div><b>Fråga:</b> <!></div> <!> <!> <div><b>Rätt svar:</b> <!></div>',1),rt=w('<li style="margin-bottom:1.5em;"><div class="card-container svelte-1rhsotd"><!></div></li>'),st=w('<ul style="width:100%;max-width:420px;padding:0;list-style:none;"></ul>'),it=w('<!> <main><div class="centered-main svelte-1rhsotd"><!> <hr class="result-divider svelte-1rhsotd"/> <!></div></main>',1);function ht(oe,E){we(E,!1);const m=()=>Je(ge,"$quiz",C),[C,ae]=Qe(),H=j(),M=j(),l=j();function N(p){try{return JSON.parse(p)}catch{return null}}function G(){ge.reset(),Oe(We("/"))}ce(()=>m(),()=>{W(H,m().score)}),ce(()=>m(),()=>{W(M,m().questions.length)}),ce(()=>m(),()=>{W(l,m().mode)}),Ve(),be();var K=it(),D=q(K);Ge(D,{onclick:G,class:"floating-home-btn","aria-label":"Hem",children:(p,V)=>{de();var A=b("Hem");r(p,A)},$$slots:{default:!0}});var T=v(D,2),re=n(T),L=n(re);Xe(L,{get score(){return e(H)},get total(){return e(M)}});var ve=v(L,4);{var U=p=>{var V=st();xe(V,5,()=>(m(),a(()=>m().answers)),pe,(A,t)=>{var X=rt(),se=n(X),F=n(se);{let g=Ae(()=>(e(t),a(()=>e(t).correct?"correct-card":"incorrect-card")));je(F,{get class(){return e(g)},children:(I,Y)=>{Ee(I,{children:($,S)=>{var z=at(),Q=q(z),P=n(Q),_=n(P,!0);i(P);var fe=v(P,2),Fe=n(fe,!0);i(fe),i(Q);var le=v(Q,2),qe=v(n(le),2);{var ke=s=>{var c=b("Vad är det svenska namnet för växten på bilden?");r(s,c)},Ce=s=>{var c=te(),R=q(c);{var B=o=>{var d=Ye(),J=v(q(d)),Z=n(J,!0);i(J),de(),x(()=>f(Z,(e(t),a(()=>e(t).question.swedishName)))),r(o,d)},k=o=>{var d=te(),J=q(d);{var Z=u=>{var y=b("Vad heter växten på bilderna? (Svenska och latin)");r(u,y)},ne=u=>{var y=b();x(()=>f(y,`${e(t),a(()=>e(t).question.swedishName)??""} (${e(t),a(()=>e(t).question.latinName)??""})`)),r(u,y)};h(J,u=>{e(l),a(()=>e(l).id==="imageToNameFreetext")?u(Z):u(ne,!1)},!0)}r(o,d)};h(R,o=>{e(l),a(()=>e(l).id==="swedish-to-latin")?o(B):o(k,!1)},!0)}r(s,c)};h(qe,s=>{e(l),a(()=>e(l).id==="image-to-swedish")?s(ke):s(Ce,!1)})}i(le);var me=v(le,2);{var Me=s=>{var c=et();xe(c,5,()=>(e(t),a(()=>e(t).question.images)),pe,(R,B)=>{var k=Ze();x(()=>ie(k,"src",e(B))),r(R,k)}),i(c),r(s,c)};h(me,s=>{e(l),e(t),a(()=>(e(l).id==="image-to-swedish"||e(l).id==="imageToNameFreetext")&&e(t).question.images&&e(t).question.images.length)&&s(Me)})}var _e=v(me,2);{var Ne=s=>{var c=tt(),R=v(n(c),2);{var B=o=>{var d=te(),J=q(d);{var Z=u=>{var y=te(),Re=q(y);{var Be=O=>{var ee=b();x((De,Te)=>f(ee,`${De??""} / ${Te??""}`),[()=>(e(t),a(()=>N(e(t).answer)?.swedish)),()=>(e(t),a(()=>N(e(t).answer)?.latin))]),r(O,ee)},He=O=>{var ee=b();x(()=>f(ee,(e(t),a(()=>e(t).answer)))),r(O,ee)};h(Re,O=>{e(t),a(()=>N(e(t).answer))?O(Be):O(He,!1)})}r(u,y)},ne=u=>{var y=b();x(()=>f(y,(e(t),a(()=>e(t).answer)))),r(u,y)};h(J,u=>{e(t),a(()=>e(t).answer)?u(Z):u(ne,!1)})}r(o,d)},k=o=>{var d=b();x(()=>f(d,(e(t),a(()=>e(t).answer)))),r(o,d)};h(R,o=>{e(l),a(()=>e(l).id==="imageToNameFreetext")?o(B):o(k,!1)})}i(c),r(s,c)};h(_e,s=>{e(t),a(()=>!e(t).correct)&&s(Ne)})}var ue=v(_e,2),$e=v(n(ue),2);{var ze=s=>{var c=b();x(()=>f(c,(e(t),a(()=>e(t).question.swedishName)))),r(s,c)},Pe=s=>{var c=te(),R=q(c);{var B=o=>{var d=b();x(()=>f(d,(e(t),a(()=>e(t).question.latinName)))),r(o,d)},k=o=>{var d=b();x(()=>f(d,`${e(t),a(()=>e(t).question.swedishName)??""} / ${e(t),a(()=>e(t).question.latinName)??""}`)),r(o,d)};h(R,o=>{e(l),a(()=>e(l).id==="swedish-to-latin")?o(B):o(k,!1)},!0)}r(s,c)};h($e,s=>{e(l),a(()=>e(l).id==="image-to-swedish")?s(ze):s(Pe,!1)})}i(ue),x(()=>{ie(P,"aria-label",(e(t),a(()=>e(t).correct?"Rätt":"Fel"))),f(_,(e(t),a(()=>e(t).correct?"✔":"❌"))),f(Fe,(e(t),a(()=>e(t).correct?"Rätt":"Fel")))}),r($,z)},$$slots:{default:!0}})},$$slots:{default:!0}})}i(se),i(X),r(A,X)}),i(V),r(p,V)};h(ve,p=>{e(l)&&p(U)})}i(re),i(T),r(oe,K),ye(),ae()}export{ht as component};
