import"../chunks/DsnmJJEf.js";import{i as We}from"../chunks/s4CSQMkU.js";import{s as $t,o as tn,g as en}from"../chunks/Z9sIMUL2.js";import{W as nn,y as wt,X as sn,J as rn,aw as on,aG as an,aF as cn,aH as ln,p as et,a3 as un,G as Me,f as N,c as $,M as zt,N as kt,r as F,a as L,b as nt,bc as ze,B as tt,d as V,n as vt,h as S,aL as Bt,e as Y,t as Gt,g as St,aK as te,s as at,z as we,A as fn,m as Ft,C as Se}from"../chunks/Bw5Y5IGr.js";import{p as j,r as bt,b as oe,c as Rt,i as lt,s as dn,a as mn}from"../chunks/BpWPLi4d.js";import{q as qt}from"../chunks/SK8R3z3d.js";import{s as gn,g as _e}from"../chunks/DQ97G9YE.js";import{c as Nt,B as _t,e as Vt,i as Qt,b as Pe,r as Ie,C as pn,a as hn}from"../chunks/CUDcUokz.js";import{c as ct}from"../chunks/CeuajhnK.js";import{a as ie,s as ke}from"../chunks/0tY7R5CY.js";import{I as Ne,a as Le,P as vn}from"../chunks/Ck0LKH_Y.js";function xn(e,t,n){nn(()=>{var r=wt(()=>t(e,n?.())||{});if(n&&r?.update){var i=!1,s={};sn(()=>{var o=n();rn(o),i&&on(s,o)&&(s=o,r.update(o))}),i=!0}if(r?.destroy)return()=>r.destroy()})}const bn={id:"image-to-swedish",label:"Image → Swedish name",generateQuestions(e){return[...e].sort(()=>Math.random()-.5).map(n=>({...n,images:n.images||[],answer:n.swedishName}))},checkAnswer(e,t){return t.trim().toLowerCase()===e.swedishName.trim().toLowerCase()},getOptions(e,t){const n=e[t].answer,r=e.map(s=>s.answer),i=[n];for(;i.length<4&&r.length>i.length;){const s=r[Math.floor(Math.random()*r.length)];i.includes(s)||i.push(s)}return i.sort(()=>Math.random()-.5)}},yn={id:"swedish-to-latin",label:"Swedish name → Latin name",generateQuestions(e){return[...e].sort(()=>Math.random()-.5).map(n=>({...n,question:n.swedishName,answer:n.latinName}))},checkAnswer(e,t){return t.trim().toLowerCase()===e.latinName.trim().toLowerCase()},getOptions(e,t){const n=e[t].answer,r=e.map(s=>s.answer),i=[n];for(;i.length<4&&r.length>i.length;){const s=r[Math.floor(Math.random()*r.length)];i.includes(s)||i.push(s)}return i.sort(()=>Math.random()-.5)}},wn={id:"imageToNameFreetext",label:"Image to name (freetext)",generateQuestions:e=>[...e].sort(()=>Math.random()-.5).map(n=>({images:n.images||[],swedishName:n.swedishName||n.swedish||"",latinName:n.latinName||n.latin||"",answer:""})),checkAnswer:(e,t)=>{let n={};try{n=JSON.parse(t)}catch{return!1}const r=p=>p.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9 ]/gi,"").replace(/\s+/g," ").trim().toLowerCase(),i=e.swedishName||"",s=e.latinName||"",o=n.swedish||"",c=n.latin||"",a=r(o)===r(i),u=r(c)===r(s);return a&&u},getOptions:()=>[]},ee=[bn,yn,wn],ne=Symbol("EMBLA_CAROUSEL_CONTEXT");function Sn(e){return ln(ne,e),e}function Kt(e="This component"){if(!an(ne))throw new Error(`${e} must be used within a <Carousel.Root> component`);return cn(ne)}var _n=N("<div><!></div>");function Oe(e,t){et(t,!0);let n=j(t,"ref",15,null),r=j(t,"opts",19,()=>({})),i=j(t,"plugins",19,()=>[]),s=j(t,"setApi",3,()=>{}),o=j(t,"orientation",3,"horizontal"),c=bt(t,["$$slots","$$events","$$legacy","ref","opts","plugins","setApi","orientation","class","children"]),a=un({api:void 0,scrollPrev:u,scrollNext:p,orientation:o(),canScrollNext:!1,canScrollPrev:!1,handleKeyDown:x,options:r(),plugins:i(),onInit:g,scrollSnaps:[],selectedIndex:0,scrollTo:f});Sn(a);function u(){a.api?.scrollPrev()}function p(){a.api?.scrollNext()}function f(l,v){a.api?.scrollTo(l,v)}function m(){a.api&&(a.selectedIndex=a.api.selectedScrollSnap(),a.canScrollNext=a.api.canScrollNext(),a.canScrollPrev=a.api.canScrollPrev())}function x(l){l.key==="ArrowLeft"?(l.preventDefault(),u()):l.key==="ArrowRight"&&(l.preventDefault(),p())}function g(l){a.api=l.detail,s()(a.api),a.scrollSnaps=a.api.scrollSnapList(),a.api.on("select",m),m()}Me(()=>()=>{a.api?.off("select",m)});var d=_n();ie(d,l=>({"data-slot":"carousel",class:l,role:"region","aria-roledescription":"carousel",...c}),[()=>Nt("relative",t.class)]);var h=$(d);zt(h,()=>t.children??kt),F(d),oe(d,l=>n(l),()=>n()),L(e,d),nt()}function Pn(e){return Object.prototype.toString.call(e)==="[object Object]"}function Te(e){return Pn(e)||Array.isArray(e)}function In(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function ae(e,t){const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;const i=JSON.stringify(Object.keys(e.breakpoints||{})),s=JSON.stringify(Object.keys(t.breakpoints||{}));return i!==s?!1:n.every(o=>{const c=e[o],a=t[o];return typeof c=="function"?`${c}`==`${a}`:!Te(c)||!Te(a)?c===a:ae(c,a)})}function Ee(e){return e.concat().sort((t,n)=>t.name>n.name?1:-1).map(t=>t.options)}function Ln(e,t){if(e.length!==t.length)return!1;const n=Ee(e),r=Ee(t);return n.every((i,s)=>{const o=r[s];return ae(i,o)})}function ce(e){return typeof e=="number"}function se(e){return typeof e=="string"}function Ut(e){return typeof e=="boolean"}function Ce(e){return Object.prototype.toString.call(e)==="[object Object]"}function k(e){return Math.abs(e)}function le(e){return Math.sign(e)}function Et(e,t){return k(e-t)}function Tn(e,t){if(e===0||t===0||k(e)<=k(t))return 0;const n=Et(k(e),k(t));return k(n/e)}function En(e){return Math.round(e*100)/100}function Ct(e){return At(e).map(Number)}function ot(e){return e[Ot(e)]}function Ot(e){return Math.max(0,e.length-1)}function ue(e,t){return t===Ot(e)}function Ae(e,t=0){return Array.from(Array(e),(n,r)=>t+r)}function At(e){return Object.keys(e)}function De(e,t){return[e,t].reduce((n,r)=>(At(r).forEach(i=>{const s=n[i],o=r[i],c=Ce(s)&&Ce(o);n[i]=c?De(s,o):o}),n),{})}function re(e,t){return typeof t.MouseEvent<"u"&&e instanceof t.MouseEvent}function Cn(e,t){const n={start:r,center:i,end:s};function r(){return 0}function i(a){return s(a)/2}function s(a){return t-a}function o(a,u){return se(e)?n[e](a):e(t,a,u)}return{measure:o}}function Mt(){let e=[];function t(i,s,o,c={passive:!0}){let a;if("addEventListener"in i)i.addEventListener(s,o,c),a=()=>i.removeEventListener(s,o,c);else{const u=i;u.addListener(o),a=()=>u.removeListener(o)}return e.push(a),r}function n(){e=e.filter(i=>i())}const r={add:t,clear:n};return r}function An(e,t,n,r){const i=Mt(),s=1e3/60;let o=null,c=0,a=0;function u(){i.add(e,"visibilitychange",()=>{e.hidden&&g()})}function p(){x(),i.clear()}function f(h){if(!a)return;o||(o=h,n(),n());const l=h-o;for(o=h,c+=l;c>=s;)n(),c-=s;const v=c/s;r(v),a&&(a=t.requestAnimationFrame(f))}function m(){a||(a=t.requestAnimationFrame(f))}function x(){t.cancelAnimationFrame(a),o=null,c=0,a=0}function g(){o=null,c=0}return{init:u,destroy:p,start:m,stop:x,update:n,render:r}}function Mn(e,t){const n=t==="rtl",r=e==="y",i=r?"y":"x",s=r?"x":"y",o=!r&&n?-1:1,c=p(),a=f();function u(g){const{height:d,width:h}=g;return r?d:h}function p(){return r?"top":n?"right":"left"}function f(){return r?"bottom":n?"left":"right"}function m(g){return g*o}return{scroll:i,cross:s,startEdge:c,endEdge:a,measureSize:u,direction:m}}function xt(e=0,t=0){const n=k(e-t);function r(u){return u<e}function i(u){return u>t}function s(u){return r(u)||i(u)}function o(u){return s(u)?r(u)?e:t:u}function c(u){return n?u-n*Math.ceil((u-t)/n):u}return{length:n,max:t,min:e,constrain:o,reachedAny:s,reachedMax:i,reachedMin:r,removeOffset:c}}function Fe(e,t,n){const{constrain:r}=xt(0,e),i=e+1;let s=o(t);function o(m){return n?k((i+m)%i):r(m)}function c(){return s}function a(m){return s=o(m),f}function u(m){return p().set(c()+m)}function p(){return Fe(e,c(),n)}const f={get:c,set:a,add:u,clone:p};return f}function zn(e,t,n,r,i,s,o,c,a,u,p,f,m,x,g,d,h,l,v){const{cross:b,direction:_}=e,C=["INPUT","SELECT","TEXTAREA"],P={passive:!1},w=Mt(),I=Mt(),E=xt(50,225).constrain(x.measure(20)),A={mouse:300,touch:400},T={mouse:500,touch:600},O=g?43:25;let H=!1,B=0,q=0,st=!1,Q=!1,K=!1,J=!1;function rt(y){if(!v)return;function M(R){(Ut(v)||v(y,R))&&It(R)}const D=t;w.add(D,"dragstart",R=>R.preventDefault(),P).add(D,"touchmove",()=>{},P).add(D,"touchend",()=>{}).add(D,"touchstart",M).add(D,"mousedown",M).add(D,"touchcancel",G).add(D,"contextmenu",G).add(D,"click",ut,!0)}function U(){w.clear(),I.clear()}function dt(){const y=J?n:t;I.add(y,"touchmove",X,P).add(y,"touchend",G).add(y,"mousemove",X,P).add(y,"mouseup",G)}function gt(y){const M=y.nodeName||"";return C.includes(M)}function Z(){return(g?T:A)[J?"mouse":"touch"]}function Pt(y,M){const D=f.add(le(y)*-1),R=p.byDistance(y,!g).distance;return g||k(y)<E?R:h&&M?R*.5:p.byIndex(D.get(),0).distance}function It(y){const M=re(y,r);J=M,K=g&&M&&!y.buttons&&H,H=Et(i.get(),o.get())>=2,!(M&&y.button!==0)&&(gt(y.target)||(st=!0,s.pointerDown(y),u.useFriction(0).useDuration(0),i.set(o),dt(),B=s.readPoint(y),q=s.readPoint(y,b),m.emit("pointerDown")))}function X(y){if(!re(y,r)&&y.touches.length>=2)return G(y);const D=s.readPoint(y),R=s.readPoint(y,b),it=Et(D,B),ft=Et(R,q);if(!Q&&!J&&(!y.cancelable||(Q=it>ft,!Q)))return G(y);const pt=s.pointerMove(y);it>d&&(K=!0),u.useFriction(.3).useDuration(.75),c.start(),i.add(_(pt)),y.preventDefault()}function G(y){const D=p.byDistance(0,!1).index!==f.get(),R=s.pointerUp(y)*Z(),it=Pt(_(R),D),ft=Tn(R,it),pt=O-10*ft,mt=l+ft/50;Q=!1,st=!1,I.clear(),u.useDuration(pt).useFriction(mt),a.distance(it,!g),J=!1,m.emit("pointerUp")}function ut(y){K&&(y.stopPropagation(),y.preventDefault(),K=!1)}function W(){return st}return{init:rt,destroy:U,pointerDown:W}}function kn(e,t){let r,i;function s(f){return f.timeStamp}function o(f,m){const g=`client${(m||e.scroll)==="x"?"X":"Y"}`;return(re(f,t)?f:f.touches[0])[g]}function c(f){return r=f,i=f,o(f)}function a(f){const m=o(f)-o(i),x=s(f)-s(r)>170;return i=f,x&&(r=f),m}function u(f){if(!r||!i)return 0;const m=o(i)-o(r),x=s(f)-s(r),g=s(f)-s(i)>170,d=m/x;return x&&!g&&k(d)>.1?d:0}return{pointerDown:c,pointerMove:a,pointerUp:u,readPoint:o}}function Nn(){function e(n){const{offsetTop:r,offsetLeft:i,offsetWidth:s,offsetHeight:o}=n;return{top:r,right:i+s,bottom:r+o,left:i,width:s,height:o}}return{measure:e}}function On(e){function t(r){return e*(r/100)}return{measure:t}}function Dn(e,t,n,r,i,s,o){const c=[e].concat(r);let a,u,p=[],f=!1;function m(h){return i.measureSize(o.measure(h))}function x(h){if(!s)return;u=m(e),p=r.map(m);function l(v){for(const b of v){if(f)return;const _=b.target===e,C=r.indexOf(b.target),P=_?u:p[C],w=m(_?e:r[C]);if(k(w-P)>=.5){h.reInit(),t.emit("resize");break}}}a=new ResizeObserver(v=>{(Ut(s)||s(h,v))&&l(v)}),n.requestAnimationFrame(()=>{c.forEach(v=>a.observe(v))})}function g(){f=!0,a&&a.disconnect()}return{init:x,destroy:g}}function Fn(e,t,n,r,i,s){let o=0,c=0,a=i,u=s,p=e.get(),f=0;function m(){const P=r.get()-e.get(),w=!a;let I=0;return w?(o=0,n.set(r),e.set(r),I=P):(n.set(e),o+=P/a,o*=u,p+=o,e.add(o),I=p-f),c=le(I),f=p,C}function x(){const P=r.get()-t.get();return k(P)<.001}function g(){return a}function d(){return c}function h(){return o}function l(){return b(i)}function v(){return _(s)}function b(P){return a=P,C}function _(P){return u=P,C}const C={direction:d,duration:g,velocity:h,seek:m,settled:x,useBaseFriction:v,useBaseDuration:l,useFriction:_,useDuration:b};return C}function qn(e,t,n,r,i){const s=i.measure(10),o=i.measure(50),c=xt(.1,.99);let a=!1;function u(){return!(a||!e.reachedAny(n.get())||!e.reachedAny(t.get()))}function p(x){if(!u())return;const g=e.reachedMin(t.get())?"min":"max",d=k(e[g]-t.get()),h=n.get()-t.get(),l=c.constrain(d/o);n.subtract(h*l),!x&&k(h)<s&&(n.set(e.constrain(n.get())),r.useDuration(25).useBaseFriction())}function f(x){a=!x}return{shouldConstrain:u,constrain:p,toggleActive:f}}function jn(e,t,n,r,i){const s=xt(-t+e,0),o=f(),c=p(),a=m();function u(g,d){return Et(g,d)<=1}function p(){const g=o[0],d=ot(o),h=o.lastIndexOf(g),l=o.indexOf(d)+1;return xt(h,l)}function f(){return n.map((g,d)=>{const{min:h,max:l}=s,v=s.constrain(g),b=!d,_=ue(n,d);return b?l:_||u(h,v)?h:u(l,v)?l:v}).map(g=>parseFloat(g.toFixed(3)))}function m(){if(t<=e+i)return[s.max];if(r==="keepSnaps")return o;const{min:g,max:d}=c;return o.slice(g,d)}return{snapsContained:a,scrollContainLimit:c}}function $n(e,t,n){const r=t[0],i=n?r-e:ot(t);return{limit:xt(i,r)}}function Bn(e,t,n,r){const s=t.min+.1,o=t.max+.1,{reachedMin:c,reachedMax:a}=xt(s,o);function u(m){return m===1?a(n.get()):m===-1?c(n.get()):!1}function p(m){if(!u(m))return;const x=e*(m*-1);r.forEach(g=>g.add(x))}return{loop:p}}function Vn(e){const{max:t,length:n}=e;function r(s){const o=s-t;return n?o/-n:0}return{get:r}}function Qn(e,t,n,r,i){const{startEdge:s,endEdge:o}=e,{groupSlides:c}=i,a=f().map(t.measure),u=m(),p=x();function f(){return c(r).map(d=>ot(d)[o]-d[0][s]).map(k)}function m(){return r.map(d=>n[s]-d[s]).map(d=>-k(d))}function x(){return c(u).map(d=>d[0]).map((d,h)=>d+a[h])}return{snaps:u,snapsAligned:p}}function Hn(e,t,n,r,i,s){const{groupSlides:o}=i,{min:c,max:a}=r,u=p();function p(){const m=o(s),x=!e||t==="keepSnaps";return n.length===1?[s]:x?m:m.slice(c,a).map((g,d,h)=>{const l=!d,v=ue(h,d);if(l){const b=ot(h[0])+1;return Ae(b)}if(v){const b=Ot(s)-ot(h)[0]+1;return Ae(b,ot(h)[0])}return g})}return{slideRegistry:u}}function Gn(e,t,n,r,i){const{reachedAny:s,removeOffset:o,constrain:c}=r;function a(g){return g.concat().sort((d,h)=>k(d)-k(h))[0]}function u(g){const d=e?o(g):c(g),h=t.map((v,b)=>({diff:p(v-d,0),index:b})).sort((v,b)=>k(v.diff)-k(b.diff)),{index:l}=h[0];return{index:l,distance:d}}function p(g,d){const h=[g,g+n,g-n];if(!e)return g;if(!d)return a(h);const l=h.filter(v=>le(v)===d);return l.length?a(l):ot(h)-n}function f(g,d){const h=t[g]-i.get(),l=p(h,d);return{index:g,distance:l}}function m(g,d){const h=i.get()+g,{index:l,distance:v}=u(h),b=!e&&s(h);if(!d||b)return{index:l,distance:g};const _=t[l]-v,C=g+p(_,0);return{index:l,distance:C}}return{byDistance:m,byIndex:f,shortcut:p}}function Rn(e,t,n,r,i,s,o){function c(f){const m=f.distance,x=f.index!==t.get();s.add(m),m&&(r.duration()?e.start():(e.update(),e.render(1),e.update())),x&&(n.set(t.get()),t.set(f.index),o.emit("select"))}function a(f,m){const x=i.byDistance(f,m);c(x)}function u(f,m){const x=t.clone().set(f),g=i.byIndex(x.get(),m);c(g)}return{distance:a,index:u}}function Kn(e,t,n,r,i,s,o,c){const a={passive:!0,capture:!0};let u=0;function p(x){if(!c)return;function g(d){if(new Date().getTime()-u>10)return;o.emit("slideFocusStart"),e.scrollLeft=0;const v=n.findIndex(b=>b.includes(d));ce(v)&&(i.useDuration(0),r.index(v,0),o.emit("slideFocus"))}s.add(document,"keydown",f,!1),t.forEach((d,h)=>{s.add(d,"focus",l=>{(Ut(c)||c(x,l))&&g(h)},a)})}function f(x){x.code==="Tab"&&(u=new Date().getTime())}return{init:p}}function Tt(e){let t=e;function n(){return t}function r(a){t=o(a)}function i(a){t+=o(a)}function s(a){t-=o(a)}function o(a){return ce(a)?a:a.get()}return{get:n,set:r,add:i,subtract:s}}function qe(e,t){const n=e.scroll==="x"?o:c,r=t.style;let i=null,s=!1;function o(m){return`translate3d(${m}px,0px,0px)`}function c(m){return`translate3d(0px,${m}px,0px)`}function a(m){if(s)return;const x=En(e.direction(m));x!==i&&(r.transform=n(x),i=x)}function u(m){s=!m}function p(){s||(r.transform="",t.getAttribute("style")||t.removeAttribute("style"))}return{clear:p,to:a,toggleActive:u}}function Un(e,t,n,r,i,s,o,c,a){const p=Ct(i),f=Ct(i).reverse(),m=l().concat(v());function x(w,I){return w.reduce((E,A)=>E-i[A],I)}function g(w,I){return w.reduce((E,A)=>x(E,I)>0?E.concat([A]):E,[])}function d(w){return s.map((I,E)=>({start:I-r[E]+.5+w,end:I+t-.5+w}))}function h(w,I,E){const A=d(I);return w.map(T=>{const O=E?0:-n,H=E?n:0,B=E?"end":"start",q=A[T][B];return{index:T,loopPoint:q,slideLocation:Tt(-1),translate:qe(e,a[T]),target:()=>c.get()>q?O:H}})}function l(){const w=o[0],I=g(f,w);return h(I,n,!1)}function v(){const w=t-o[0]-1,I=g(p,w);return h(I,-n,!0)}function b(){return m.every(({index:w})=>{const I=p.filter(E=>E!==w);return x(I,t)<=.1})}function _(){m.forEach(w=>{const{target:I,translate:E,slideLocation:A}=w,T=I();T!==A.get()&&(E.to(T),A.set(T))})}function C(){m.forEach(w=>w.translate.clear())}return{canLoop:b,clear:C,loop:_,loopPoints:m}}function Jn(e,t,n){let r,i=!1;function s(a){if(!n)return;function u(p){for(const f of p)if(f.type==="childList"){a.reInit(),t.emit("slidesChanged");break}}r=new MutationObserver(p=>{i||(Ut(n)||n(a,p))&&u(p)}),r.observe(e,{childList:!0})}function o(){r&&r.disconnect(),i=!0}return{init:s,destroy:o}}function Xn(e,t,n,r){const i={};let s=null,o=null,c,a=!1;function u(){c=new IntersectionObserver(g=>{a||(g.forEach(d=>{const h=t.indexOf(d.target);i[h]=d}),s=null,o=null,n.emit("slidesInView"))},{root:e.parentElement,threshold:r}),t.forEach(g=>c.observe(g))}function p(){c&&c.disconnect(),a=!0}function f(g){return At(i).reduce((d,h)=>{const l=parseInt(h),{isIntersecting:v}=i[l];return(g&&v||!g&&!v)&&d.push(l),d},[])}function m(g=!0){if(g&&s)return s;if(!g&&o)return o;const d=f(g);return g&&(s=d),g||(o=d),d}return{init:u,destroy:p,get:m}}function Yn(e,t,n,r,i,s){const{measureSize:o,startEdge:c,endEdge:a}=e,u=n[0]&&i,p=g(),f=d(),m=n.map(o),x=h();function g(){if(!u)return 0;const v=n[0];return k(t[c]-v[c])}function d(){if(!u)return 0;const v=s.getComputedStyle(ot(r));return parseFloat(v.getPropertyValue(`margin-${a}`))}function h(){return n.map((v,b,_)=>{const C=!b,P=ue(_,b);return C?m[b]+p:P?m[b]+f:_[b+1][c]-v[c]}).map(k)}return{slideSizes:m,slideSizesWithGaps:x,startGap:p,endGap:f}}function Zn(e,t,n,r,i,s,o,c,a){const{startEdge:u,endEdge:p,direction:f}=e,m=ce(n);function x(l,v){return Ct(l).filter(b=>b%v===0).map(b=>l.slice(b,b+v))}function g(l){return l.length?Ct(l).reduce((v,b,_)=>{const C=ot(v)||0,P=C===0,w=b===Ot(l),I=i[u]-s[C][u],E=i[u]-s[b][p],A=!r&&P?f(o):0,T=!r&&w?f(c):0,O=k(E-T-(I+A));return _&&O>t+a&&v.push(b),w&&v.push(l.length),v},[]).map((v,b,_)=>{const C=Math.max(_[b-1]||0);return l.slice(C,v)}):[]}function d(l){return m?x(l,n):g(l)}return{groupSlides:d}}function Wn(e,t,n,r,i,s,o){const{align:c,axis:a,direction:u,startIndex:p,loop:f,duration:m,dragFree:x,dragThreshold:g,inViewThreshold:d,slidesToScroll:h,skipSnaps:l,containScroll:v,watchResize:b,watchSlides:_,watchDrag:C,watchFocus:P}=s,w=2,I=Nn(),E=I.measure(t),A=n.map(I.measure),T=Mn(a,u),O=T.measureSize(E),H=On(O),B=Cn(c,O),q=!f&&!!v,st=f||!!v,{slideSizes:Q,slideSizesWithGaps:K,startGap:J,endGap:rt}=Yn(T,E,A,n,st,i),U=Zn(T,O,h,f,E,A,J,rt,w),{snaps:dt,snapsAligned:gt}=Qn(T,B,E,A,U),Z=-ot(dt)+ot(K),{snapsContained:Pt,scrollContainLimit:It}=jn(O,Z,gt,v,w),X=q?Pt:gt,{limit:G}=$n(Z,X,f),ut=Fe(Ot(X),p,f),W=ut.clone(),z=Ct(n),y=({dragHandler:yt,scrollBody:Zt,scrollBounds:Wt,options:{loop:Dt}})=>{Dt||Wt.constrain(yt.pointerDown()),Zt.seek()},M=({scrollBody:yt,translate:Zt,location:Wt,offsetLocation:Dt,previousLocation:Ge,scrollLooper:Re,slideLooper:Ke,dragHandler:Ue,animation:Je,eventHandler:pe,scrollBounds:Xe,options:{loop:he}},ve)=>{const xe=yt.settled(),Ye=!Xe.shouldConstrain(),be=he?xe:xe&&Ye,ye=be&&!Ue.pointerDown();ye&&Je.stop();const Ze=Wt.get()*ve+Ge.get()*(1-ve);Dt.set(Ze),he&&(Re.loop(yt.direction()),Ke.loop()),Zt.to(Dt.get()),ye&&pe.emit("settle"),be||pe.emit("scroll")},D=An(r,i,()=>y(Yt),yt=>M(Yt,yt)),R=.68,it=X[ut.get()],ft=Tt(it),pt=Tt(it),mt=Tt(it),ht=Tt(it),Lt=Fn(ft,mt,pt,ht,m,R),Jt=Gn(f,X,Z,G,ht),Xt=Rn(D,ut,W,Lt,Jt,ht,o),de=Vn(G),me=Mt(),Qe=Xn(t,n,o,d),{slideRegistry:ge}=Hn(q,v,X,It,U,z),He=Kn(e,n,ge,Xt,Lt,me,o,P),Yt={ownerDocument:r,ownerWindow:i,eventHandler:o,containerRect:E,slideRects:A,animation:D,axis:T,dragHandler:zn(T,e,r,i,ht,kn(T,i),ft,D,Xt,Lt,Jt,ut,o,H,x,g,l,R,C),eventStore:me,percentOfView:H,index:ut,indexPrevious:W,limit:G,location:ft,offsetLocation:mt,previousLocation:pt,options:s,resizeHandler:Dn(t,o,i,n,T,b,I),scrollBody:Lt,scrollBounds:qn(G,mt,ht,Lt,H),scrollLooper:Bn(Z,G,mt,[ft,mt,pt,ht]),scrollProgress:de,scrollSnapList:X.map(de.get),scrollSnaps:X,scrollTarget:Jt,scrollTo:Xt,slideLooper:Un(T,O,Z,Q,K,dt,X,mt,n),slideFocus:He,slidesHandler:Jn(t,o,_),slidesInView:Qe,slideIndexes:z,slideRegistry:ge,slidesToScroll:U,target:ht,translate:qe(T,t)};return Yt}function ts(){let e={},t;function n(u){t=u}function r(u){return e[u]||[]}function i(u){return r(u).forEach(p=>p(t,u)),a}function s(u,p){return e[u]=r(u).concat([p]),a}function o(u,p){return e[u]=r(u).filter(f=>f!==p),a}function c(){e={}}const a={init:n,emit:i,off:o,on:s,clear:c};return a}const es={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function ns(e){function t(s,o){return De(s,o||{})}function n(s){const o=s.breakpoints||{},c=At(o).filter(a=>e.matchMedia(a).matches).map(a=>o[a]).reduce((a,u)=>t(a,u),{});return t(s,c)}function r(s){return s.map(o=>At(o.breakpoints||{})).reduce((o,c)=>o.concat(c),[]).map(e.matchMedia)}return{mergeOptions:t,optionsAtMedia:n,optionsMediaQueries:r}}function ss(e){let t=[];function n(s,o){return t=o.filter(({options:c})=>e.optionsAtMedia(c).active!==!1),t.forEach(c=>c.init(s,e)),o.reduce((c,a)=>Object.assign(c,{[a.name]:a}),{})}function r(){t=t.filter(s=>s.destroy())}return{init:n,destroy:r}}function Ht(e,t,n){const r=e.ownerDocument,i=r.defaultView,s=ns(i),o=ss(s),c=Mt(),a=ts(),{mergeOptions:u,optionsAtMedia:p,optionsMediaQueries:f}=s,{on:m,off:x,emit:g}=a,d=T;let h=!1,l,v=u(es,Ht.globalOptions),b=u(v),_=[],C,P,w;function I(){const{container:z,slides:y}=b;P=(se(z)?e.querySelector(z):z)||e.children[0];const D=se(y)?P.querySelectorAll(y):y;w=[].slice.call(D||P.children)}function E(z){const y=Wn(e,P,w,r,i,z,a);if(z.loop&&!y.slideLooper.canLoop()){const M=Object.assign({},z,{loop:!1});return E(M)}return y}function A(z,y){h||(v=u(v,z),b=p(v),_=y||_,I(),l=E(b),f([v,..._.map(({options:M})=>M)]).forEach(M=>c.add(M,"change",T)),b.active&&(l.translate.to(l.location.get()),l.animation.init(),l.slidesInView.init(),l.slideFocus.init(W),l.eventHandler.init(W),l.resizeHandler.init(W),l.slidesHandler.init(W),l.options.loop&&l.slideLooper.loop(),P.offsetParent&&w.length&&l.dragHandler.init(W),C=o.init(W,_)))}function T(z,y){const M=U();O(),A(u({startIndex:M},z),y),a.emit("reInit")}function O(){l.dragHandler.destroy(),l.eventStore.clear(),l.translate.clear(),l.slideLooper.clear(),l.resizeHandler.destroy(),l.slidesHandler.destroy(),l.slidesInView.destroy(),l.animation.destroy(),o.destroy(),c.clear()}function H(){h||(h=!0,c.clear(),O(),a.emit("destroy"),a.clear())}function B(z,y,M){!b.active||h||(l.scrollBody.useBaseFriction().useDuration(y===!0?0:b.duration),l.scrollTo.index(z,M||0))}function q(z){const y=l.index.add(1).get();B(y,z,-1)}function st(z){const y=l.index.add(-1).get();B(y,z,1)}function Q(){return l.index.add(1).get()!==U()}function K(){return l.index.add(-1).get()!==U()}function J(){return l.scrollSnapList}function rt(){return l.scrollProgress.get(l.offsetLocation.get())}function U(){return l.index.get()}function dt(){return l.indexPrevious.get()}function gt(){return l.slidesInView.get()}function Z(){return l.slidesInView.get(!1)}function Pt(){return C}function It(){return l}function X(){return e}function G(){return P}function ut(){return w}const W={canScrollNext:Q,canScrollPrev:K,containerNode:G,internalEngine:It,destroy:H,off:x,on:m,emit:g,plugins:Pt,previousScrollSnap:dt,reInit:d,rootNode:X,scrollNext:q,scrollPrev:st,scrollProgress:rt,scrollSnapList:J,scrollTo:B,selectedScrollSnap:U,slideNodes:ut,slidesInView:gt,slidesNotInView:Z};return A(t,n),setTimeout(()=>a.emit("init"),0),W}Ht.globalOptions=void 0;function fe(e,t={options:{},plugins:[]}){let n=t,r;return In()&&(Ht.globalOptions=fe.globalOptions,r=Ht(e,n.options,n.plugins),r.on("init",()=>e.dispatchEvent(new CustomEvent("emblaInit",{detail:r})))),{destroy:()=>{r&&r.destroy()},update:i=>{const s=!ae(n.options,i.options),o=!Ln(n.plugins,i.plugins);!s&&!o||(n=i,r&&r.reInit(n.options,n.plugins))}}}fe.globalOptions=void 0;var rs=N('<div data-slot="carousel-content" class="overflow-hidden"><div><!></div></div>');function je(e,t){et(t,!0);let n=j(t,"ref",15,null),r=bt(t,["$$slots","$$events","$$legacy","ref","class","children"]);const i=Kt("<Carousel.Content/>");var s=rs(),o=$(s);ie(o,a=>({class:a,"data-embla-container":"",...r}),[()=>Nt("flex",i.orientation==="horizontal"?"-ml-4":"-mt-4 flex-col",t.class)]);var c=$(o);zt(c,()=>t.children??kt),F(o),oe(o,a=>n(a),()=>n()),F(s),xn(s,(a,u)=>fe?.(a,u),()=>({options:{container:"[data-embla-container]",slides:"[data-embla-slide]",...i.options,axis:i.orientation==="horizontal"?"x":"y"},plugins:i.plugins})),ze("emblaInit",s,function(...a){i.onInit?.apply(this,a)}),L(e,s),nt()}var os=N("<div><!></div>");function $e(e,t){et(t,!0);let n=j(t,"ref",15,null),r=bt(t,["$$slots","$$events","$$legacy","ref","class","children"]);const i=Kt("<Carousel.Item/>");var s=os();ie(s,c=>({"data-slot":"carousel-item",role:"group","aria-roledescription":"slide",class:c,"data-embla-slide":"",...r}),[()=>Nt("min-w-0 shrink-0 grow-0 basis-full",i.orientation==="horizontal"?"pl-4":"pt-4",t.class)]);var o=$(s);zt(o,()=>t.children??kt),F(s),oe(s,c=>n(c),()=>n()),L(e,s),nt()}function is(e,t){et(t,!0);/**
 * @license @lucide/svelte v0.515.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let n=bt(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];Ne(e,Rt({name:"arrow-left"},()=>n,{get iconNode(){return r},children:(i,s)=>{var o=tt(),c=V(o);zt(c,()=>t.children??kt),L(i,o)},$$slots:{default:!0}})),nt()}var as=N('<!> <span class="sr-only">Previous slide</span>',1);function Be(e,t){et(t,!0);let n=j(t,"ref",15,null),r=j(t,"variant",3,"outline"),i=j(t,"size",3,"icon"),s=bt(t,["$$slots","$$events","$$legacy","ref","class","variant","size"]);const o=Kt("<Carousel.Previous/>");{let c=Bt(()=>!o.canScrollPrev),a=Bt(()=>Nt("absolute size-8 rounded-full",o.orientation==="horizontal"?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",t.class));_t(e,Rt({"data-slot":"carousel-previous",get variant(){return r()},get size(){return i()},get"aria-disabled"(){return S(c)},get class(){return S(a)},get onclick(){return o.scrollPrev},get onkeydown(){return o.handleKeyDown}},()=>s,{get ref(){return n()},set ref(u){n(u)},children:(u,p)=>{var f=as(),m=V(f);is(m,{class:"size-4"}),vt(2),L(u,f)},$$slots:{default:!0}}))}nt()}function cs(e,t){et(t,!0);/**
 * @license @lucide/svelte v0.515.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let n=bt(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M5 12h14"}],["path",{d:"m12 5 7 7-7 7"}]];Ne(e,Rt({name:"arrow-right"},()=>n,{get iconNode(){return r},children:(i,s)=>{var o=tt(),c=V(o);zt(c,()=>t.children??kt),L(i,o)},$$slots:{default:!0}})),nt()}var ls=N('<!> <span class="sr-only">Next slide</span>',1);function Ve(e,t){et(t,!0);let n=j(t,"ref",15,null),r=j(t,"variant",3,"outline"),i=j(t,"size",3,"icon"),s=bt(t,["$$slots","$$events","$$legacy","ref","class","variant","size"]);const o=Kt("<Carousel.Next/>");{let c=Bt(()=>!o.canScrollNext),a=Bt(()=>Nt("absolute size-8 rounded-full",o.orientation==="horizontal"?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",t.class));_t(e,Rt({"data-slot":"carousel-next",get variant(){return r()},get size(){return i()},get"aria-disabled"(){return S(c)},get class(){return S(a)},get onclick(){return o.scrollNext},get onkeydown(){return o.handleKeyDown}},()=>s,{get ref(){return n()},set ref(u){n(u)},children:(u,p)=>{var f=ls(),m=V(f);cs(m,{class:"size-4"}),vt(2),L(u,f)},$$slots:{default:!0}}))}nt()}var us=N('<img alt="Växtbild" class="w-full h-[220px] object-cover rounded-xl shadow-md bg-gray-200 max-w-[340px] mx-auto block"/>'),fs=N("<!> <!> <!>",1),ds=N('<div class="w-full max-w-[420px] mb-4 relative flex flex-col items-center"><!></div>'),ms=N('<div class="w-full max-w-[220px] h-[220px] rounded-xl bg-gray-200 shadow-md relative mb-4"><span class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-gray-400">Laddar bild...</span></div>'),gs=N('<div class="flex flex-col items-center w-full"><!> <h3 class="text-xl text-center mb-4">Vad är det svenska namnet för växten på bilden?</h3> <div class="w-full h-[2px] bg-gradient-to-r from-gray-200 to-slate-300 my-4 rounded-sm opacity-70"></div> <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 w-full max-w-[420px]"></div></div>');function ps(e,t){et(t,!0);let n=j(t,"loadingImages",3,!1);var r=gs(),i=$(r);{var s=a=>{var u=ds(),p=$(u);ct(p,()=>Oe,(f,m)=>{m(f,{opts:{align:"center",loop:!0},children:(x,g)=>{var d=fs(),h=V(d);ct(h,()=>je,(b,_)=>{_(b,{class:"-ml-4",children:(C,P)=>{var w=tt(),I=V(w);Vt(I,17,()=>t.question.images,Qt,(E,A)=>{var T=tt(),O=V(T);ct(O,()=>$e,(H,B)=>{B(H,{class:"pl-4 basis-full",children:(q,st)=>{var Q=us();St(()=>ke(Q,"src",S(A))),L(q,Q)},$$slots:{default:!0}})}),L(E,T)}),L(C,w)},$$slots:{default:!0}})});var l=Y(h,2);ct(l,()=>Be,(b,_)=>{_(b,{class:"absolute top-1/2 -translate-y-1/2 left-1 z-10 bg-white/85 rounded-full w-10 h-10 flex items-center justify-center shadow-sm border-none cursor-pointer text-gray-800 hover:bg-white"})});var v=Y(l,2);ct(v,()=>Ve,(b,_)=>{_(b,{class:"absolute top-1/2 -translate-y-1/2 right-1 z-10 bg-white/85 rounded-full w-10 h-10 flex items-center justify-center shadow-sm border-none cursor-pointer text-gray-800 hover:bg-white"})}),L(x,d)},$$slots:{default:!0}})}),F(u),L(a,u)},o=a=>{var u=tt(),p=V(u);{var f=m=>{var x=ms();L(m,x)};lt(p,m=>{n()&&m(f)},!0)}L(a,u)};lt(i,a=>{t.question?.images&&t.question.images.length>0?a(s):a(o,!1)})}var c=Y(i,6);Vt(c,21,()=>t.options,Qt,(a,u)=>{_t(a,{type:"button",variant:"outline",class:"w-full min-h-[3.7em] text-base whitespace-normal h-auto py-2 px-3",onclick:()=>t.onanswer(S(u)),children:(p,f)=>{vt();var m=Gt();St(()=>$t(m,S(u))),L(p,m)},$$slots:{default:!0}})}),F(c),F(r),L(e,r),nt()}var hs=N('<div class="flex flex-col items-center w-full"><h3 class="text-xl text-center mb-4">Vad är det latinska namnet för <span class="font-semibold"> </span>?</h3> <div class="w-full h-[2px] bg-gradient-to-r from-gray-200 to-slate-300 my-4 rounded-sm opacity-70"></div> <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 w-full max-w-[420px]"></div></div>');function vs(e,t){et(t,!0);var n=hs(),r=$(n),i=Y($(r)),s=$(i,!0);F(i),vt(),F(r);var o=Y(r,4);Vt(o,21,()=>t.options,Qt,(c,a)=>{_t(c,{type:"button",variant:"outline",class:"w-full min-h-[3.7em] text-base whitespace-normal h-auto py-2 px-3",onclick:()=>t.onanswer(S(a)),children:(u,p)=>{vt();var f=Gt();St(()=>$t(f,S(a))),L(u,f)},$$slots:{default:!0}})}),F(o),F(n),St(()=>$t(s,t.question?.swedishName)),L(e,n),nt()}var xs=N('<img alt="Växtbild" class="w-full h-[220px] object-cover rounded-xl shadow-md bg-gray-200 max-w-[340px] mx-auto block"/>'),bs=N("<!> <!> <!>",1),ys=N('<div class="w-full max-w-[420px] mb-4 relative flex flex-col items-center"><!></div>'),ws=N('<div class="w-full max-w-[220px] h-[220px] rounded-xl bg-gray-200 shadow-md relative mb-4"><span class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-gray-400">Laddar bild...</span></div>'),Ss=N('<div class="flex flex-col items-center w-full"><!> <h3 class="text-xl text-center mb-4">Vad heter växten på bilderna? <span class="block text-base font-normal text-gray-600 mt-1">Ange både svenska och latinska namnet.</span></h3> <div class="w-full h-[2px] bg-gradient-to-r from-gray-200 to-slate-300 my-4 rounded-sm opacity-70"></div> <form class="flex flex-col gap-4 items-center w-full max-w-[340px]"><!> <!> <!></form></div>');function _s(e,t){et(t,!0);let n=j(t,"loadingImages",3,!1),r=te(""),i=te(""),s=te(null);function o(d){d.preventDefault(),t.onanswer(JSON.stringify({swedish:S(r),latin:S(i)})),at(r,""),at(i,""),setTimeout(()=>{S(s)?.focus()},0)}Me(()=>{t.question&&setTimeout(()=>{S(s)?.focus()},0)});var c=Ss(),a=$(c);{var u=d=>{var h=ys(),l=$(h);ct(l,()=>Oe,(v,b)=>{b(v,{opts:{align:"center",loop:!0},children:(_,C)=>{var P=bs(),w=V(P);ct(w,()=>je,(A,T)=>{T(A,{class:"-ml-4",children:(O,H)=>{var B=tt(),q=V(B);Vt(q,17,()=>t.question.images,Qt,(st,Q)=>{var K=tt(),J=V(K);ct(J,()=>$e,(rt,U)=>{U(rt,{class:"pl-4 basis-full",children:(dt,gt)=>{var Z=xs();St(()=>ke(Z,"src",S(Q))),L(dt,Z)},$$slots:{default:!0}})}),L(st,K)}),L(O,B)},$$slots:{default:!0}})});var I=Y(w,2);ct(I,()=>Be,(A,T)=>{T(A,{class:"absolute top-1/2 -translate-y-1/2 left-1 z-10 bg-white/85 rounded-full w-10 h-10 flex items-center justify-center shadow-sm border-none cursor-pointer text-gray-800 hover:bg-white"})});var E=Y(I,2);ct(E,()=>Ve,(A,T)=>{T(A,{class:"absolute top-1/2 -translate-y-1/2 right-1 z-10 bg-white/85 rounded-full w-10 h-10 flex items-center justify-center shadow-sm border-none cursor-pointer text-gray-800 hover:bg-white"})}),L(_,P)},$$slots:{default:!0}})}),F(h),L(d,h)},p=d=>{var h=tt(),l=V(h);{var v=b=>{var _=ws();L(b,_)};lt(l,b=>{n()&&b(v)},!0)}L(d,h)};lt(a,d=>{t.question?.images&&t.question.images.length>0?d(u):d(p,!1)})}var f=Y(a,6),m=$(f);Le(m,{type:"text",placeholder:"Svenskt namn",required:!0,autocomplete:"off",class:"text-lg p-3",get value(){return S(r)},set value(d){at(r,d,!0)},get ref(){return S(s)},set ref(d){at(s,d,!0)}});var x=Y(m,2);Le(x,{type:"text",placeholder:"Latinskt namn",required:!0,autocomplete:"off",class:"text-lg p-3",get value(){return S(i)},set value(d){at(i,d,!0)}});var g=Y(x,2);_t(g,{type:"submit",class:"w-full",children:(d,h)=>{vt();var l=Gt("Svara");L(d,l)},$$slots:{default:!0}}),F(f),F(c),ze("submit",f,o),L(e,c),nt()}var Ps=N('<div class="mb-8 flex flex-col items-center"><!></div>');function Is(e,t){et(t,!0);let n=j(t,"loadingImages",3,!1);function r(a){t.onanswer?.(a)}var i=Ps(),s=$(i);{var o=a=>{ps(a,{get question(){return t.question},get options(){return t.options},get loadingImages(){return n()},onanswer:r})},c=a=>{var u=tt(),p=V(u);{var f=x=>{vs(x,{get question(){return t.question},get options(){return t.options},onanswer:r})},m=x=>{var g=tt(),d=V(g);{var h=l=>{_s(l,{get question(){return t.question},get loadingImages(){return n()},onanswer:r})};lt(d,l=>{t.mode?.id==="imageToNameFreetext"&&l(h)},!0)}L(x,g)};lt(p,x=>{t.mode?.id==="swedish-to-latin"?x(f):x(m,!1)},!0)}L(a,u)};lt(s,a=>{t.mode?.id==="image-to-swedish"?a(o):a(c,!1)})}F(i),L(e,i),nt()}var Ls=N('<div class="mb-4"><div class="text-base font-medium mb-2"> </div> <!></div>');function Ts(e,t){let n=j(t,"current",8),r=j(t,"total",8);var i=Ls(),s=$(i),o=$(s);F(s);var c=Y(s,2);vn(c,{get value(){return n()},get max(){return r()},"aria-label":"Quiz progress"}),F(i),St(()=>$t(o,`Fråga ${n()??""} av ${r()??""}`)),L(e,i)}const Es=()=>{const e=gn;return{page:{subscribe:e.page.subscribe},navigating:{subscribe:e.navigating.subscribe},updated:e.updated}},Cs={subscribe(e){return Es().page.subscribe(e)}};function As(e){if(e.manualPhotos&&e.manualPhotos.length>0){const a=[...e.manualPhotos];return jt(a),a.slice(0,4)}const t=e.taxonPhotos||[],n=e.observationPhotos||[],r=[...t];jt(r);const i=[...n];jt(i);let s=[],o=Math.min(2,r.length),c=Math.min(2,i.length);if(s=[...r.slice(0,o),...i.slice(0,c)],s.length<4){let a=r.slice(o),u=i.slice(c),p=[...a,...u];for(let f=0;f<p.length&&s.length<4;f++)s.includes(p[f])||s.push(p[f])}return jt(s),s}function jt(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}}async function Ms(e,t){const n=t||"plants.json";let r=await fetch(Pe(`/preprocessed/${n}`));if(r.ok||(console.warn(`Preprocessed data for ${n} not found, falling back to original`),r=await fetch(Pe(`/${n}`))),!r.ok)return console.error(`Failed to load plant data from ${n}`),[];let i=await r.json();return e&&(e==="image-to-swedish"||e==="imageToNameFreetext")&&(i=i.map(s=>{const o=As(s);return{...s,images:o}})),i}var zs=N('<div class="fixed inset-0 flex flex-col items-center justify-center bg-background/25 backdrop-blur-[2.5px] z-[200] pointer-events-auto transition-colors"><div class="w-12 h-12 border-4 border-border border-t-primary rounded-full animate-spin mb-5"></div> <div class="text-xl text-foreground tracking-wide font-medium flex items-center justify-center min-h-[2em]">Laddar frågor<span class="opacity-20 animate-pulse text-xl ml-0.5">.</span><span class="opacity-20 animate-pulse delay-200 text-xl ml-0.5">.</span><span class="opacity-20 animate-pulse delay-400 text-xl ml-0.5">.</span></div></div>'),ks=N('<div class="w-full flex justify-center items-center pt-5 pb-2 bg-transparent max-md:pt-3 max-md:pb-1"><!></div> <!>',1),Ns=N('<div style="display: flex; justify-content: center; margin-top: 2em;"><!></div>'),Os=N('<p class="quiz-loading">Inga frågor tillgängliga.</p>'),Ds=N("<main><!> <!></main>");function Us(e,t){et(t,!1);const n=()=>mn(qt,"$quiz",r),[r,i]=dn(),s=Ft();let o=Ft(!0),c=Ft(void 0);async function a(l,v){const b=ee.find(C=>C.id===l)||ee[0];at(c,b),S(c).id,at(o,!0);const _=await Ms(S(c).id,v);S(c)&&qt.start(_,S(c)),at(o,!1)}tn(()=>{const l=en(Cs).url.searchParams,v=l.get("mode"),b=l.get("week")||void 0,_=v||ee[0].id;return a(_,b),qt.subscribe(P=>{P.finished&&_e(Ie("/result"))})});function u(l){qt.answer(l)}function p(l){return!S(s).questions.length||!S(c)?[]:S(c).getOptions(S(s).questions,l)}let f=Ft(!1);we(()=>n(),()=>{at(s,n())}),we(()=>(S(o),S(c)),()=>{at(f,S(o)&&(S(c)?.id==="image-to-swedish"||S(c)?.id==="imageToNameFreetext"))}),fn(),We();var m=Ds(),x=$(m);_t(x,{onclick:()=>_e(Ie("/")),class:"fixed top-8 left-8 z-50 rounded-full px-6 py-3 text-lg shadow-md bg-background text-foreground border border-border transition-all hover:bg-muted hover:shadow-lg max-md:top-4 max-md:left-4 max-md:px-5 max-md:py-2 max-md:text-base","aria-label":"Hem",children:(l,v)=>{vt();var b=Gt("Hem");L(l,b)},$$slots:{default:!0}});var g=Y(x,2);{var d=l=>{var v=zs();L(l,v)},h=l=>{var v=tt(),b=V(v);{var _=P=>{var w=Ns(),I=$(w);pn(I,{style:"max-width: 480px; width: 100%; min-height: 420px; box-shadow: 0 2px 16px #0001; position: relative; display: flex; flex-direction: column; justify-content: flex-start;",children:(E,A)=>{var T=ks(),O=V(T),H=$(O);{let q=Se(()=>(S(s),wt(()=>S(s).current+1)));Ts(H,{get current(){return S(q)},get total(){return S(s),wt(()=>S(s).questions.length)}})}F(O);var B=Y(O,2);hn(B,{children:(q,st)=>{var Q=tt(),K=V(Q);{var J=rt=>{{let U=Se(()=>(S(s),wt(()=>p(S(s).current))));Is(rt,{get question(){return S(s),wt(()=>S(s).questions[S(s).current])},get options(){return S(U)},get mode(){return S(c)},get loadingImages(){return S(f)},onanswer:u})}};lt(K,rt=>{S(c)&&rt(J)})}L(q,Q)},$$slots:{default:!0}}),L(E,T)},$$slots:{default:!0}}),F(w),L(P,w)},C=P=>{var w=Os();L(P,w)};lt(b,P=>{S(s),wt(()=>S(s).questions.length&&!S(s).finished)?P(_):P(C,!1)},!0)}L(l,v)};lt(g,l=>{S(o)?l(d):l(h,!1)})}F(m),L(e,m),nt(),i()}export{Us as component};
