import"../chunks/DsnmJJEf.js";import{i as ze}from"../chunks/O07ntBB6.js";import{p as qe,f as b,v as a,D as p,a as r,b as Fe,s as v,J as S,K as J,y as e,c as i,r as s,n as re,C as q,L as fe,M as Se,t as y,H as X,N as Je}from"../chunks/CiE31j-C.js";import{o as je,s as m}from"../chunks/DXjAl6MA.js";import{p as pe,i as g,b as Ke,s as Le,a as Oe}from"../chunks/CCcP16-Y.js";import{Q as We,q as ye,e as be,i as we}from"../chunks/ChiHf1JA.js";import{s as se}from"../chunks/Bn4-x1jj.js";import{g as Ee}from"../chunks/-yDmXD0g.js";import{r as Ge,C as Ue,a as Xe}from"../chunks/D-Bf5xDR.js";import{B as Ye}from"../chunks/C11k4uBJ.js";var Ze=b('<canvas class="confetti-canvas svelte-17e6nia" width="320" height="180" aria-hidden="true"></canvas>'),et=b('<div class="congrats svelte-17e6nia">🎉 Perfekt! Alla rätt! 🎉</div> <!>',1),tt=b('<div class="quiz-result svelte-17e6nia"><h2 class="svelte-17e6nia">Resultat</h2> <div class="progress-container svelte-17e6nia"><svg width="120" height="120" viewBox="0 0 120 120" class="svelte-17e6nia"><circle class="progress-bg svelte-17e6nia" cx="60" cy="60" r="52" stroke="#e5e7eb" stroke-width="12" fill="none"></circle><circle class="progress-bar svelte-17e6nia" cx="60" cy="60" r="52" stroke="#22c55e" stroke-width="12" fill="none" stroke-linecap="round" style="transition: stroke-dashoffset 1s cubic-bezier(.4,2,.6,1);"></circle><text x="60" y="68" text-anchor="middle" font-size="2.2em" fill="#222" class="svelte-17e6nia"> </text><text x="60" y="92" text-anchor="middle" font-size="1em" fill="#888" class="svelte-17e6nia"> </text></svg></div> <p class="svelte-17e6nia">Du fick <b class="svelte-17e6nia"> </b> av <b class="svelte-17e6nia"> </b> rätt!</p> <!></div>');function at(ie,j){qe(j,!1);let f=pe(j,"score",8),C=pe(j,"total",8),Y=J(!1),T=J(0),N=J(null);je(()=>{S(T,Math.round(f()/C()*100)),f()===C()&&(S(Y,!0),setTimeout(()=>{e(N)&&n(e(N))},300))});function n(x){const _=x.getContext("2d");if(!_)return;const t=x.width=320,F=x.height=180,k=80,B=[],A=["#FFD700","#FF69B4","#00CFFF","#7CFC00","#FF6347","#FFB347"];for(let u=0;u<k;u++)B.push({x:Math.random()*t,y:Math.random()*F/2,r:4+Math.random()*4,c:A[Math.floor(Math.random()*A.length)],vx:-2+Math.random()*4,vy:2+Math.random()*3});let te=0;function ne(){if(_){_.clearRect(0,0,t,F);for(const u of B)_.beginPath(),_.arc(u.x,u.y,u.r,0,2*Math.PI),_.fillStyle=u.c,_.fill(),u.x+=u.vx,u.y+=u.vy,u.vy+=.05;te++,te<60&&requestAnimationFrame(ne)}}ne()}ze();var P=tt(),K=v(i(P),2),L=i(K),$=v(i(L));se($,"stroke-dasharray",a(()=>2*Math.PI*52));var R=v($),oe=i(R,!0);s(R);var O=v(R),Z=i(O);s(O),s(L),s(K);var W=v(K,2),V=v(i(W)),ee=i(V,!0);s(V);var E=v(V,2),ve=i(E,!0);s(E),re(),s(W);var le=v(W,2);{var z=x=>{var _=et(),t=v(q(_),2);{var F=k=>{var B=Ze();Ke(B,A=>S(N,A),()=>e(N)),r(k,B)};g(t,k=>{e(Y)&&k(F)})}r(x,_)};g(le,x=>{f()===C()&&x(z)})}s(P),p(()=>{se($,"stroke-dashoffset",(e(T),a(()=>2*Math.PI*52*(1-e(T)/100)))),m(oe,f()),m(Z,`/ ${C()??""}`),m(ee,f()),m(ve,C())}),r(ie,P),Fe()}var rt=b("Vad är det latinska namnet för <span> </span>?",1),st=b('<img alt="Växtbild" class="answer-image svelte-amg0zy"/>'),it=b('<div class="image-list svelte-amg0zy"></div>'),ot=b("<div><b>Ditt svar:</b> <!></div>"),vt=b('<div class="result-header svelte-amg0zy"><span class="result-icon svelte-amg0zy"> </span> <b> </b></div> <div><b>Fråga:</b> <!></div> <!> <!> <div><b>Rätt svar:</b> <!></div>',1),lt=b('<li style="margin-bottom:1.5em;"><div class="card-container svelte-amg0zy"><!></div></li>'),nt=b('<ul style="width:100%;max-width:420px;padding:0;list-style:none;"></ul>'),ct=b('<header class="quiz-header svelte-amg0zy"><div class="quiz-header__left svelte-amg0zy"><!></div> <div class="quiz-header__center svelte-amg0zy"><div style="width:100%;display:flex;justify-content:center;opacity:0;pointer-events:none;user-select:none;" aria-hidden="true"><!></div></div> <div class="quiz-header__right svelte-amg0zy"></div></header> <main><div class="centered-main svelte-amg0zy"><!> <hr class="result-divider svelte-amg0zy"/> <!></div></main>',1);function wt(ie,j){qe(j,!1);const f=()=>Oe(ye,"$quiz",C),[C,Y]=Le(),T=J(),N=J(),n=J();function P(z){try{return JSON.parse(z)}catch{return null}}function K(){ye.reset(),Ee(Ge("/"))}fe(()=>f(),()=>{S(T,f().score)}),fe(()=>f(),()=>{S(N,f().questions.length)}),fe(()=>f(),()=>{S(n,f().mode)}),Se(),ze();var L=ct(),$=q(L),R=i($),oe=i(R);Ye(oe,{onclick:K,class:"home-btn",children:(z,x)=>{re();var _=y("Hem");r(z,_)},$$slots:{default:!0}}),s(R);var O=v(R,2),Z=i(O),W=i(Z);We(W,{current:1,total:1}),s(Z),s(O),re(2),s($);var V=v($,2),ee=i(V),E=i(ee);at(E,{get score(){return e(T)},get total(){return e(N)}});var ve=v(E,4);{var le=z=>{var x=nt();be(x,5,()=>(f(),a(()=>f().answers)),we,(_,t)=>{var F=lt(),k=i(F),B=i(k);{let A=Je(()=>(e(t),a(()=>e(t).correct?"correct-card":"incorrect-card")));Ue(B,{get class(){return e(A)},children:(te,ne)=>{Xe(te,{children:(u,dt)=>{var _e=vt(),ce=q(_e),ae=i(ce),ke=i(ae,!0);s(ae);var ue=v(ae,2),Me=i(ue,!0);s(ue),s(ce);var de=v(ce,2),Ce=v(i(de),2);{var Ne=o=>{var c=y("Vad är det svenska namnet för växten på bilden?");r(o,c)},Pe=o=>{var c=X(),D=q(c);{var H=l=>{var d=rt(),I=v(q(d)),G=i(I,!0);s(I),re(),p(()=>m(G,(e(t),a(()=>e(t).question.swedishName)))),r(l,d)},M=l=>{var d=X(),I=q(d);{var G=h=>{var w=y("Vad heter växten på bilderna? (Svenska och latin)");r(h,w)},me=h=>{var w=y();p(()=>m(w,`${e(t),a(()=>e(t).question.swedishName)??""} (${e(t),a(()=>e(t).question.latinName)??""})`)),r(h,w)};g(I,h=>{e(n),a(()=>e(n).id==="imageToNameFreetext")?h(G):h(me,!1)},!0)}r(l,d)};g(D,l=>{e(n),a(()=>e(n).id==="swedish-to-latin")?l(H):l(M,!1)},!0)}r(o,c)};g(Ce,o=>{e(n),a(()=>e(n).id==="image-to-swedish")?o(Ne):o(Pe,!1)})}s(de);var he=v(de,2);{var $e=o=>{var c=it();be(c,5,()=>(e(t),a(()=>e(t).question.images)),we,(D,H)=>{var M=st();p(()=>se(M,"src",e(H))),r(D,M)}),s(c),r(o,c)};g(he,o=>{e(n),e(t),a(()=>(e(n).id==="image-to-swedish"||e(n).id==="imageToNameFreetext")&&e(t).question.images&&e(t).question.images.length)&&o($e)})}var ge=v(he,2);{var Re=o=>{var c=ot(),D=v(i(c),2);{var H=l=>{var d=X(),I=q(d);{var G=h=>{var w=X(),Te=q(w);{var Ve=Q=>{var U=y();p((Ie,Qe)=>m(U,`${Ie??""} / ${Qe??""}`),[()=>(e(t),a(()=>P(e(t).answer)?.swedish)),()=>(e(t),a(()=>P(e(t).answer)?.latin))]),r(Q,U)},Ae=Q=>{var U=y();p(()=>m(U,(e(t),a(()=>e(t).answer)))),r(Q,U)};g(Te,Q=>{e(t),a(()=>P(e(t).answer))?Q(Ve):Q(Ae,!1)})}r(h,w)},me=h=>{var w=y();p(()=>m(w,(e(t),a(()=>e(t).answer)))),r(h,w)};g(I,h=>{e(t),a(()=>e(t).answer)?h(G):h(me,!1)})}r(l,d)},M=l=>{var d=y();p(()=>m(d,(e(t),a(()=>e(t).answer)))),r(l,d)};g(D,l=>{e(n),a(()=>e(n).id==="imageToNameFreetext")?l(H):l(M,!1)})}s(c),r(o,c)};g(ge,o=>{e(t),a(()=>!e(t).correct)&&o(Re)})}var xe=v(ge,2),Be=v(i(xe),2);{var De=o=>{var c=y();p(()=>m(c,(e(t),a(()=>e(t).question.swedishName)))),r(o,c)},He=o=>{var c=X(),D=q(c);{var H=l=>{var d=y();p(()=>m(d,(e(t),a(()=>e(t).question.latinName)))),r(l,d)},M=l=>{var d=y();p(()=>m(d,`${e(t),a(()=>e(t).question.swedishName)??""} / ${e(t),a(()=>e(t).question.latinName)??""}`)),r(l,d)};g(D,l=>{e(n),a(()=>e(n).id==="swedish-to-latin")?l(H):l(M,!1)},!0)}r(o,c)};g(Be,o=>{e(n),a(()=>e(n).id==="image-to-swedish")?o(De):o(He,!1)})}s(xe),p(()=>{se(ae,"aria-label",(e(t),a(()=>e(t).correct?"Rätt":"Fel"))),m(ke,(e(t),a(()=>e(t).correct?"✔":"❌"))),m(Me,(e(t),a(()=>e(t).correct?"Rätt":"Fel")))}),r(u,_e)},$$slots:{default:!0}})},$$slots:{default:!0}})}s(k),s(F),r(_,F)}),s(x),r(z,x)};g(ve,z=>{e(n)&&z(le)})}s(ee),s(V),r(ie,L),Fe(),Y()}export{wt as component};
