import"../chunks/DsnmJJEf.js";import{i as X}from"../chunks/DNgtaTqA.js";import{p as Y,f as x,a8 as m,c as s,d as Z,s as n,e as d,r as l,au as T,av as _e,i as E,m as Q,j as e,a1 as r,a7 as $,ar as V,aw as xe,ax as k}from"../chunks/zngdAFSY.js";import{c as he,e as we,s as c}from"../chunks/DkkBxieF.js";import{p as M,i as _,s as be,a as qe}from"../chunks/Chse6MBw.js";import{q as P,e as U,i as W}from"../chunks/iO6zg4Ln.js";import{s as ye}from"../chunks/DwIY1aQq.js";import{g as Ne}from"../chunks/BVC5__Yd.js";import{r as $e}from"../chunks/SYoqwPLj.js";var ke=x('<div class="quiz-result svelte-4nrqxo"><h2 class="svelte-4nrqxo">Resultat</h2> <p> </p> <button class="svelte-4nrqxo">Hem</button></div>');function ze(z,h){Y(h,!1);let a=M(h,"score",8),F=M(h,"total",8);const D=he();X();var u=ke(),p=n(d(u),2),i=d(p);l(p);var w=n(p,2);l(u),m(()=>c(i,`Du fick ${a()??""} av ${F()??""} r채tt!`)),we("click",w,()=>D("goHome")),s(z,u),Z()}var Fe=x('<img alt="V채xtbild" style="max-width:120px;max-height:140px;width:100%;height:140px;object-fit:cover;border-radius:8px;box-shadow:0 1px 4px #0001;background:#e5e7eb;"/>'),De=x('<div style="display:flex;gap:1em;margin:0.5em 0;"></div>'),He=xe(x(`<li style="margin-bottom:1.5em;padding:1em;background:#f8fafc;border-radius:10px;box-shadow:0 1px 4px #0001;"><div><b>Fr책ga:</b> </div> <!> <div><b>Ditt svar:</b> <!></div> <script lang="ts">
  // ...existing imports and code...

  function parseAnswer(answer: string): { swedish: string; latin: string } | null {
    try {
      return JSON.parse(answer);
    } catch {
      return null;
    }
  }
<\/script> <div><b>R채tt svar:</b> </div></li>`)),Re=x('<h3 style="margin-top:2rem;">Felaktiga svar</h3> <ul style="width:100%;max-width:420px;padding:0;list-style:none;"></ul>',1),je=x('<main class="centered-main svelte-mg4ptu"><!> <!></main>');function Ce(z,h){Y(h,!1);const a=()=>qe(P,"$quiz",F),[F,D]=be(),u=Q(),p=Q(),i=Q();function w(b){try{return JSON.parse(b)}catch{return null}}function ee(){P.reset(),Ne($e("/"))}T(()=>a(),()=>{E(u,a().score)}),T(()=>a(),()=>{E(p,a().questions.length)}),T(()=>a(),()=>{E(i,a().mode)}),_e(),X();var H=je(),B=d(H);ze(B,{get score(){return e(u)},get total(){return e(p)},$$events:{goHome:ee}});var te=n(B,2);{var re=b=>{var C=Re(),G=n($(C),2);U(G,5,()=>(a(),r(()=>a().answers)),W,(ae,t)=>{var I=V(),se=$(I);{var ie=R=>{var j=He(),A=d(j),oe=n(d(A));l(A);var K=n(A,2);{var ne=o=>{var v=De();U(v,5,()=>(e(t),r(()=>e(t).question.images)),W,(O,S)=>{var N=Fe();m(()=>ye(N,"src",e(S))),s(O,N)}),l(v),s(o,v)};_(K,o=>{e(i),e(t),r(()=>(e(i).id==="image-to-swedish"||e(i).id==="imageToNameFreetext")&&e(t).question.images&&e(t).question.images.length)&&o(ne)})}var J=n(K,2),ve=n(d(J),2);{var le=o=>{var v=V(),O=$(v);{var S=g=>{var q=V(),de=$(q);{var ue=f=>{var y=k();m((ge,fe)=>c(y,`${ge??""} / ${fe??""}`),[()=>(e(t),r(()=>w(e(t).answer)?.swedish)),()=>(e(t),r(()=>w(e(t).answer)?.latin))]),s(f,y)},pe=f=>{var y=k();m(()=>c(y,(e(t),r(()=>e(t).answer)))),s(f,y)};_(de,f=>{e(t),r(()=>w(e(t).answer))?f(ue):f(pe,!1)})}s(g,q)},N=g=>{var q=k();m(()=>c(q,(e(t),r(()=>e(t).answer)))),s(g,q)};_(O,g=>{e(t),r(()=>e(t).answer)?g(S):g(N,!1)})}s(o,v)},me=o=>{var v=k();m(()=>c(v,(e(t),r(()=>e(t).answer)))),s(o,v)};_(ve,o=>{e(i),r(()=>e(i).id==="imageToNameFreetext")?o(le):o(me,!1)})}l(J);var L=n(J,4),ce=n(d(L));l(L),l(j),m(()=>{c(oe,` ${e(t),r(()=>e(t).question.swedishName)??""} (${e(t),r(()=>e(t).question.latinName)??""})`),c(ce,` ${e(t),r(()=>e(t).question.swedishName)??""} / ${e(t),r(()=>e(t).question.latinName)??""}`)}),s(R,j)};_(se,R=>{e(t),r(()=>!e(t).correct)&&R(ie)})}s(ae,I)}),l(G),s(b,C)};_(te,b=>{a(),e(i),r(()=>a().questions.length>0&&a().answers.length===a().questions.length&&e(i))&&b(re)})}l(H),s(z,H),Z(),D()}export{Ce as component};
