import"../chunks/DsnmJJEf.js";import{i as $t}from"../chunks/O07ntBB6.js";import{c as on,o as jt,s as Lt,g as an}from"../chunks/DXjAl6MA.js";import{h as fe,e as Ct,l as Ze,b0 as cn,d as ln,E as un,i as fn,b1 as dn,au as mn,b2 as gn,ae as pn,g as hn,S as Tt,R as kt,a3 as vn,m as bn,T as yn,aL as xn,V as _n,v as K,W as ut,z as re,av as wn,b3 as Bt,j as Me,aI as Sn,b4 as En,p as ae,H as oe,C as Z,a as N,b as ce,f as V,aG as Ln,aF as Cn,aE as Tn,a2 as kn,q as Nn,c as X,F as ke,G as Ne,r as U,b5 as Vt,b6 as In,s as de,y as w,aK as ze,b7 as Mn,n as we,L as rt,K as _e,J as me,M as Rt,t as st,D as Re,N as Nt}from"../chunks/CiE31j-C.js";import{p as O,i as se,r as ve,b as De,c as He,s as Pn,a as An}from"../chunks/CCcP16-Y.js";import{r as It,a as Se,s as Gt,b as zn}from"../chunks/Bn4-x1jj.js";import{e as ot,i as it,Q as Dn,q as Ve}from"../chunks/ChiHf1JA.js";import{s as On,g as Mt}from"../chunks/Cm-1syMG.js";import{c as Ee,B as Oe}from"../chunks/C11k4uBJ.js";import{r as Pt,b as Fn,C as qn,a as $n}from"../chunks/YXqm2Daa.js";function jn(e,t,n,i,o,r){let s=fe;fe&&Ct();var c,a,l=null;fe&&Ze.nodeType===cn&&(l=Ze,Ct());var p=fe?Ze:e,u;ln(()=>{const f=t()||null;var b=dn;f!==c&&(u&&(f===null?bn(u,()=>{u=null,a=null}):f===a?yn(u):xn(u)),f&&f!==a&&(u=fn(()=>{if(l=fe?l:document.createElementNS(b,f),mn(l,l),i){fe&&gn(f)&&l.append(document.createComment(""));var m=fe?pn(l):l.appendChild(hn());fe&&(m===null?Tt(!1):kt(m)),i(l,m)}vn.nodes_end=l,p.before(l)})),c=f,c&&(a=c))},un),s&&(Tt(!0),kt(p))}function Bn(e,t,n){_n(()=>{var i=K(()=>t(e,n?.())||{});if(n&&i?.update){var o=!1,r={};ut(()=>{var s=n();re(s),o&&wn(r,s)&&(r=s,i.update(s))}),o=!0}if(i?.destroy)return()=>i.destroy()})}function At(e,t,n=t){var i=new WeakSet;Bt(e,"input",async o=>{var r=o?e.defaultValue:e.value;if(r=et(e)?tt(r):r,n(r),Me!==null&&i.add(Me),await Sn(),r!==(r=t())){var s=e.selectionStart,c=e.selectionEnd;e.value=r??"",c!==null&&(e.selectionStart=s,e.selectionEnd=Math.min(c,e.value.length))}}),(fe&&e.defaultValue!==e.value||K(t)==null&&e.value)&&(n(et(e)?tt(e.value):e.value),Me!==null&&i.add(Me)),ut(()=>{var o=t();if(e===document.activeElement){var r=En??Me;if(i.has(r))return}et(e)&&o===tt(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function et(e){var t=e.type;return t==="number"||t==="range"}function tt(e){return e===""?null:+e}function Vn(e,t,n=t){Bt(e,"change",()=>{n(e.files)}),fe&&e.files&&n(e.files),ut(()=>{e.files=t()})}function Rn(e){return function(...t){var n=t[0];return n.preventDefault(),e?.apply(this,t)}}const Gn={id:"image-to-swedish",label:"Image → Swedish name",generateQuestions(e){return[...e].sort(()=>Math.random()-.5).map(n=>({...n,images:n.images||[],answer:n.swedishName}))},checkAnswer(e,t){return t.trim().toLowerCase()===e.swedishName.trim().toLowerCase()},getOptions(e,t){const n=e[t].answer,i=e.map(r=>r.answer),o=[n];for(;o.length<4&&i.length>o.length;){const r=i[Math.floor(Math.random()*i.length)];o.includes(r)||o.push(r)}return o.sort(()=>Math.random()-.5)}},Hn={id:"swedish-to-latin",label:"Swedish name → Latin name",generateQuestions(e){return[...e].sort(()=>Math.random()-.5).map(n=>({...n,question:n.swedishName,answer:n.latinName}))},checkAnswer(e,t){return t.trim().toLowerCase()===e.latinName.trim().toLowerCase()},getOptions(e,t){const n=e[t].answer,i=e.map(r=>r.answer),o=[n];for(;o.length<4&&i.length>o.length;){const r=i[Math.floor(Math.random()*i.length)];o.includes(r)||o.push(r)}return o.sort(()=>Math.random()-.5)}},Qn={id:"imageToNameFreetext",label:"Image to name (freetext)",generateQuestions:e=>[...e].sort(()=>Math.random()-.5).map(n=>({images:n.images||[],swedishName:n.swedishName||n.swedish||"",latinName:n.latinName||n.latin||"",answer:""})),checkAnswer:(e,t)=>{let n={};try{n=JSON.parse(t)}catch{return!1}const i=e.swedishName||"",o=e.latinName||"",r=n.swedish||"",s=n.latin||"",c=r.trim().toLowerCase()===i.trim().toLowerCase(),a=s.trim().toLowerCase()===o.trim().toLowerCase();return c&&a},getOptions:()=>[]},nt=[Gn,Hn,Qn];var Kn=V("<input/>"),Un=V("<input/>");function zt(e,t){ae(t,!0);let n=O(t,"ref",15,null),i=O(t,"value",15),o=O(t,"files",15),r=ve(t,["$$slots","$$events","$$legacy","ref","value","type","files","class"]);var s=oe(),c=Z(s);{var a=p=>{var u=Kn();It(u),Se(u,f=>({"data-slot":"input",class:f,type:"file",...r}),[()=>Ee("selection:bg-primary dark:bg-input/30 selection:text-primary-foreground border-input ring-offset-background placeholder:text-muted-foreground shadow-xs flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 pt-1.5 text-sm font-medium outline-none transition-[color,box-shadow] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t.class)]),De(u,f=>n(f),()=>n()),Vn(u,o),At(u,i),N(p,u)},l=p=>{var u=Un();It(u),Se(u,f=>({"data-slot":"input",class:f,type:t.type,...r}),[()=>Ee("border-input bg-background selection:bg-primary dark:bg-input/30 selection:text-primary-foreground ring-offset-background placeholder:text-muted-foreground shadow-xs flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base outline-none transition-[color,box-shadow] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t.class)]),De(u,f=>n(f),()=>n()),At(u,i),N(p,u)};se(c,p=>{t.type==="file"?p(a):p(l,!1)})}N(e,s),ce()}const at=Symbol("EMBLA_CAROUSEL_CONTEXT");function Jn(e){return Ln(at,e),e}function Qe(e="This component"){if(!Cn(at))throw new Error(`${e} must be used within a <Carousel.Root> component`);return Tn(at)}var Xn=V("<div><!></div>");function Wn(e,t){ae(t,!0);let n=O(t,"ref",15,null),i=O(t,"opts",19,()=>({})),o=O(t,"plugins",19,()=>[]),r=O(t,"setApi",3,()=>{}),s=O(t,"orientation",3,"horizontal"),c=ve(t,["$$slots","$$events","$$legacy","ref","opts","plugins","setApi","orientation","class","children"]),a=kn({api:void 0,scrollPrev:l,scrollNext:p,orientation:s(),canScrollNext:!1,canScrollPrev:!1,handleKeyDown:b,options:i(),plugins:o(),onInit:m,scrollSnaps:[],selectedIndex:0,scrollTo:u});Jn(a);function l(){a.api?.scrollPrev()}function p(){a.api?.scrollNext()}function u(d,h){a.api?.scrollTo(d,h)}function f(){a.api&&(a.selectedIndex=a.api.selectedScrollSnap(),a.canScrollNext=a.api.canScrollNext(),a.canScrollPrev=a.api.canScrollPrev())}function b(d){d.key==="ArrowLeft"?(d.preventDefault(),l()):d.key==="ArrowRight"&&(d.preventDefault(),p())}function m(d){a.api=d.detail,r()(a.api),a.scrollSnaps=a.api.scrollSnapList(),a.api.on("select",f),f()}Nn(()=>()=>{a.api?.off("select",f)});var g=Xn();Se(g,d=>({"data-slot":"carousel",class:d,role:"region","aria-roledescription":"carousel",...c}),[()=>Ee("relative",t.class)]);var v=X(g);ke(v,()=>t.children??Ne),U(g),De(g,d=>n(d),()=>n()),N(e,g),ce()}function Yn(e){return Object.prototype.toString.call(e)==="[object Object]"}function Dt(e){return Yn(e)||Array.isArray(e)}function Zn(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function ft(e,t){const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;const o=JSON.stringify(Object.keys(e.breakpoints||{})),r=JSON.stringify(Object.keys(t.breakpoints||{}));return o!==r?!1:n.every(s=>{const c=e[s],a=t[s];return typeof c=="function"?`${c}`==`${a}`:!Dt(c)||!Dt(a)?c===a:ft(c,a)})}function Ot(e){return e.concat().sort((t,n)=>t.name>n.name?1:-1).map(t=>t.options)}function er(e,t){if(e.length!==t.length)return!1;const n=Ot(e),i=Ot(t);return n.every((o,r)=>{const s=i[r];return ft(o,s)})}function dt(e){return typeof e=="number"}function ct(e){return typeof e=="string"}function Ke(e){return typeof e=="boolean"}function Ft(e){return Object.prototype.toString.call(e)==="[object Object]"}function $(e){return Math.abs(e)}function mt(e){return Math.sign(e)}function Ae(e,t){return $(e-t)}function tr(e,t){if(e===0||t===0||$(e)<=$(t))return 0;const n=Ae($(e),$(t));return $(n/e)}function nr(e){return Math.round(e*100)/100}function Fe(e){return qe(e).map(Number)}function ie(e){return e[je(e)]}function je(e){return Math.max(0,e.length-1)}function gt(e,t){return t===je(e)}function qt(e,t=0){return Array.from(Array(e),(n,i)=>t+i)}function qe(e){return Object.keys(e)}function Ht(e,t){return[e,t].reduce((n,i)=>(qe(i).forEach(o=>{const r=n[o],s=i[o],c=Ft(r)&&Ft(s);n[o]=c?Ht(r,s):s}),n),{})}function lt(e,t){return typeof t.MouseEvent<"u"&&e instanceof t.MouseEvent}function rr(e,t){const n={start:i,center:o,end:r};function i(){return 0}function o(a){return r(a)/2}function r(a){return t-a}function s(a,l){return ct(e)?n[e](a):e(t,a,l)}return{measure:s}}function $e(){let e=[];function t(o,r,s,c={passive:!0}){let a;if("addEventListener"in o)o.addEventListener(r,s,c),a=()=>o.removeEventListener(r,s,c);else{const l=o;l.addListener(s),a=()=>l.removeListener(s)}return e.push(a),i}function n(){e=e.filter(o=>o())}const i={add:t,clear:n};return i}function sr(e,t,n,i){const o=$e(),r=1e3/60;let s=null,c=0,a=0;function l(){o.add(e,"visibilitychange",()=>{e.hidden&&m()})}function p(){b(),o.clear()}function u(v){if(!a)return;s||(s=v,n(),n());const d=v-s;for(s=v,c+=d;c>=r;)n(),c-=r;const h=c/r;i(h),a&&(a=t.requestAnimationFrame(u))}function f(){a||(a=t.requestAnimationFrame(u))}function b(){t.cancelAnimationFrame(a),s=null,c=0,a=0}function m(){s=null,c=0}return{init:l,destroy:p,start:f,stop:b,update:n,render:i}}function or(e,t){const n=t==="rtl",i=e==="y",o=i?"y":"x",r=i?"x":"y",s=!i&&n?-1:1,c=p(),a=u();function l(m){const{height:g,width:v}=m;return i?g:v}function p(){return i?"top":n?"right":"left"}function u(){return i?"bottom":n?"left":"right"}function f(m){return m*s}return{scroll:o,cross:r,startEdge:c,endEdge:a,measureSize:l,direction:f}}function Le(e=0,t=0){const n=$(e-t);function i(l){return l<e}function o(l){return l>t}function r(l){return i(l)||o(l)}function s(l){return r(l)?i(l)?e:t:l}function c(l){return n?l-n*Math.ceil((l-t)/n):l}return{length:n,max:t,min:e,constrain:s,reachedAny:r,reachedMax:o,reachedMin:i,removeOffset:c}}function Qt(e,t,n){const{constrain:i}=Le(0,e),o=e+1;let r=s(t);function s(f){return n?$((o+f)%o):i(f)}function c(){return r}function a(f){return r=s(f),u}function l(f){return p().set(c()+f)}function p(){return Qt(e,c(),n)}const u={get:c,set:a,add:l,clone:p};return u}function ir(e,t,n,i,o,r,s,c,a,l,p,u,f,b,m,g,v,d,h){const{cross:_,direction:P}=e,E=["INPUT","SELECT","TEXTAREA"],C={passive:!1},k=$e(),y=$e(),L=Le(50,225).constrain(b.measure(20)),T={mouse:300,touch:400},x={mouse:500,touch:600},M=m?43:25;let A=!1,I=0,F=0,z=!1,j=!1,R=!1,Q=!1;function G(S){if(!h)return;function D(Y){(Ke(h)||h(S,Y))&&Ce(Y)}const H=t;k.add(H,"dragstart",Y=>Y.preventDefault(),C).add(H,"touchmove",()=>{},C).add(H,"touchend",()=>{}).add(H,"touchstart",D).add(H,"mousedown",D).add(H,"touchcancel",W).add(H,"contextmenu",W).add(H,"click",pe,!0)}function B(){k.clear(),y.clear()}function le(){const S=Q?n:t;y.add(S,"touchmove",J,C).add(S,"touchend",W).add(S,"mousemove",J,C).add(S,"mouseup",W)}function te(S){const D=S.nodeName||"";return E.includes(D)}function ee(){return(m?x:T)[Q?"mouse":"touch"]}function ge(S,D){const H=u.add(mt(S)*-1),Y=p.byDistance(S,!m).distance;return m||$(S)<L?Y:v&&D?Y*.5:p.byIndex(H.get(),0).distance}function Ce(S){const D=lt(S,i);Q=D,R=m&&D&&!S.buttons&&A,A=Ae(o.get(),s.get())>=2,!(D&&S.button!==0)&&(te(S.target)||(z=!0,r.pointerDown(S),l.useFriction(0).useDuration(0),o.set(s),le(),I=r.readPoint(S),F=r.readPoint(S,_),f.emit("pointerDown")))}function J(S){if(!lt(S,i)&&S.touches.length>=2)return W(S);const H=r.readPoint(S),Y=r.readPoint(S,_),ue=Ae(H,I),he=Ae(Y,F);if(!j&&!Q&&(!S.cancelable||(j=ue>he,!j)))return W(S);const ye=r.pointerMove(S);ue>g&&(R=!0),l.useFriction(.3).useDuration(.75),c.start(),o.add(P(ye)),S.preventDefault()}function W(S){const H=p.byDistance(0,!1).index!==u.get(),Y=r.pointerUp(S)*ee(),ue=ge(P(Y),H),he=tr(Y,ue),ye=M-10*he,be=d+he/50;j=!1,z=!1,y.clear(),l.useDuration(ye).useFriction(be),a.distance(ue,!m),Q=!1,f.emit("pointerUp")}function pe(S){R&&(S.stopPropagation(),S.preventDefault(),R=!1)}function ne(){return z}return{init:G,destroy:B,pointerDown:ne}}function ar(e,t){let i,o;function r(u){return u.timeStamp}function s(u,f){const m=`client${(f||e.scroll)==="x"?"X":"Y"}`;return(lt(u,t)?u:u.touches[0])[m]}function c(u){return i=u,o=u,s(u)}function a(u){const f=s(u)-s(o),b=r(u)-r(i)>170;return o=u,b&&(i=u),f}function l(u){if(!i||!o)return 0;const f=s(o)-s(i),b=r(u)-r(i),m=r(u)-r(o)>170,g=f/b;return b&&!m&&$(g)>.1?g:0}return{pointerDown:c,pointerMove:a,pointerUp:l,readPoint:s}}function cr(){function e(n){const{offsetTop:i,offsetLeft:o,offsetWidth:r,offsetHeight:s}=n;return{top:i,right:o+r,bottom:i+s,left:o,width:r,height:s}}return{measure:e}}function lr(e){function t(i){return e*(i/100)}return{measure:t}}function ur(e,t,n,i,o,r,s){const c=[e].concat(i);let a,l,p=[],u=!1;function f(v){return o.measureSize(s.measure(v))}function b(v){if(!r)return;l=f(e),p=i.map(f);function d(h){for(const _ of h){if(u)return;const P=_.target===e,E=i.indexOf(_.target),C=P?l:p[E],k=f(P?e:i[E]);if($(k-C)>=.5){v.reInit(),t.emit("resize");break}}}a=new ResizeObserver(h=>{(Ke(r)||r(v,h))&&d(h)}),n.requestAnimationFrame(()=>{c.forEach(h=>a.observe(h))})}function m(){u=!0,a&&a.disconnect()}return{init:b,destroy:m}}function fr(e,t,n,i,o,r){let s=0,c=0,a=o,l=r,p=e.get(),u=0;function f(){const C=i.get()-e.get(),k=!a;let y=0;return k?(s=0,n.set(i),e.set(i),y=C):(n.set(e),s+=C/a,s*=l,p+=s,e.add(s),y=p-u),c=mt(y),u=p,E}function b(){const C=i.get()-t.get();return $(C)<.001}function m(){return a}function g(){return c}function v(){return s}function d(){return _(o)}function h(){return P(r)}function _(C){return a=C,E}function P(C){return l=C,E}const E={direction:g,duration:m,velocity:v,seek:f,settled:b,useBaseFriction:h,useBaseDuration:d,useFriction:P,useDuration:_};return E}function dr(e,t,n,i,o){const r=o.measure(10),s=o.measure(50),c=Le(.1,.99);let a=!1;function l(){return!(a||!e.reachedAny(n.get())||!e.reachedAny(t.get()))}function p(b){if(!l())return;const m=e.reachedMin(t.get())?"min":"max",g=$(e[m]-t.get()),v=n.get()-t.get(),d=c.constrain(g/s);n.subtract(v*d),!b&&$(v)<r&&(n.set(e.constrain(n.get())),i.useDuration(25).useBaseFriction())}function u(b){a=!b}return{shouldConstrain:l,constrain:p,toggleActive:u}}function mr(e,t,n,i,o){const r=Le(-t+e,0),s=u(),c=p(),a=f();function l(m,g){return Ae(m,g)<=1}function p(){const m=s[0],g=ie(s),v=s.lastIndexOf(m),d=s.indexOf(g)+1;return Le(v,d)}function u(){return n.map((m,g)=>{const{min:v,max:d}=r,h=r.constrain(m),_=!g,P=gt(n,g);return _?d:P||l(v,h)?v:l(d,h)?d:h}).map(m=>parseFloat(m.toFixed(3)))}function f(){if(t<=e+o)return[r.max];if(i==="keepSnaps")return s;const{min:m,max:g}=c;return s.slice(m,g)}return{snapsContained:a,scrollContainLimit:c}}function gr(e,t,n){const i=t[0],o=n?i-e:ie(t);return{limit:Le(o,i)}}function pr(e,t,n,i){const r=t.min+.1,s=t.max+.1,{reachedMin:c,reachedMax:a}=Le(r,s);function l(f){return f===1?a(n.get()):f===-1?c(n.get()):!1}function p(f){if(!l(f))return;const b=e*(f*-1);i.forEach(m=>m.add(b))}return{loop:p}}function hr(e){const{max:t,length:n}=e;function i(r){const s=r-t;return n?s/-n:0}return{get:i}}function vr(e,t,n,i,o){const{startEdge:r,endEdge:s}=e,{groupSlides:c}=o,a=u().map(t.measure),l=f(),p=b();function u(){return c(i).map(g=>ie(g)[s]-g[0][r]).map($)}function f(){return i.map(g=>n[r]-g[r]).map(g=>-$(g))}function b(){return c(l).map(g=>g[0]).map((g,v)=>g+a[v])}return{snaps:l,snapsAligned:p}}function br(e,t,n,i,o,r){const{groupSlides:s}=o,{min:c,max:a}=i,l=p();function p(){const f=s(r),b=!e||t==="keepSnaps";return n.length===1?[r]:b?f:f.slice(c,a).map((m,g,v)=>{const d=!g,h=gt(v,g);if(d){const _=ie(v[0])+1;return qt(_)}if(h){const _=je(r)-ie(v)[0]+1;return qt(_,ie(v)[0])}return m})}return{slideRegistry:l}}function yr(e,t,n,i,o){const{reachedAny:r,removeOffset:s,constrain:c}=i;function a(m){return m.concat().sort((g,v)=>$(g)-$(v))[0]}function l(m){const g=e?s(m):c(m),v=t.map((h,_)=>({diff:p(h-g,0),index:_})).sort((h,_)=>$(h.diff)-$(_.diff)),{index:d}=v[0];return{index:d,distance:g}}function p(m,g){const v=[m,m+n,m-n];if(!e)return m;if(!g)return a(v);const d=v.filter(h=>mt(h)===g);return d.length?a(d):ie(v)-n}function u(m,g){const v=t[m]-o.get(),d=p(v,g);return{index:m,distance:d}}function f(m,g){const v=o.get()+m,{index:d,distance:h}=l(v),_=!e&&r(v);if(!g||_)return{index:d,distance:m};const P=t[d]-h,E=m+p(P,0);return{index:d,distance:E}}return{byDistance:f,byIndex:u,shortcut:p}}function xr(e,t,n,i,o,r,s){function c(u){const f=u.distance,b=u.index!==t.get();r.add(f),f&&(i.duration()?e.start():(e.update(),e.render(1),e.update())),b&&(n.set(t.get()),t.set(u.index),s.emit("select"))}function a(u,f){const b=o.byDistance(u,f);c(b)}function l(u,f){const b=t.clone().set(u),m=o.byIndex(b.get(),f);c(m)}return{distance:a,index:l}}function _r(e,t,n,i,o,r,s,c){const a={passive:!0,capture:!0};let l=0;function p(b){if(!c)return;function m(g){if(new Date().getTime()-l>10)return;s.emit("slideFocusStart"),e.scrollLeft=0;const h=n.findIndex(_=>_.includes(g));dt(h)&&(o.useDuration(0),i.index(h,0),s.emit("slideFocus"))}r.add(document,"keydown",u,!1),t.forEach((g,v)=>{r.add(g,"focus",d=>{(Ke(c)||c(b,d))&&m(v)},a)})}function u(b){b.code==="Tab"&&(l=new Date().getTime())}return{init:p}}function Pe(e){let t=e;function n(){return t}function i(a){t=s(a)}function o(a){t+=s(a)}function r(a){t-=s(a)}function s(a){return dt(a)?a:a.get()}return{get:n,set:i,add:o,subtract:r}}function Kt(e,t){const n=e.scroll==="x"?s:c,i=t.style;let o=null,r=!1;function s(f){return`translate3d(${f}px,0px,0px)`}function c(f){return`translate3d(0px,${f}px,0px)`}function a(f){if(r)return;const b=nr(e.direction(f));b!==o&&(i.transform=n(b),o=b)}function l(f){r=!f}function p(){r||(i.transform="",t.getAttribute("style")||t.removeAttribute("style"))}return{clear:p,to:a,toggleActive:l}}function wr(e,t,n,i,o,r,s,c,a){const p=Fe(o),u=Fe(o).reverse(),f=d().concat(h());function b(k,y){return k.reduce((L,T)=>L-o[T],y)}function m(k,y){return k.reduce((L,T)=>b(L,y)>0?L.concat([T]):L,[])}function g(k){return r.map((y,L)=>({start:y-i[L]+.5+k,end:y+t-.5+k}))}function v(k,y,L){const T=g(y);return k.map(x=>{const M=L?0:-n,A=L?n:0,I=L?"end":"start",F=T[x][I];return{index:x,loopPoint:F,slideLocation:Pe(-1),translate:Kt(e,a[x]),target:()=>c.get()>F?M:A}})}function d(){const k=s[0],y=m(u,k);return v(y,n,!1)}function h(){const k=t-s[0]-1,y=m(p,k);return v(y,-n,!0)}function _(){return f.every(({index:k})=>{const y=p.filter(L=>L!==k);return b(y,t)<=.1})}function P(){f.forEach(k=>{const{target:y,translate:L,slideLocation:T}=k,x=y();x!==T.get()&&(L.to(x),T.set(x))})}function E(){f.forEach(k=>k.translate.clear())}return{canLoop:_,clear:E,loop:P,loopPoints:f}}function Sr(e,t,n){let i,o=!1;function r(a){if(!n)return;function l(p){for(const u of p)if(u.type==="childList"){a.reInit(),t.emit("slidesChanged");break}}i=new MutationObserver(p=>{o||(Ke(n)||n(a,p))&&l(p)}),i.observe(e,{childList:!0})}function s(){i&&i.disconnect(),o=!0}return{init:r,destroy:s}}function Er(e,t,n,i){const o={};let r=null,s=null,c,a=!1;function l(){c=new IntersectionObserver(m=>{a||(m.forEach(g=>{const v=t.indexOf(g.target);o[v]=g}),r=null,s=null,n.emit("slidesInView"))},{root:e.parentElement,threshold:i}),t.forEach(m=>c.observe(m))}function p(){c&&c.disconnect(),a=!0}function u(m){return qe(o).reduce((g,v)=>{const d=parseInt(v),{isIntersecting:h}=o[d];return(m&&h||!m&&!h)&&g.push(d),g},[])}function f(m=!0){if(m&&r)return r;if(!m&&s)return s;const g=u(m);return m&&(r=g),m||(s=g),g}return{init:l,destroy:p,get:f}}function Lr(e,t,n,i,o,r){const{measureSize:s,startEdge:c,endEdge:a}=e,l=n[0]&&o,p=m(),u=g(),f=n.map(s),b=v();function m(){if(!l)return 0;const h=n[0];return $(t[c]-h[c])}function g(){if(!l)return 0;const h=r.getComputedStyle(ie(i));return parseFloat(h.getPropertyValue(`margin-${a}`))}function v(){return n.map((h,_,P)=>{const E=!_,C=gt(P,_);return E?f[_]+p:C?f[_]+u:P[_+1][c]-h[c]}).map($)}return{slideSizes:f,slideSizesWithGaps:b,startGap:p,endGap:u}}function Cr(e,t,n,i,o,r,s,c,a){const{startEdge:l,endEdge:p,direction:u}=e,f=dt(n);function b(d,h){return Fe(d).filter(_=>_%h===0).map(_=>d.slice(_,_+h))}function m(d){return d.length?Fe(d).reduce((h,_,P)=>{const E=ie(h)||0,C=E===0,k=_===je(d),y=o[l]-r[E][l],L=o[l]-r[_][p],T=!i&&C?u(s):0,x=!i&&k?u(c):0,M=$(L-x-(y+T));return P&&M>t+a&&h.push(_),k&&h.push(d.length),h},[]).map((h,_,P)=>{const E=Math.max(P[_-1]||0);return d.slice(E,h)}):[]}function g(d){return f?b(d,n):m(d)}return{groupSlides:g}}function Tr(e,t,n,i,o,r,s){const{align:c,axis:a,direction:l,startIndex:p,loop:u,duration:f,dragFree:b,dragThreshold:m,inViewThreshold:g,slidesToScroll:v,skipSnaps:d,containScroll:h,watchResize:_,watchSlides:P,watchDrag:E,watchFocus:C}=r,k=2,y=cr(),L=y.measure(t),T=n.map(y.measure),x=or(a,l),M=x.measureSize(L),A=lr(M),I=rr(c,M),F=!u&&!!h,z=u||!!h,{slideSizes:j,slideSizesWithGaps:R,startGap:Q,endGap:G}=Lr(x,L,T,n,z,o),B=Cr(x,M,v,u,L,T,Q,G,k),{snaps:le,snapsAligned:te}=vr(x,I,L,T,B),ee=-ie(le)+ie(R),{snapsContained:ge,scrollContainLimit:Ce}=mr(M,ee,te,h,k),J=F?ge:te,{limit:W}=gr(ee,J,u),pe=Qt(je(J),p,u),ne=pe.clone(),q=Fe(n),S=({dragHandler:Te,scrollBody:We,scrollBounds:Ye,options:{loop:Be}})=>{Be||Ye.constrain(Te.pointerDown()),We.seek()},D=({scrollBody:Te,translate:We,location:Ye,offsetLocation:Be,previousLocation:Wt,scrollLooper:Yt,slideLooper:Zt,dragHandler:en,animation:tn,eventHandler:yt,scrollBounds:nn,options:{loop:xt}},_t)=>{const wt=Te.settled(),rn=!nn.shouldConstrain(),St=xt?wt:wt&&rn,Et=St&&!en.pointerDown();Et&&tn.stop();const sn=Ye.get()*_t+Wt.get()*(1-_t);Be.set(sn),xt&&(Yt.loop(Te.direction()),Zt.loop()),We.to(Be.get()),Et&&yt.emit("settle"),St||yt.emit("scroll")},H=sr(i,o,()=>S(Xe),Te=>D(Xe,Te)),Y=.68,ue=J[pe.get()],he=Pe(ue),ye=Pe(ue),be=Pe(ue),xe=Pe(ue),Ie=fr(he,be,ye,xe,f,Y),Ue=yr(u,J,ee,W,xe),Je=xr(H,pe,ne,Ie,Ue,xe,s),ht=hr(W),vt=$e(),Jt=Er(t,n,s,g),{slideRegistry:bt}=br(F,h,J,Ce,B,q),Xt=_r(e,n,bt,Je,Ie,vt,s,C),Xe={ownerDocument:i,ownerWindow:o,eventHandler:s,containerRect:L,slideRects:T,animation:H,axis:x,dragHandler:ir(x,e,i,o,xe,ar(x,o),he,H,Je,Ie,Ue,pe,s,A,b,m,d,Y,E),eventStore:vt,percentOfView:A,index:pe,indexPrevious:ne,limit:W,location:he,offsetLocation:be,previousLocation:ye,options:r,resizeHandler:ur(t,s,o,n,x,_,y),scrollBody:Ie,scrollBounds:dr(W,be,xe,Ie,A),scrollLooper:pr(ee,W,be,[he,be,ye,xe]),scrollProgress:ht,scrollSnapList:J.map(ht.get),scrollSnaps:J,scrollTarget:Ue,scrollTo:Je,slideLooper:wr(x,M,ee,j,R,le,J,be,n),slideFocus:Xt,slidesHandler:Sr(t,s,P),slidesInView:Jt,slideIndexes:q,slideRegistry:bt,slidesToScroll:B,target:xe,translate:Kt(x,t)};return Xe}function kr(){let e={},t;function n(l){t=l}function i(l){return e[l]||[]}function o(l){return i(l).forEach(p=>p(t,l)),a}function r(l,p){return e[l]=i(l).concat([p]),a}function s(l,p){return e[l]=i(l).filter(u=>u!==p),a}function c(){e={}}const a={init:n,emit:o,off:s,on:r,clear:c};return a}const Nr={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function Ir(e){function t(r,s){return Ht(r,s||{})}function n(r){const s=r.breakpoints||{},c=qe(s).filter(a=>e.matchMedia(a).matches).map(a=>s[a]).reduce((a,l)=>t(a,l),{});return t(r,c)}function i(r){return r.map(s=>qe(s.breakpoints||{})).reduce((s,c)=>s.concat(c),[]).map(e.matchMedia)}return{mergeOptions:t,optionsAtMedia:n,optionsMediaQueries:i}}function Mr(e){let t=[];function n(r,s){return t=s.filter(({options:c})=>e.optionsAtMedia(c).active!==!1),t.forEach(c=>c.init(r,e)),s.reduce((c,a)=>Object.assign(c,{[a.name]:a}),{})}function i(){t=t.filter(r=>r.destroy())}return{init:n,destroy:i}}function Ge(e,t,n){const i=e.ownerDocument,o=i.defaultView,r=Ir(o),s=Mr(r),c=$e(),a=kr(),{mergeOptions:l,optionsAtMedia:p,optionsMediaQueries:u}=r,{on:f,off:b,emit:m}=a,g=x;let v=!1,d,h=l(Nr,Ge.globalOptions),_=l(h),P=[],E,C,k;function y(){const{container:q,slides:S}=_;C=(ct(q)?e.querySelector(q):q)||e.children[0];const H=ct(S)?C.querySelectorAll(S):S;k=[].slice.call(H||C.children)}function L(q){const S=Tr(e,C,k,i,o,q,a);if(q.loop&&!S.slideLooper.canLoop()){const D=Object.assign({},q,{loop:!1});return L(D)}return S}function T(q,S){v||(h=l(h,q),_=p(h),P=S||P,y(),d=L(_),u([h,...P.map(({options:D})=>D)]).forEach(D=>c.add(D,"change",x)),_.active&&(d.translate.to(d.location.get()),d.animation.init(),d.slidesInView.init(),d.slideFocus.init(ne),d.eventHandler.init(ne),d.resizeHandler.init(ne),d.slidesHandler.init(ne),d.options.loop&&d.slideLooper.loop(),C.offsetParent&&k.length&&d.dragHandler.init(ne),E=s.init(ne,P)))}function x(q,S){const D=B();M(),T(l({startIndex:D},q),S),a.emit("reInit")}function M(){d.dragHandler.destroy(),d.eventStore.clear(),d.translate.clear(),d.slideLooper.clear(),d.resizeHandler.destroy(),d.slidesHandler.destroy(),d.slidesInView.destroy(),d.animation.destroy(),s.destroy(),c.clear()}function A(){v||(v=!0,c.clear(),M(),a.emit("destroy"),a.clear())}function I(q,S,D){!_.active||v||(d.scrollBody.useBaseFriction().useDuration(S===!0?0:_.duration),d.scrollTo.index(q,D||0))}function F(q){const S=d.index.add(1).get();I(S,q,-1)}function z(q){const S=d.index.add(-1).get();I(S,q,1)}function j(){return d.index.add(1).get()!==B()}function R(){return d.index.add(-1).get()!==B()}function Q(){return d.scrollSnapList}function G(){return d.scrollProgress.get(d.offsetLocation.get())}function B(){return d.index.get()}function le(){return d.indexPrevious.get()}function te(){return d.slidesInView.get()}function ee(){return d.slidesInView.get(!1)}function ge(){return E}function Ce(){return d}function J(){return e}function W(){return C}function pe(){return k}const ne={canScrollNext:j,canScrollPrev:R,containerNode:W,internalEngine:Ce,destroy:A,off:b,on:f,emit:m,plugins:ge,previousScrollSnap:le,reInit:g,rootNode:J,scrollNext:F,scrollPrev:z,scrollProgress:G,scrollSnapList:Q,scrollTo:I,selectedScrollSnap:B,slideNodes:pe,slidesInView:te,slidesNotInView:ee};return T(t,n),setTimeout(()=>a.emit("init"),0),ne}Ge.globalOptions=void 0;function pt(e,t={options:{},plugins:[]}){let n=t,i;return Zn()&&(Ge.globalOptions=pt.globalOptions,i=Ge(e,n.options,n.plugins),i.on("init",()=>e.dispatchEvent(new CustomEvent("emblaInit",{detail:i})))),{destroy:()=>{i&&i.destroy()},update:o=>{const r=!ft(n.options,o.options),s=!er(n.plugins,o.plugins);!r&&!s||(n=o,i&&i.reInit(n.options,n.plugins))}}}pt.globalOptions=void 0;var Pr=V('<div data-slot="carousel-content" class="overflow-hidden"><div><!></div></div>');function Ar(e,t){ae(t,!0);let n=O(t,"ref",15,null),i=ve(t,["$$slots","$$events","$$legacy","ref","class","children"]);const o=Qe("<Carousel.Content/>");var r=Pr(),s=X(r);Se(s,a=>({class:a,"data-embla-container":"",...i}),[()=>Ee("flex",o.orientation==="horizontal"?"-ml-4":"-mt-4 flex-col",t.class)]);var c=X(s);ke(c,()=>t.children??Ne),U(s),De(s,a=>n(a),()=>n()),U(r),Bn(r,(a,l)=>pt?.(a,l),()=>({options:{container:"[data-embla-container]",slides:"[data-embla-slide]",...o.options,axis:o.orientation==="horizontal"?"x":"y"},plugins:o.plugins})),Vt("emblaInit",r,function(...a){o.onInit?.apply(this,a)}),N(e,r),ce()}var zr=V("<div><!></div>");function Dr(e,t){ae(t,!0);let n=O(t,"ref",15,null),i=ve(t,["$$slots","$$events","$$legacy","ref","class","children"]);const o=Qe("<Carousel.Item/>");var r=zr();Se(r,c=>({"data-slot":"carousel-item",role:"group","aria-roledescription":"slide",class:c,"data-embla-slide":"",...i}),[()=>Ee("min-w-0 shrink-0 grow-0 basis-full",o.orientation==="horizontal"?"pl-4":"pt-4",t.class)]);var s=X(r);ke(s,()=>t.children??Ne),U(r),De(r,c=>n(c),()=>n()),N(e,r),ce()}/**
 * @license @lucide/svelte v0.515.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 */const Or={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var Fr=In("<svg><!><!></svg>");function Ut(e,t){ae(t,!0);const n=O(t,"color",3,"currentColor"),i=O(t,"size",3,24),o=O(t,"strokeWidth",3,2),r=O(t,"absoluteStrokeWidth",3,!1),s=O(t,"iconNode",19,()=>[]),c=ve(t,["$$slots","$$events","$$legacy","name","color","size","strokeWidth","absoluteStrokeWidth","iconNode","children"]);var a=Fr();Se(a,u=>({...Or,...c,width:i(),height:i(),stroke:n(),"stroke-width":u,class:["lucide-icon lucide",t.name&&`lucide-${t.name}`,t.class]}),[()=>r()?Number(o())*24/Number(i()):o()]);var l=X(a);ot(l,17,s,it,(u,f)=>{var b=ze(()=>Mn(w(f),2));let m=()=>w(b)[0],g=()=>w(b)[1];var v=oe(),d=Z(v);jn(d,m,!0,(h,_)=>{Se(h,()=>({...g()}))}),N(u,v)});var p=de(l);ke(p,()=>t.children??Ne),U(a),N(e,a),ce()}function qr(e,t){ae(t,!0);/**
 * @license @lucide/svelte v0.515.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let n=ve(t,["$$slots","$$events","$$legacy"]);const i=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];Ut(e,He({name:"arrow-left"},()=>n,{get iconNode(){return i},children:(o,r)=>{var s=oe(),c=Z(s);ke(c,()=>t.children??Ne),N(o,s)},$$slots:{default:!0}})),ce()}var $r=V('<!> <span class="sr-only">Previous slide</span>',1);function jr(e,t){ae(t,!0);let n=O(t,"ref",15,null),i=O(t,"variant",3,"outline"),o=O(t,"size",3,"icon"),r=ve(t,["$$slots","$$events","$$legacy","ref","class","variant","size"]);const s=Qe("<Carousel.Previous/>");{let c=ze(()=>!s.canScrollPrev),a=ze(()=>Ee("absolute size-8 rounded-full",s.orientation==="horizontal"?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",t.class));Oe(e,He({"data-slot":"carousel-previous",get variant(){return i()},get size(){return o()},get"aria-disabled"(){return w(c)},get class(){return w(a)},get onclick(){return s.scrollPrev},get onkeydown(){return s.handleKeyDown}},()=>r,{get ref(){return n()},set ref(l){n(l)},children:(l,p)=>{var u=$r(),f=Z(u);qr(f,{class:"size-4"}),we(2),N(l,u)},$$slots:{default:!0}}))}ce()}function Br(e,t){ae(t,!0);/**
 * @license @lucide/svelte v0.515.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let n=ve(t,["$$slots","$$events","$$legacy"]);const i=[["path",{d:"M5 12h14"}],["path",{d:"m12 5 7 7-7 7"}]];Ut(e,He({name:"arrow-right"},()=>n,{get iconNode(){return i},children:(o,r)=>{var s=oe(),c=Z(s);ke(c,()=>t.children??Ne),N(o,s)},$$slots:{default:!0}})),ce()}var Vr=V('<!> <span class="sr-only">Next slide</span>',1);function Rr(e,t){ae(t,!0);let n=O(t,"ref",15,null),i=O(t,"variant",3,"outline"),o=O(t,"size",3,"icon"),r=ve(t,["$$slots","$$events","$$legacy","ref","class","variant","size"]);const s=Qe("<Carousel.Next/>");{let c=ze(()=>!s.canScrollNext),a=ze(()=>Ee("absolute size-8 rounded-full",s.orientation==="horizontal"?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",t.class));Oe(e,He({"data-slot":"carousel-next",get variant(){return i()},get size(){return o()},get"aria-disabled"(){return w(c)},get class(){return w(a)},get onclick(){return s.scrollNext},get onkeydown(){return s.handleKeyDown}},()=>r,{get ref(){return n()},set ref(l){n(l)},children:(l,p)=>{var u=Vr(),f=Z(u);Br(f,{class:"size-4"}),we(2),N(l,u)},$$slots:{default:!0}}))}ce()}var Gr=V('<img alt="Växtbild" class="quiz-carousel-image svelte-1r6r13m"/>'),Hr=V("<!> <!> <!>",1),Qr=V('<div class="quiz-carousel-wrapper svelte-1r6r13m"><!></div>'),Kr=V('<div class="quiz-image-placeholder svelte-1r6r13m"><span class="svelte-1r6r13m">Laddar bild...</span></div>'),Ur=V('<h3 class="svelte-1r6r13m">Vad är det svenska namnet för växten på bilden?</h3>'),Jr=V('<h3 class="svelte-1r6r13m">Vad är det latinska namnet för <span> </span>?</h3>'),Xr=V('<h3 class="svelte-1r6r13m">Vad heter växten på bilderna? <span class="quiz-question-desc svelte-1r6r13m">Ange både svenska och latinska namnet.</span></h3>'),Wr=V('<div class="answer-grid svelte-1r6r13m"></div>'),Yr=V('<form class="freetext-form svelte-1r6r13m"><!> <!> <!></form>'),Zr=V('<div class="quiz-question svelte-1r6r13m"><!> <!> <div class="quiz-divider svelte-1r6r13m"></div> <!></div>');function es(e,t){ae(t,!1);let n=O(t,"question",8),i=O(t,"options",8),o=O(t,"mode",8),r=O(t,"loadingImages",8,!1);const s=on();let c=_e(""),a=_e("");function l(E){s("answer",E)}function p(E){E.preventDefault(),s("answer",JSON.stringify({swedish:w(c),latin:w(a)})),me(c,""),me(a,""),setTimeout(()=>{document.querySelector(".freetext-input.swedish")?.focus()},0)}jt(()=>{o()?.id==="imageToNameFreetext"&&document.querySelector(".freetext-input.swedish")?.focus()});let u=_e("");rt(()=>(re(o()),re(n()),w(u)),()=>{const E=o()?.id==="imageToNameFreetext"&&n()?`${n().swedishName}|${n().latinName}`:"";E&&E!==w(u)&&(me(u,E),setTimeout(()=>{document.querySelector(".freetext-input.swedish")?.focus()},0))}),Rt(),$t();var f=Zr(),b=X(f);{var m=E=>{var C=oe(),k=Z(C);{var y=T=>{var x=Qr(),M=X(x);Wn(M,{opts:{align:"center",loop:!0},children:(A,I)=>{var F=Hr(),z=Z(F);Ar(z,{class:"-ml-4",children:(Q,G)=>{var B=oe(),le=Z(B);ot(le,1,()=>(re(n()),K(()=>n().images)),it,(te,ee)=>{Dr(te,{class:"carousel-peek",children:(ge,Ce)=>{var J=Gr();Re(()=>Gt(J,"src",w(ee))),N(ge,J)},$$slots:{default:!0}})}),N(Q,B)},$$slots:{default:!0}});var j=de(z,2);jr(j,{class:"carousel-nav-btn prev","aria-label":"Föregående bild"});var R=de(j,2);Rr(R,{class:"carousel-nav-btn next","aria-label":"Nästa bild"}),N(A,F)},$$slots:{default:!0}}),U(x),N(T,x)},L=T=>{var x=oe(),M=Z(x);{var A=I=>{var F=Kr();N(I,F)};se(M,I=>{r()&&I(A)},!0)}N(T,x)};se(k,T=>{re(n()),K(()=>n()?.images&&n().images.length>0)?T(y):T(L,!1)})}N(E,C)};se(b,E=>{re(o()),K(()=>o()?.id==="image-to-swedish"||o()?.id==="imageToNameFreetext")&&E(m)})}var g=de(b,2);{var v=E=>{var C=Ur();N(E,C)},d=E=>{var C=oe(),k=Z(C);{var y=T=>{var x=Jr(),M=de(X(x)),A=X(M,!0);U(M),we(),U(x),Re(()=>Lt(A,(re(n()),K(()=>n()?.swedishName)))),N(T,x)},L=T=>{var x=oe(),M=Z(x);{var A=I=>{var F=Xr();N(I,F)};se(M,I=>{re(o()),K(()=>o()?.id==="imageToNameFreetext")&&I(A)},!0)}N(T,x)};se(k,T=>{re(o()),K(()=>o()?.id==="swedish-to-latin")?T(y):T(L,!1)},!0)}N(E,C)};se(g,E=>{re(o()),K(()=>o()?.id==="image-to-swedish")?E(v):E(d,!1)})}var h=de(g,4);{var _=E=>{var C=Wr();ot(C,5,i,it,(k,y)=>{Oe(k,{type:"button",class:"mode-toggle answer-btn",onclick:()=>l(w(y)),children:(L,T)=>{we();var x=st();Re(()=>Lt(x,w(y))),N(L,x)},$$slots:{default:!0}})}),U(C),N(E,C)},P=E=>{var C=oe(),k=Z(C);{var y=L=>{var T=Yr(),x=X(T);zt(x,{type:"text",placeholder:"Svenskt namn",required:!0,autocomplete:"off",class:"freetext-input swedish",get value(){return w(c)},set value(I){me(c,I)},$$legacy:!0});var M=de(x,2);zt(M,{type:"text",placeholder:"Latinskt namn",required:!0,autocomplete:"off",class:"freetext-input",get value(){return w(a)},set value(I){me(a,I)},$$legacy:!0});var A=de(M,2);Oe(A,{type:"submit",class:"mode-toggle",style:"width:100%;",children:(I,F)=>{we();var z=st("Svara");N(I,z)},$$slots:{default:!0}}),U(T),Vt("submit",T,Rn(p)),N(L,T)};se(k,L=>{re(o()),K(()=>o()?.id==="imageToNameFreetext")&&L(y)},!0)}N(E,C)};se(h,E=>{re(o()),K(()=>o()?.id==="image-to-swedish"||o()?.id==="swedish-to-latin")?E(_):E(P,!1)})}U(f),N(e,f),ce()}const ts=()=>{const e=On;return{page:{subscribe:e.page.subscribe},navigating:{subscribe:e.navigating.subscribe},updated:e.updated}},ns={subscribe(e){return ts().page.subscribe(e)}};var rs=V('<p class="quiz-loading">Laddar frågor...</p>'),ss=V('<div style="display: flex; justify-content: center; margin-top: 2em;"><!></div>'),os=V('<p class="quiz-loading">Inga frågor tillgängliga.</p>'),is=V('<main><header class="quiz-header svelte-16kblpf"><div class="quiz-header__left svelte-16kblpf"><!></div> <div class="quiz-header__center svelte-16kblpf"><div style="width:100%;display:flex;justify-content:center;"><!></div></div> <div class="quiz-header__right svelte-16kblpf"></div></header> <!></main>');function vs(e,t){ae(t,!1);const n=()=>An(Ve,"$quiz",i),[i,o]=Pn(),r=_e();let s=_e(!0),c=_e(void 0);async function a(y){let L=y.latinName.replace(/"[^"]*"|'[^']*'/g,"").replace(/\s+sp\.?$/i,"").trim();y.latinName.trim().toLowerCase()==="antirrhinum majus"&&(L=L.split(" ")[0]);try{const x=await(await fetch(`https://api.inaturalist.org/v1/taxa?q=${encodeURIComponent(L)}`)).json();if(!x.results||x.results.length===0)return[];const M=x.results[0].id,I=await(await fetch(`https://api.inaturalist.org/v1/taxa/${M}`)).json();let F=[];I.results&&I.results.length>0&&I.results[0].taxon_photos&&(F=I.results[0].taxon_photos.map(j=>j.photo?.medium_url||j.photo?.url).filter(Boolean));let z=Array.from(new Set(F));if(z.length<3)try{const R=await(await fetch(`https://api.inaturalist.org/v1/observations?taxon_name=${encodeURIComponent(L)}&photos=true`)).json();if(R.results&&R.results.length>0){let Q=R.results.flatMap(G=>(G.photos||[]).map(B=>B.medium_url||B.url)).filter(Boolean);for(let G=Q.length-1;G>0;G--){const B=Math.floor(Math.random()*(G+1));[Q[G],Q[B]]=[Q[B],Q[G]]}for(const G of Q){if(z.length>=3)break;z.includes(G)||z.push(G)}}}catch{}if(z.length>3){for(let j=z.length-1;j>0;j--){const R=Math.floor(Math.random()*(j+1));[z[j],z[R]]=[z[R],z[j]]}return z.slice(0,3)}else return z.length>0?z:[]}catch{return[]}}async function l(y){const L=nt.find(M=>M.id===y)||nt[0];me(c,L),w(c).id,me(s,!0);let x=await(await fetch(Fn("/plants.json"))).json();w(c)&&(w(c).id==="image-to-swedish"||w(c).id==="imageToNameFreetext")&&(x=await Promise.all(x.map(async M=>{const A=await a(M);return{...M,images:A}}))),w(c)&&Ve.start(x,w(c)),me(s,!1)}jt(()=>{const L=an(ns).url.searchParams.get("mode")||nt[0].id;return l(L),Ve.subscribe(x=>{x.finished&&Mt(Pt("/result"))})});function p(y){Ve.answer(y)}function u(y){return!w(r).questions.length||!w(c)?[]:w(c).getOptions(w(r).questions,y)}let f=_e(!1);rt(()=>n(),()=>{me(r,n())}),rt(()=>(w(s),w(c)),()=>{me(f,w(s)&&(w(c)?.id==="image-to-swedish"||w(c)?.id==="imageToNameFreetext"))}),Rt(),$t();var b=is(),m=X(b),g=X(m),v=X(g);Oe(v,{onclick:()=>Mt(Pt("/")),class:"home-btn",children:(y,L)=>{we();var T=st("Hem");N(y,T)},$$slots:{default:!0}}),U(g);var d=de(g,2),h=X(d);let _;var P=X(h);{let y=Nt(()=>(w(r),K(()=>w(r).current+1)));Dn(P,{get current(){return w(y)},get total(){return w(r),K(()=>w(r).questions.length)}})}U(h),U(d),we(2),U(m);var E=de(m,2);{var C=y=>{var L=rs();N(y,L)},k=y=>{var L=oe(),T=Z(L);{var x=A=>{var I=ss(),F=X(I);qn(F,{style:"max-width: 480px; width: 100%; box-shadow: 0 2px 16px #0001;",children:(z,j)=>{$n(z,{children:(R,Q)=>{var G=oe(),B=Z(G);{var le=te=>{{let ee=Nt(()=>(w(r),K(()=>u(w(r).current))));es(te,{get question(){return w(r),K(()=>w(r).questions[w(r).current])},get options(){return w(ee)},get mode(){return w(c)},get loadingImages(){return w(f)},$$events:{answer:ge=>p(ge.detail)}})}};se(B,te=>{w(c)&&te(le)})}N(R,G)},$$slots:{default:!0}})},$$slots:{default:!0}}),U(I),N(A,I)},M=A=>{var I=os();N(A,I)};se(T,A=>{w(r),K(()=>w(r).questions.length&&!w(r).finished)?A(x):A(M,!1)},!0)}N(y,L)};se(E,y=>{w(s)?y(C):y(k,!1)})}U(b),Re(y=>{Gt(h,"aria-hidden",(w(s),w(r),K(()=>w(s)||!w(r).questions.length||w(r).finished))),_=zn(h,1,"svelte-16kblpf",null,_,y)},[()=>({"progress-inactive":w(s)||!w(r).questions.length||w(r).finished})]),N(e,b),ce(),o()}export{vs as component};
