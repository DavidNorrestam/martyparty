import"../chunks/DsnmJJEf.js";import{i as be}from"../chunks/s4CSQMkU.js";import{p as we,f as w,y as r,g,a,b as ye,e as l,s as Q,m as W,h as e,c as d,r as i,n as ce,d as k,z as ne,A as Te,t as b,B as te,C as Ve}from"../chunks/Bw5Y5IGr.js";import{o as De,s as m}from"../chunks/Z9sIMUL2.js";import{p as _e,i as _,b as Ie,s as Se,a as Je}from"../chunks/BpWPLi4d.js";import{B as Oe,r as Qe,e as he,C as We,a as Ee,i as ge}from"../chunks/CUDcUokz.js";import{s as ie}from"../chunks/0tY7R5CY.js";import{q as pe}from"../chunks/SK8R3z3d.js";import{g as Ge}from"../chunks/DQ97G9YE.js";var Ke=w('<canvas class="absolute left-1/2 top-0 -translate-x-1/2 pointer-events-none z-10 w-80 h-45 max-w-full max-h-[40vw]" width="320" height="180" aria-hidden="true"></canvas>'),Le=w('<div class="text-xl text-success mt-5 font-bold tracking-wide animate-[var(--animate-pop)]">ðŸŽ‰ Perfekt! Alla rÃ¤tt! ðŸŽ‰</div> <!>',1),Ue=w('<div class="text-center mt-8 relative z-[1]"><h2 class="text-3xl mb-5">Resultat</h2> <div class="flex justify-center items-center mb-5 relative z-[2]"><svg width="120" height="120" viewBox="0 0 120 120"><circle class="opacity-40" cx="60" cy="60" r="52" stroke="rgb(229, 231, 235)" stroke-width="12" fill="none"></circle><circle class="-rotate-90 origin-center transition-[stroke-dashoffset] duration-1000 ease-[cubic-bezier(0.4,2,0.6,1)]" cx="60" cy="60" r="52" stroke="rgb(34, 197, 94)" stroke-width="12" fill="none" stroke-linecap="round"></circle><text x="60" y="68" text-anchor="middle" font-size="2.2em" fill="#222"> </text><text x="60" y="92" text-anchor="middle" font-size="1em" fill="#888"> </text></svg></div> <p>Du fick <b> </b> av <b> </b> rÃ¤tt!</p> <!></div>');function Xe(se,E){we(E,!1);let f=_e(E,"score",8),z=_e(E,"total",8),re=W(!1),j=W(0),C=W(null);De(()=>{Q(j,Math.round(f()/z()*100)),f()===z()&&(Q(re,!0),setTimeout(()=>{e(C)&&v(e(C))},300))});function v(F){const h=F.getContext("2d");if(!h)return;const D=F.width=320,Y=F.height=180,N=80,I=[],$=["#FFD700","#FF69B4","#00CFFF","#7CFC00","#FF6347","#FFB347"];for(let x=0;x<N;x++)I.push({x:Math.random()*D,y:Math.random()*Y/2,r:4+Math.random()*4,c:$[Math.floor(Math.random()*$.length)],vx:-2+Math.random()*4,vy:2+Math.random()*3});let S=0;function P(){if(h){h.clearRect(0,0,D,Y);for(const x of I)h.beginPath(),h.arc(x.x,x.y,x.r,0,2*Math.PI),h.fillStyle=x.c,h.fill(),x.x+=x.vx,x.y+=x.vy,x.vy+=.05;S++,S<60&&requestAnimationFrame(P)}}P()}be();var M=Ue(),G=l(d(M),2),K=d(G),A=l(d(K));ie(A,"stroke-dasharray",r(()=>2*Math.PI*52));var H=l(A),ae=d(H,!0);i(H);var L=l(H),le=d(L);i(L),i(K),i(G);var U=l(G,2),p=l(d(U)),T=d(p,!0);i(p);var V=l(p,2),t=d(V,!0);i(V),ce(),i(U);var X=l(U,2);{var oe=F=>{var h=Le(),D=l(k(h),2);{var Y=N=>{var I=Ke();Ie(I,$=>Q(C,$),()=>e(C)),a(N,I)};_(D,N=>{e(re)&&N(Y)})}a(F,h)};_(X,F=>{f()===z()&&F(oe)})}i(M),g(()=>{ie(A,"stroke-dashoffset",(e(j),r(()=>2*Math.PI*52*(1-e(j)/100)))),m(ae,f()),m(le,`/ ${z()??""}`),m(T,f()),m(t,z())}),a(se,M),ye()}var Ye=w("Vad Ã¤r det latinska namnet fÃ¶r <span> </span>?",1),Ze=w('<img alt="VÃ¤xtbild" class="max-w-[120px] max-h-[140px] w-full h-[140px] object-cover rounded-lg shadow-sm bg-muted block"/>'),et=w('<div class="flex gap-4 my-2 flex-wrap justify-center"></div>'),tt=w("<div><b>Ditt svar:</b> <!></div>"),rt=w('<div class="flex items-center gap-2 mb-2 text-lg"><span class="text-2xl leading-none align-middle select-none"> </span> <b> </b></div> <div><b>FrÃ¥ga:</b> <!></div> <!> <!> <div><b>RÃ¤tt svar:</b> <!></div>',1),at=w('<li style="margin-bottom:1.5em;"><div class="w-full max-w-[420px] max-md:max-w-full"><!></div></li>'),ot=w('<ul style="width:100%;max-width:420px;padding:0;list-style:none;"></ul>'),it=w('<!> <main><div class="max-w-[420px] mx-auto bg-card rounded-[18px] shadow-lg p-10 flex flex-col items-center justify-center min-h-[60vh] max-md:p-4 max-md:min-h-[70vh]"><!> <hr class="w-full max-w-[420px] my-10 border-t-2 border-border"/> <!></div></main>',1);function ut(se,E){we(E,!1);const f=()=>Je(pe,"$quiz",z),[z,re]=Se(),j=W(),C=W(),v=W();function M(p){try{return JSON.parse(p)}catch{return null}}function G(){pe.reset(),Ge(Qe("/"))}ne(()=>f(),()=>{Q(j,f().score)}),ne(()=>f(),()=>{Q(C,f().questions.length)}),ne(()=>f(),()=>{Q(v,f().mode)}),Te(),be();var K=it(),A=k(K);Oe(A,{onclick:G,class:"fixed bottom-8 left-8 z-50 rounded-full px-6 py-3 text-lg shadow-md bg-card text-foreground border border-border transition-all hover:bg-muted hover:shadow-lg max-md:bottom-4 max-md:left-4 max-md:px-5 max-md:py-2 max-md:text-base","aria-label":"Hem",children:(p,T)=>{ce();var V=b("Hem");a(p,V)},$$slots:{default:!0}});var H=l(A,2),ae=d(H),L=d(ae);Xe(L,{get score(){return e(j)},get total(){return e(C)}});var le=l(L,4);{var U=p=>{var T=ot();he(T,5,()=>(f(),r(()=>f().answers)),ge,(V,t)=>{var X=at(),oe=d(X),F=d(oe);{let h=Ve(()=>(e(t),r(()=>e(t).correct?"border-2 border-success bg-success/10":"border-2 border-destructive bg-destructive/10")));We(F,{get class(){return e(h)},children:(D,Y)=>{Ee(D,{children:(N,I)=>{var $=rt(),S=k($),P=d(S),x=d(P,!0);i(P);var me=l(P,2),Fe=d(me,!0);i(me),i(S);var ve=l(S,2),ke=l(d(ve),2);{var qe=o=>{var n=b("Vad Ã¤r det svenska namnet fÃ¶r vÃ¤xten pÃ¥ bilden?");a(o,n)},ze=o=>{var n=te(),B=k(n);{var R=s=>{var c=Ye(),J=l(k(c)),Z=d(J,!0);i(J),ce(),g(()=>m(Z,(e(t),r(()=>e(t).question.swedishName)))),a(s,c)},q=s=>{var c=te(),J=k(c);{var Z=u=>{var y=b("Vad heter vÃ¤xten pÃ¥ bilderna? (Svenska och latin)");a(u,y)},de=u=>{var y=b();g(()=>m(y,`${e(t),r(()=>e(t).question.swedishName)??""} (${e(t),r(()=>e(t).question.latinName)??""})`)),a(u,y)};_(J,u=>{e(v),r(()=>e(v).id==="imageToNameFreetext")?u(Z):u(de,!1)},!0)}a(s,c)};_(B,s=>{e(v),r(()=>e(v).id==="swedish-to-latin")?s(R):s(q,!1)},!0)}a(o,n)};_(ke,o=>{e(v),r(()=>e(v).id==="image-to-swedish")?o(qe):o(ze,!1)})}i(ve);var fe=l(ve,2);{var Ce=o=>{var n=et();he(n,5,()=>(e(t),r(()=>e(t).question.images)),ge,(B,R)=>{var q=Ze();g(()=>ie(q,"src",e(R))),a(B,q)}),i(n),a(o,n)};_(fe,o=>{e(v),e(t),r(()=>(e(v).id==="image-to-swedish"||e(v).id==="imageToNameFreetext")&&e(t).question.images&&e(t).question.images.length)&&o(Ce)})}var xe=l(fe,2);{var Me=o=>{var n=tt(),B=l(d(n),2);{var R=s=>{var c=te(),J=k(c);{var Z=u=>{var y=te(),Be=k(y);{var Re=O=>{var ee=b();g((Ae,He)=>m(ee,`${Ae??""} / ${He??""}`),[()=>(e(t),r(()=>M(e(t).answer)?.swedish)),()=>(e(t),r(()=>M(e(t).answer)?.latin))]),a(O,ee)},je=O=>{var ee=b();g(()=>m(ee,(e(t),r(()=>e(t).answer)))),a(O,ee)};_(Be,O=>{e(t),r(()=>M(e(t).answer))?O(Re):O(je,!1)})}a(u,y)},de=u=>{var y=b();g(()=>m(y,(e(t),r(()=>e(t).answer)))),a(u,y)};_(J,u=>{e(t),r(()=>e(t).answer)?u(Z):u(de,!1)})}a(s,c)},q=s=>{var c=b();g(()=>m(c,(e(t),r(()=>e(t).answer)))),a(s,c)};_(B,s=>{e(v),r(()=>e(v).id==="imageToNameFreetext")?s(R):s(q,!1)})}i(n),a(o,n)};_(xe,o=>{e(t),r(()=>!e(t).correct)&&o(Me)})}var ue=l(xe,2),Ne=l(d(ue),2);{var $e=o=>{var n=b();g(()=>m(n,(e(t),r(()=>e(t).question.swedishName)))),a(o,n)},Pe=o=>{var n=te(),B=k(n);{var R=s=>{var c=b();g(()=>m(c,(e(t),r(()=>e(t).question.latinName)))),a(s,c)},q=s=>{var c=b();g(()=>m(c,`${e(t),r(()=>e(t).question.swedishName)??""} / ${e(t),r(()=>e(t).question.latinName)??""}`)),a(s,c)};_(B,s=>{e(v),r(()=>e(v).id==="swedish-to-latin")?s(R):s(q,!1)},!0)}a(o,n)};_(Ne,o=>{e(v),r(()=>e(v).id==="image-to-swedish")?o($e):o(Pe,!1)})}i(ue),g(()=>{ie(P,"aria-label",(e(t),r(()=>e(t).correct?"RÃ¤tt":"Fel"))),m(x,(e(t),r(()=>e(t).correct?"âœ”":"âŒ"))),m(Fe,(e(t),r(()=>e(t).correct?"RÃ¤tt":"Fel")))}),a(N,$)},$$slots:{default:!0}})},$$slots:{default:!0}})}i(oe),i(X),a(V,X)}),i(T),a(p,T)};_(le,p=>{e(v)&&p(U)})}i(ae),i(H),a(se,K),ye(),re()}export{ut as component};
