import"../chunks/DsnmJJEf.js";import{i as We}from"../chunks/BBgIKqnF.js";import{s as $t,o as tn,g as en}from"../chunks/fzmXQIKY.js";import{ad as nn,Y as wt,ae as sn,a6 as rn,aH as on,aQ as an,aP as cn,aR as ln,p as et,al as un,a3 as Ae,f as O,c as $,a9 as zt,aa as Nt,r as F,a as L,b as nt,ba as ze,a0 as tt,d as B,n as vt,g as S,aV as Vt,s as Y,t as Rt,Z as St,aU as te,e as at,_ as we,$ as fn,m as Ft,y as Se}from"../chunks/Chs2RoVq.js";import{p as j,r as bt,b as oe,c as Gt,i as lt,s as dn,a as mn}from"../chunks/DpnyLhaM.js";import{q as qt}from"../chunks/Bp0ftjfQ.js";import{s as gn,g as _e}from"../chunks/h1CPKJqe.js";import{e as Bt,i as Qt}from"../chunks/DdNKIFrO.js";import{c as ct}from"../chunks/BG31INoP.js";import{a as ie,s as Ne}from"../chunks/2P4LWlzv.js";import{c as Ot,B as _t,b as Pe,r as Ie,C as pn,a as hn}from"../chunks/BNr4riWQ.js";import{I as Oe,a as Le,P as vn}from"../chunks/Dg3LTcNh.js";function xn(e,t,n){nn(()=>{var r=wt(()=>t(e,n?.())||{});if(n&&r?.update){var a=!1,s={};sn(()=>{var o=n();rn(o),a&&on(s,o)&&(s=o,r.update(o))}),a=!0}if(r?.destroy)return()=>r.destroy()})}const bn={id:"image-to-swedish",label:"Image → Swedish name",generateQuestions(e){return[...e].sort(()=>Math.random()-.5).map(n=>({...n,images:n.images||[],answer:n.swedishName}))},checkAnswer(e,t){return t.trim().toLowerCase()===e.swedishName.trim().toLowerCase()},getOptions(e,t){const n=e[t].answer,r=e.map(s=>s.answer),a=[n];for(;a.length<4&&r.length>a.length;){const s=r[Math.floor(Math.random()*r.length)];a.includes(s)||a.push(s)}return a.sort(()=>Math.random()-.5)}},yn={id:"swedish-to-latin",label:"Swedish name → Latin name",generateQuestions(e){return[...e].sort(()=>Math.random()-.5).map(n=>({...n,question:n.swedishName,answer:n.latinName}))},checkAnswer(e,t){return t.trim().toLowerCase()===e.latinName.trim().toLowerCase()},getOptions(e,t){const n=e[t].answer,r=e.map(s=>s.answer),a=[n];for(;a.length<4&&r.length>a.length;){const s=r[Math.floor(Math.random()*r.length)];a.includes(s)||a.push(s)}return a.sort(()=>Math.random()-.5)}},wn={id:"imageToNameFreetext",label:"Image to name (freetext)",generateQuestions:e=>[...e].sort(()=>Math.random()-.5).map(n=>({images:n.images||[],swedishName:n.swedishName||n.swedish||"",latinName:n.latinName||n.latin||"",answer:""})),checkAnswer:(e,t)=>{let n={};try{n=JSON.parse(t)}catch{return!1}const r=p=>p.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9 ]/gi,"").replace(/\s+/g," ").trim().toLowerCase(),a=e.swedishName||"",s=e.latinName||"",o=n.swedish||"",c=n.latin||"",i=r(o)===r(a),l=r(c)===r(s);return i&&l},getOptions:()=>[]},ee=[bn,yn,wn],ne=Symbol("EMBLA_CAROUSEL_CONTEXT");function Sn(e){return ln(ne,e),e}function Ut(e="This component"){if(!an(ne))throw new Error(`${e} must be used within a <Carousel.Root> component`);return cn(ne)}var _n=O("<div><!></div>");function ke(e,t){et(t,!0);let n=j(t,"ref",15,null),r=j(t,"opts",19,()=>({})),a=j(t,"plugins",19,()=>[]),s=j(t,"setApi",3,()=>{}),o=j(t,"orientation",3,"horizontal"),c=bt(t,["$$slots","$$events","$$legacy","ref","opts","plugins","setApi","orientation","class","children"]),i=un({api:void 0,scrollPrev:l,scrollNext:p,orientation:o(),canScrollNext:!1,canScrollPrev:!1,handleKeyDown:x,options:r(),plugins:a(),onInit:g,scrollSnaps:[],selectedIndex:0,scrollTo:f});Sn(i);function l(){i.api?.scrollPrev()}function p(){i.api?.scrollNext()}function f(u,v){i.api?.scrollTo(u,v)}function m(){i.api&&(i.selectedIndex=i.api.selectedScrollSnap(),i.canScrollNext=i.api.canScrollNext(),i.canScrollPrev=i.api.canScrollPrev())}function x(u){u.key==="ArrowLeft"?(u.preventDefault(),l()):u.key==="ArrowRight"&&(u.preventDefault(),p())}function g(u){i.api=u.detail,s()(i.api),i.scrollSnaps=i.api.scrollSnapList(),i.api.on("select",m),m()}Ae(()=>()=>{i.api?.off("select",m)});var d=_n();ie(d,u=>({"data-slot":"carousel",class:u,role:"region","aria-roledescription":"carousel",...c}),[()=>Ot("relative",t.class)]);var h=$(d);zt(h,()=>t.children??Nt),F(d),oe(d,u=>n(u),()=>n()),L(e,d),nt()}function Pn(e){return Object.prototype.toString.call(e)==="[object Object]"}function Te(e){return Pn(e)||Array.isArray(e)}function In(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function ae(e,t){const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;const a=JSON.stringify(Object.keys(e.breakpoints||{})),s=JSON.stringify(Object.keys(t.breakpoints||{}));return a!==s?!1:n.every(o=>{const c=e[o],i=t[o];return typeof c=="function"?`${c}`==`${i}`:!Te(c)||!Te(i)?c===i:ae(c,i)})}function Ee(e){return e.concat().sort((t,n)=>t.name>n.name?1:-1).map(t=>t.options)}function Ln(e,t){if(e.length!==t.length)return!1;const n=Ee(e),r=Ee(t);return n.every((a,s)=>{const o=r[s];return ae(a,o)})}function ce(e){return typeof e=="number"}function se(e){return typeof e=="string"}function Kt(e){return typeof e=="boolean"}function Ce(e){return Object.prototype.toString.call(e)==="[object Object]"}function N(e){return Math.abs(e)}function le(e){return Math.sign(e)}function Et(e,t){return N(e-t)}function Tn(e,t){if(e===0||t===0||N(e)<=N(t))return 0;const n=Et(N(e),N(t));return N(n/e)}function En(e){return Math.round(e*100)/100}function Ct(e){return Mt(e).map(Number)}function ot(e){return e[kt(e)]}function kt(e){return Math.max(0,e.length-1)}function ue(e,t){return t===kt(e)}function Me(e,t=0){return Array.from(Array(e),(n,r)=>t+r)}function Mt(e){return Object.keys(e)}function De(e,t){return[e,t].reduce((n,r)=>(Mt(r).forEach(a=>{const s=n[a],o=r[a],c=Ce(s)&&Ce(o);n[a]=c?De(s,o):o}),n),{})}function re(e,t){return typeof t.MouseEvent<"u"&&e instanceof t.MouseEvent}function Cn(e,t){const n={start:r,center:a,end:s};function r(){return 0}function a(i){return s(i)/2}function s(i){return t-i}function o(i,l){return se(e)?n[e](i):e(t,i,l)}return{measure:o}}function At(){let e=[];function t(a,s,o,c={passive:!0}){let i;if("addEventListener"in a)a.addEventListener(s,o,c),i=()=>a.removeEventListener(s,o,c);else{const l=a;l.addListener(o),i=()=>l.removeListener(o)}return e.push(i),r}function n(){e=e.filter(a=>a())}const r={add:t,clear:n};return r}function Mn(e,t,n,r){const a=At(),s=1e3/60;let o=null,c=0,i=0;function l(){a.add(e,"visibilitychange",()=>{e.hidden&&g()})}function p(){x(),a.clear()}function f(h){if(!i)return;o||(o=h,n(),n());const u=h-o;for(o=h,c+=u;c>=s;)n(),c-=s;const v=c/s;r(v),i&&(i=t.requestAnimationFrame(f))}function m(){i||(i=t.requestAnimationFrame(f))}function x(){t.cancelAnimationFrame(i),o=null,c=0,i=0}function g(){o=null,c=0}return{init:l,destroy:p,start:m,stop:x,update:n,render:r}}function An(e,t){const n=t==="rtl",r=e==="y",a=r?"y":"x",s=r?"x":"y",o=!r&&n?-1:1,c=p(),i=f();function l(g){const{height:d,width:h}=g;return r?d:h}function p(){return r?"top":n?"right":"left"}function f(){return r?"bottom":n?"left":"right"}function m(g){return g*o}return{scroll:a,cross:s,startEdge:c,endEdge:i,measureSize:l,direction:m}}function xt(e=0,t=0){const n=N(e-t);function r(l){return l<e}function a(l){return l>t}function s(l){return r(l)||a(l)}function o(l){return s(l)?r(l)?e:t:l}function c(l){return n?l-n*Math.ceil((l-t)/n):l}return{length:n,max:t,min:e,constrain:o,reachedAny:s,reachedMax:a,reachedMin:r,removeOffset:c}}function Fe(e,t,n){const{constrain:r}=xt(0,e),a=e+1;let s=o(t);function o(m){return n?N((a+m)%a):r(m)}function c(){return s}function i(m){return s=o(m),f}function l(m){return p().set(c()+m)}function p(){return Fe(e,c(),n)}const f={get:c,set:i,add:l,clone:p};return f}function zn(e,t,n,r,a,s,o,c,i,l,p,f,m,x,g,d,h,u,v){const{cross:b,direction:_}=e,C=["INPUT","SELECT","TEXTAREA"],P={passive:!1},w=At(),I=At(),E=xt(50,225).constrain(x.measure(20)),M={mouse:300,touch:400},T={mouse:500,touch:600},k=g?43:25;let H=!1,V=0,q=0,st=!1,Q=!1,U=!1,J=!1;function rt(y){if(!v)return;function A(G){(Kt(v)||v(y,G))&&It(G)}const D=t;w.add(D,"dragstart",G=>G.preventDefault(),P).add(D,"touchmove",()=>{},P).add(D,"touchend",()=>{}).add(D,"touchstart",A).add(D,"mousedown",A).add(D,"touchcancel",R).add(D,"contextmenu",R).add(D,"click",ut,!0)}function K(){w.clear(),I.clear()}function dt(){const y=J?n:t;I.add(y,"touchmove",X,P).add(y,"touchend",R).add(y,"mousemove",X,P).add(y,"mouseup",R)}function gt(y){const A=y.nodeName||"";return C.includes(A)}function Z(){return(g?T:M)[J?"mouse":"touch"]}function Pt(y,A){const D=f.add(le(y)*-1),G=p.byDistance(y,!g).distance;return g||N(y)<E?G:h&&A?G*.5:p.byIndex(D.get(),0).distance}function It(y){const A=re(y,r);J=A,U=g&&A&&!y.buttons&&H,H=Et(a.get(),o.get())>=2,!(A&&y.button!==0)&&(gt(y.target)||(st=!0,s.pointerDown(y),l.useFriction(0).useDuration(0),a.set(o),dt(),V=s.readPoint(y),q=s.readPoint(y,b),m.emit("pointerDown")))}function X(y){if(!re(y,r)&&y.touches.length>=2)return R(y);const D=s.readPoint(y),G=s.readPoint(y,b),it=Et(D,V),ft=Et(G,q);if(!Q&&!J&&(!y.cancelable||(Q=it>ft,!Q)))return R(y);const pt=s.pointerMove(y);it>d&&(U=!0),l.useFriction(.3).useDuration(.75),c.start(),a.add(_(pt)),y.preventDefault()}function R(y){const D=p.byDistance(0,!1).index!==f.get(),G=s.pointerUp(y)*Z(),it=Pt(_(G),D),ft=Tn(G,it),pt=k-10*ft,mt=u+ft/50;Q=!1,st=!1,I.clear(),l.useDuration(pt).useFriction(mt),i.distance(it,!g),J=!1,m.emit("pointerUp")}function ut(y){U&&(y.stopPropagation(),y.preventDefault(),U=!1)}function W(){return st}return{init:rt,destroy:K,pointerDown:W}}function Nn(e,t){let r,a;function s(f){return f.timeStamp}function o(f,m){const g=`client${(m||e.scroll)==="x"?"X":"Y"}`;return(re(f,t)?f:f.touches[0])[g]}function c(f){return r=f,a=f,o(f)}function i(f){const m=o(f)-o(a),x=s(f)-s(r)>170;return a=f,x&&(r=f),m}function l(f){if(!r||!a)return 0;const m=o(a)-o(r),x=s(f)-s(r),g=s(f)-s(a)>170,d=m/x;return x&&!g&&N(d)>.1?d:0}return{pointerDown:c,pointerMove:i,pointerUp:l,readPoint:o}}function On(){function e(n){const{offsetTop:r,offsetLeft:a,offsetWidth:s,offsetHeight:o}=n;return{top:r,right:a+s,bottom:r+o,left:a,width:s,height:o}}return{measure:e}}function kn(e){function t(r){return e*(r/100)}return{measure:t}}function Dn(e,t,n,r,a,s,o){const c=[e].concat(r);let i,l,p=[],f=!1;function m(h){return a.measureSize(o.measure(h))}function x(h){if(!s)return;l=m(e),p=r.map(m);function u(v){for(const b of v){if(f)return;const _=b.target===e,C=r.indexOf(b.target),P=_?l:p[C],w=m(_?e:r[C]);if(N(w-P)>=.5){h.reInit(),t.emit("resize");break}}}i=new ResizeObserver(v=>{(Kt(s)||s(h,v))&&u(v)}),n.requestAnimationFrame(()=>{c.forEach(v=>i.observe(v))})}function g(){f=!0,i&&i.disconnect()}return{init:x,destroy:g}}function Fn(e,t,n,r,a,s){let o=0,c=0,i=a,l=s,p=e.get(),f=0;function m(){const P=r.get()-e.get(),w=!i;let I=0;return w?(o=0,n.set(r),e.set(r),I=P):(n.set(e),o+=P/i,o*=l,p+=o,e.add(o),I=p-f),c=le(I),f=p,C}function x(){const P=r.get()-t.get();return N(P)<.001}function g(){return i}function d(){return c}function h(){return o}function u(){return b(a)}function v(){return _(s)}function b(P){return i=P,C}function _(P){return l=P,C}const C={direction:d,duration:g,velocity:h,seek:m,settled:x,useBaseFriction:v,useBaseDuration:u,useFriction:_,useDuration:b};return C}function qn(e,t,n,r,a){const s=a.measure(10),o=a.measure(50),c=xt(.1,.99);let i=!1;function l(){return!(i||!e.reachedAny(n.get())||!e.reachedAny(t.get()))}function p(x){if(!l())return;const g=e.reachedMin(t.get())?"min":"max",d=N(e[g]-t.get()),h=n.get()-t.get(),u=c.constrain(d/o);n.subtract(h*u),!x&&N(h)<s&&(n.set(e.constrain(n.get())),r.useDuration(25).useBaseFriction())}function f(x){i=!x}return{shouldConstrain:l,constrain:p,toggleActive:f}}function jn(e,t,n,r,a){const s=xt(-t+e,0),o=f(),c=p(),i=m();function l(g,d){return Et(g,d)<=1}function p(){const g=o[0],d=ot(o),h=o.lastIndexOf(g),u=o.indexOf(d)+1;return xt(h,u)}function f(){return n.map((g,d)=>{const{min:h,max:u}=s,v=s.constrain(g),b=!d,_=ue(n,d);return b?u:_||l(h,v)?h:l(u,v)?u:v}).map(g=>parseFloat(g.toFixed(3)))}function m(){if(t<=e+a)return[s.max];if(r==="keepSnaps")return o;const{min:g,max:d}=c;return o.slice(g,d)}return{snapsContained:i,scrollContainLimit:c}}function $n(e,t,n){const r=t[0],a=n?r-e:ot(t);return{limit:xt(a,r)}}function Vn(e,t,n,r){const s=t.min+.1,o=t.max+.1,{reachedMin:c,reachedMax:i}=xt(s,o);function l(m){return m===1?i(n.get()):m===-1?c(n.get()):!1}function p(m){if(!l(m))return;const x=e*(m*-1);r.forEach(g=>g.add(x))}return{loop:p}}function Bn(e){const{max:t,length:n}=e;function r(s){const o=s-t;return n?o/-n:0}return{get:r}}function Qn(e,t,n,r,a){const{startEdge:s,endEdge:o}=e,{groupSlides:c}=a,i=f().map(t.measure),l=m(),p=x();function f(){return c(r).map(d=>ot(d)[o]-d[0][s]).map(N)}function m(){return r.map(d=>n[s]-d[s]).map(d=>-N(d))}function x(){return c(l).map(d=>d[0]).map((d,h)=>d+i[h])}return{snaps:l,snapsAligned:p}}function Hn(e,t,n,r,a,s){const{groupSlides:o}=a,{min:c,max:i}=r,l=p();function p(){const m=o(s),x=!e||t==="keepSnaps";return n.length===1?[s]:x?m:m.slice(c,i).map((g,d,h)=>{const u=!d,v=ue(h,d);if(u){const b=ot(h[0])+1;return Me(b)}if(v){const b=kt(s)-ot(h)[0]+1;return Me(b,ot(h)[0])}return g})}return{slideRegistry:l}}function Rn(e,t,n,r,a){const{reachedAny:s,removeOffset:o,constrain:c}=r;function i(g){return g.concat().sort((d,h)=>N(d)-N(h))[0]}function l(g){const d=e?o(g):c(g),h=t.map((v,b)=>({diff:p(v-d,0),index:b})).sort((v,b)=>N(v.diff)-N(b.diff)),{index:u}=h[0];return{index:u,distance:d}}function p(g,d){const h=[g,g+n,g-n];if(!e)return g;if(!d)return i(h);const u=h.filter(v=>le(v)===d);return u.length?i(u):ot(h)-n}function f(g,d){const h=t[g]-a.get(),u=p(h,d);return{index:g,distance:u}}function m(g,d){const h=a.get()+g,{index:u,distance:v}=l(h),b=!e&&s(h);if(!d||b)return{index:u,distance:g};const _=t[u]-v,C=g+p(_,0);return{index:u,distance:C}}return{byDistance:m,byIndex:f,shortcut:p}}function Gn(e,t,n,r,a,s,o){function c(f){const m=f.distance,x=f.index!==t.get();s.add(m),m&&(r.duration()?e.start():(e.update(),e.render(1),e.update())),x&&(n.set(t.get()),t.set(f.index),o.emit("select"))}function i(f,m){const x=a.byDistance(f,m);c(x)}function l(f,m){const x=t.clone().set(f),g=a.byIndex(x.get(),m);c(g)}return{distance:i,index:l}}function Un(e,t,n,r,a,s,o,c){const i={passive:!0,capture:!0};let l=0;function p(x){if(!c)return;function g(d){if(new Date().getTime()-l>10)return;o.emit("slideFocusStart"),e.scrollLeft=0;const v=n.findIndex(b=>b.includes(d));ce(v)&&(a.useDuration(0),r.index(v,0),o.emit("slideFocus"))}s.add(document,"keydown",f,!1),t.forEach((d,h)=>{s.add(d,"focus",u=>{(Kt(c)||c(x,u))&&g(h)},i)})}function f(x){x.code==="Tab"&&(l=new Date().getTime())}return{init:p}}function Tt(e){let t=e;function n(){return t}function r(i){t=o(i)}function a(i){t+=o(i)}function s(i){t-=o(i)}function o(i){return ce(i)?i:i.get()}return{get:n,set:r,add:a,subtract:s}}function qe(e,t){const n=e.scroll==="x"?o:c,r=t.style;let a=null,s=!1;function o(m){return`translate3d(${m}px,0px,0px)`}function c(m){return`translate3d(0px,${m}px,0px)`}function i(m){if(s)return;const x=En(e.direction(m));x!==a&&(r.transform=n(x),a=x)}function l(m){s=!m}function p(){s||(r.transform="",t.getAttribute("style")||t.removeAttribute("style"))}return{clear:p,to:i,toggleActive:l}}function Kn(e,t,n,r,a,s,o,c,i){const p=Ct(a),f=Ct(a).reverse(),m=u().concat(v());function x(w,I){return w.reduce((E,M)=>E-a[M],I)}function g(w,I){return w.reduce((E,M)=>x(E,I)>0?E.concat([M]):E,[])}function d(w){return s.map((I,E)=>({start:I-r[E]+.5+w,end:I+t-.5+w}))}function h(w,I,E){const M=d(I);return w.map(T=>{const k=E?0:-n,H=E?n:0,V=E?"end":"start",q=M[T][V];return{index:T,loopPoint:q,slideLocation:Tt(-1),translate:qe(e,i[T]),target:()=>c.get()>q?k:H}})}function u(){const w=o[0],I=g(f,w);return h(I,n,!1)}function v(){const w=t-o[0]-1,I=g(p,w);return h(I,-n,!0)}function b(){return m.every(({index:w})=>{const I=p.filter(E=>E!==w);return x(I,t)<=.1})}function _(){m.forEach(w=>{const{target:I,translate:E,slideLocation:M}=w,T=I();T!==M.get()&&(E.to(T),M.set(T))})}function C(){m.forEach(w=>w.translate.clear())}return{canLoop:b,clear:C,loop:_,loopPoints:m}}function Jn(e,t,n){let r,a=!1;function s(i){if(!n)return;function l(p){for(const f of p)if(f.type==="childList"){i.reInit(),t.emit("slidesChanged");break}}r=new MutationObserver(p=>{a||(Kt(n)||n(i,p))&&l(p)}),r.observe(e,{childList:!0})}function o(){r&&r.disconnect(),a=!0}return{init:s,destroy:o}}function Xn(e,t,n,r){const a={};let s=null,o=null,c,i=!1;function l(){c=new IntersectionObserver(g=>{i||(g.forEach(d=>{const h=t.indexOf(d.target);a[h]=d}),s=null,o=null,n.emit("slidesInView"))},{root:e.parentElement,threshold:r}),t.forEach(g=>c.observe(g))}function p(){c&&c.disconnect(),i=!0}function f(g){return Mt(a).reduce((d,h)=>{const u=parseInt(h),{isIntersecting:v}=a[u];return(g&&v||!g&&!v)&&d.push(u),d},[])}function m(g=!0){if(g&&s)return s;if(!g&&o)return o;const d=f(g);return g&&(s=d),g||(o=d),d}return{init:l,destroy:p,get:m}}function Yn(e,t,n,r,a,s){const{measureSize:o,startEdge:c,endEdge:i}=e,l=n[0]&&a,p=g(),f=d(),m=n.map(o),x=h();function g(){if(!l)return 0;const v=n[0];return N(t[c]-v[c])}function d(){if(!l)return 0;const v=s.getComputedStyle(ot(r));return parseFloat(v.getPropertyValue(`margin-${i}`))}function h(){return n.map((v,b,_)=>{const C=!b,P=ue(_,b);return C?m[b]+p:P?m[b]+f:_[b+1][c]-v[c]}).map(N)}return{slideSizes:m,slideSizesWithGaps:x,startGap:p,endGap:f}}function Zn(e,t,n,r,a,s,o,c,i){const{startEdge:l,endEdge:p,direction:f}=e,m=ce(n);function x(u,v){return Ct(u).filter(b=>b%v===0).map(b=>u.slice(b,b+v))}function g(u){return u.length?Ct(u).reduce((v,b,_)=>{const C=ot(v)||0,P=C===0,w=b===kt(u),I=a[l]-s[C][l],E=a[l]-s[b][p],M=!r&&P?f(o):0,T=!r&&w?f(c):0,k=N(E-T-(I+M));return _&&k>t+i&&v.push(b),w&&v.push(u.length),v},[]).map((v,b,_)=>{const C=Math.max(_[b-1]||0);return u.slice(C,v)}):[]}function d(u){return m?x(u,n):g(u)}return{groupSlides:d}}function Wn(e,t,n,r,a,s,o){const{align:c,axis:i,direction:l,startIndex:p,loop:f,duration:m,dragFree:x,dragThreshold:g,inViewThreshold:d,slidesToScroll:h,skipSnaps:u,containScroll:v,watchResize:b,watchSlides:_,watchDrag:C,watchFocus:P}=s,w=2,I=On(),E=I.measure(t),M=n.map(I.measure),T=An(i,l),k=T.measureSize(E),H=kn(k),V=Cn(c,k),q=!f&&!!v,st=f||!!v,{slideSizes:Q,slideSizesWithGaps:U,startGap:J,endGap:rt}=Yn(T,E,M,n,st,a),K=Zn(T,k,h,f,E,M,J,rt,w),{snaps:dt,snapsAligned:gt}=Qn(T,V,E,M,K),Z=-ot(dt)+ot(U),{snapsContained:Pt,scrollContainLimit:It}=jn(k,Z,gt,v,w),X=q?Pt:gt,{limit:R}=$n(Z,X,f),ut=Fe(kt(X),p,f),W=ut.clone(),z=Ct(n),y=({dragHandler:yt,scrollBody:Zt,scrollBounds:Wt,options:{loop:Dt}})=>{Dt||Wt.constrain(yt.pointerDown()),Zt.seek()},A=({scrollBody:yt,translate:Zt,location:Wt,offsetLocation:Dt,previousLocation:Re,scrollLooper:Ge,slideLooper:Ue,dragHandler:Ke,animation:Je,eventHandler:pe,scrollBounds:Xe,options:{loop:he}},ve)=>{const xe=yt.settled(),Ye=!Xe.shouldConstrain(),be=he?xe:xe&&Ye,ye=be&&!Ke.pointerDown();ye&&Je.stop();const Ze=Wt.get()*ve+Re.get()*(1-ve);Dt.set(Ze),he&&(Ge.loop(yt.direction()),Ue.loop()),Zt.to(Dt.get()),ye&&pe.emit("settle"),be||pe.emit("scroll")},D=Mn(r,a,()=>y(Yt),yt=>A(Yt,yt)),G=.68,it=X[ut.get()],ft=Tt(it),pt=Tt(it),mt=Tt(it),ht=Tt(it),Lt=Fn(ft,mt,pt,ht,m,G),Jt=Rn(f,X,Z,R,ht),Xt=Gn(D,ut,W,Lt,Jt,ht,o),de=Bn(R),me=At(),Qe=Xn(t,n,o,d),{slideRegistry:ge}=Hn(q,v,X,It,K,z),He=Un(e,n,ge,Xt,Lt,me,o,P),Yt={ownerDocument:r,ownerWindow:a,eventHandler:o,containerRect:E,slideRects:M,animation:D,axis:T,dragHandler:zn(T,e,r,a,ht,Nn(T,a),ft,D,Xt,Lt,Jt,ut,o,H,x,g,u,G,C),eventStore:me,percentOfView:H,index:ut,indexPrevious:W,limit:R,location:ft,offsetLocation:mt,previousLocation:pt,options:s,resizeHandler:Dn(t,o,a,n,T,b,I),scrollBody:Lt,scrollBounds:qn(R,mt,ht,Lt,H),scrollLooper:Vn(Z,R,mt,[ft,mt,pt,ht]),scrollProgress:de,scrollSnapList:X.map(de.get),scrollSnaps:X,scrollTarget:Jt,scrollTo:Xt,slideLooper:Kn(T,k,Z,Q,U,dt,X,mt,n),slideFocus:He,slidesHandler:Jn(t,o,_),slidesInView:Qe,slideIndexes:z,slideRegistry:ge,slidesToScroll:K,target:ht,translate:qe(T,t)};return Yt}function ts(){let e={},t;function n(l){t=l}function r(l){return e[l]||[]}function a(l){return r(l).forEach(p=>p(t,l)),i}function s(l,p){return e[l]=r(l).concat([p]),i}function o(l,p){return e[l]=r(l).filter(f=>f!==p),i}function c(){e={}}const i={init:n,emit:a,off:o,on:s,clear:c};return i}const es={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function ns(e){function t(s,o){return De(s,o||{})}function n(s){const o=s.breakpoints||{},c=Mt(o).filter(i=>e.matchMedia(i).matches).map(i=>o[i]).reduce((i,l)=>t(i,l),{});return t(s,c)}function r(s){return s.map(o=>Mt(o.breakpoints||{})).reduce((o,c)=>o.concat(c),[]).map(e.matchMedia)}return{mergeOptions:t,optionsAtMedia:n,optionsMediaQueries:r}}function ss(e){let t=[];function n(s,o){return t=o.filter(({options:c})=>e.optionsAtMedia(c).active!==!1),t.forEach(c=>c.init(s,e)),o.reduce((c,i)=>Object.assign(c,{[i.name]:i}),{})}function r(){t=t.filter(s=>s.destroy())}return{init:n,destroy:r}}function Ht(e,t,n){const r=e.ownerDocument,a=r.defaultView,s=ns(a),o=ss(s),c=At(),i=ts(),{mergeOptions:l,optionsAtMedia:p,optionsMediaQueries:f}=s,{on:m,off:x,emit:g}=i,d=T;let h=!1,u,v=l(es,Ht.globalOptions),b=l(v),_=[],C,P,w;function I(){const{container:z,slides:y}=b;P=(se(z)?e.querySelector(z):z)||e.children[0];const D=se(y)?P.querySelectorAll(y):y;w=[].slice.call(D||P.children)}function E(z){const y=Wn(e,P,w,r,a,z,i);if(z.loop&&!y.slideLooper.canLoop()){const A=Object.assign({},z,{loop:!1});return E(A)}return y}function M(z,y){h||(v=l(v,z),b=p(v),_=y||_,I(),u=E(b),f([v,..._.map(({options:A})=>A)]).forEach(A=>c.add(A,"change",T)),b.active&&(u.translate.to(u.location.get()),u.animation.init(),u.slidesInView.init(),u.slideFocus.init(W),u.eventHandler.init(W),u.resizeHandler.init(W),u.slidesHandler.init(W),u.options.loop&&u.slideLooper.loop(),P.offsetParent&&w.length&&u.dragHandler.init(W),C=o.init(W,_)))}function T(z,y){const A=K();k(),M(l({startIndex:A},z),y),i.emit("reInit")}function k(){u.dragHandler.destroy(),u.eventStore.clear(),u.translate.clear(),u.slideLooper.clear(),u.resizeHandler.destroy(),u.slidesHandler.destroy(),u.slidesInView.destroy(),u.animation.destroy(),o.destroy(),c.clear()}function H(){h||(h=!0,c.clear(),k(),i.emit("destroy"),i.clear())}function V(z,y,A){!b.active||h||(u.scrollBody.useBaseFriction().useDuration(y===!0?0:b.duration),u.scrollTo.index(z,A||0))}function q(z){const y=u.index.add(1).get();V(y,z,-1)}function st(z){const y=u.index.add(-1).get();V(y,z,1)}function Q(){return u.index.add(1).get()!==K()}function U(){return u.index.add(-1).get()!==K()}function J(){return u.scrollSnapList}function rt(){return u.scrollProgress.get(u.offsetLocation.get())}function K(){return u.index.get()}function dt(){return u.indexPrevious.get()}function gt(){return u.slidesInView.get()}function Z(){return u.slidesInView.get(!1)}function Pt(){return C}function It(){return u}function X(){return e}function R(){return P}function ut(){return w}const W={canScrollNext:Q,canScrollPrev:U,containerNode:R,internalEngine:It,destroy:H,off:x,on:m,emit:g,plugins:Pt,previousScrollSnap:dt,reInit:d,rootNode:X,scrollNext:q,scrollPrev:st,scrollProgress:rt,scrollSnapList:J,scrollTo:V,selectedScrollSnap:K,slideNodes:ut,slidesInView:gt,slidesNotInView:Z};return M(t,n),setTimeout(()=>i.emit("init"),0),W}Ht.globalOptions=void 0;function fe(e,t={options:{},plugins:[]}){let n=t,r;return In()&&(Ht.globalOptions=fe.globalOptions,r=Ht(e,n.options,n.plugins),r.on("init",()=>e.dispatchEvent(new CustomEvent("emblaInit",{detail:r})))),{destroy:()=>{r&&r.destroy()},update:a=>{const s=!ae(n.options,a.options),o=!Ln(n.plugins,a.plugins);!s&&!o||(n=a,r&&r.reInit(n.options,n.plugins))}}}fe.globalOptions=void 0;var rs=O('<div data-slot="carousel-content" class="overflow-hidden"><div><!></div></div>');function je(e,t){et(t,!0);let n=j(t,"ref",15,null),r=bt(t,["$$slots","$$events","$$legacy","ref","class","children"]);const a=Ut("<Carousel.Content/>");var s=rs(),o=$(s);ie(o,i=>({class:i,"data-embla-container":"",...r}),[()=>Ot("flex",a.orientation==="horizontal"?"-ml-4":"-mt-4 flex-col",t.class)]);var c=$(o);zt(c,()=>t.children??Nt),F(o),oe(o,i=>n(i),()=>n()),F(s),xn(s,(i,l)=>fe?.(i,l),()=>({options:{container:"[data-embla-container]",slides:"[data-embla-slide]",...a.options,axis:a.orientation==="horizontal"?"x":"y"},plugins:a.plugins})),ze("emblaInit",s,function(...i){a.onInit?.apply(this,i)}),L(e,s),nt()}var os=O("<div><!></div>");function $e(e,t){et(t,!0);let n=j(t,"ref",15,null),r=bt(t,["$$slots","$$events","$$legacy","ref","class","children"]);const a=Ut("<Carousel.Item/>");var s=os();ie(s,c=>({"data-slot":"carousel-item",role:"group","aria-roledescription":"slide",class:c,"data-embla-slide":"",...r}),[()=>Ot("min-w-0 shrink-0 grow-0 basis-full",a.orientation==="horizontal"?"pl-4":"pt-4",t.class)]);var o=$(s);zt(o,()=>t.children??Nt),F(s),oe(s,c=>n(c),()=>n()),L(e,s),nt()}function is(e,t){et(t,!0);/**
 * @license @lucide/svelte v0.515.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let n=bt(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];Oe(e,Gt({name:"arrow-left"},()=>n,{get iconNode(){return r},children:(a,s)=>{var o=tt(),c=B(o);zt(c,()=>t.children??Nt),L(a,o)},$$slots:{default:!0}})),nt()}var as=O('<!> <span class="sr-only">Previous slide</span>',1);function Ve(e,t){et(t,!0);let n=j(t,"ref",15,null),r=j(t,"variant",3,"outline"),a=j(t,"size",3,"icon"),s=bt(t,["$$slots","$$events","$$legacy","ref","class","variant","size"]);const o=Ut("<Carousel.Previous/>");{let c=Vt(()=>!o.canScrollPrev),i=Vt(()=>Ot("absolute size-8 rounded-full",o.orientation==="horizontal"?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",t.class));_t(e,Gt({"data-slot":"carousel-previous",get variant(){return r()},get size(){return a()},get"aria-disabled"(){return S(c)},get class(){return S(i)},get onclick(){return o.scrollPrev},get onkeydown(){return o.handleKeyDown}},()=>s,{get ref(){return n()},set ref(l){n(l)},children:(l,p)=>{var f=as(),m=B(f);is(m,{class:"size-4"}),vt(2),L(l,f)},$$slots:{default:!0}}))}nt()}function cs(e,t){et(t,!0);/**
 * @license @lucide/svelte v0.515.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let n=bt(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M5 12h14"}],["path",{d:"m12 5 7 7-7 7"}]];Oe(e,Gt({name:"arrow-right"},()=>n,{get iconNode(){return r},children:(a,s)=>{var o=tt(),c=B(o);zt(c,()=>t.children??Nt),L(a,o)},$$slots:{default:!0}})),nt()}var ls=O('<!> <span class="sr-only">Next slide</span>',1);function Be(e,t){et(t,!0);let n=j(t,"ref",15,null),r=j(t,"variant",3,"outline"),a=j(t,"size",3,"icon"),s=bt(t,["$$slots","$$events","$$legacy","ref","class","variant","size"]);const o=Ut("<Carousel.Next/>");{let c=Vt(()=>!o.canScrollNext),i=Vt(()=>Ot("absolute size-8 rounded-full",o.orientation==="horizontal"?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",t.class));_t(e,Gt({"data-slot":"carousel-next",get variant(){return r()},get size(){return a()},get"aria-disabled"(){return S(c)},get class(){return S(i)},get onclick(){return o.scrollNext},get onkeydown(){return o.handleKeyDown}},()=>s,{get ref(){return n()},set ref(l){n(l)},children:(l,p)=>{var f=ls(),m=B(f);cs(m,{class:"size-4"}),vt(2),L(l,f)},$$slots:{default:!0}}))}nt()}var us=O('<img alt="Växtbild" class="w-full h-[220px] object-cover rounded-xl shadow-md bg-gray-200 max-w-[340px] mx-auto block"/>'),fs=O("<!> <!> <!>",1),ds=O('<div class="w-full max-w-[420px] mb-4 relative flex flex-col items-center"><!></div>'),ms=O('<div class="w-full max-w-[220px] h-[220px] rounded-xl bg-gray-200 shadow-md relative mb-4"><span class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-gray-400">Laddar bild...</span></div>'),gs=O('<div class="flex flex-col items-center w-full"><!> <h3 class="text-xl text-center mb-4">Vad är det svenska namnet för växten på bilden?</h3> <div class="w-full h-[2px] bg-gradient-to-r from-gray-200 to-slate-300 my-4 rounded-sm opacity-70"></div> <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 w-full max-w-[420px]"></div></div>');function ps(e,t){et(t,!0);let n=j(t,"loadingImages",3,!1);var r=gs(),a=$(r);{var s=i=>{var l=ds(),p=$(l);ct(p,()=>ke,(f,m)=>{m(f,{opts:{align:"center",loop:!0},children:(x,g)=>{var d=fs(),h=B(d);ct(h,()=>je,(b,_)=>{_(b,{class:"-ml-4",children:(C,P)=>{var w=tt(),I=B(w);Bt(I,17,()=>t.question.images,Qt,(E,M)=>{var T=tt(),k=B(T);ct(k,()=>$e,(H,V)=>{V(H,{class:"pl-4 basis-full",children:(q,st)=>{var Q=us();St(()=>Ne(Q,"src",S(M))),L(q,Q)},$$slots:{default:!0}})}),L(E,T)}),L(C,w)},$$slots:{default:!0}})});var u=Y(h,2);ct(u,()=>Ve,(b,_)=>{_(b,{class:"absolute top-1/2 -translate-y-1/2 left-1 z-10 bg-white/85 rounded-full w-10 h-10 flex items-center justify-center shadow-sm border-none cursor-pointer text-gray-800 hover:bg-white"})});var v=Y(u,2);ct(v,()=>Be,(b,_)=>{_(b,{class:"absolute top-1/2 -translate-y-1/2 right-1 z-10 bg-white/85 rounded-full w-10 h-10 flex items-center justify-center shadow-sm border-none cursor-pointer text-gray-800 hover:bg-white"})}),L(x,d)},$$slots:{default:!0}})}),F(l),L(i,l)},o=i=>{var l=tt(),p=B(l);{var f=m=>{var x=ms();L(m,x)};lt(p,m=>{n()&&m(f)},!0)}L(i,l)};lt(a,i=>{t.question?.images&&t.question.images.length>0?i(s):i(o,!1)})}var c=Y(a,6);Bt(c,21,()=>t.options,Qt,(i,l)=>{_t(i,{type:"button",variant:"outline",class:"w-full min-h-[3.7em] text-base whitespace-normal h-auto py-2 px-3",onclick:()=>t.onanswer(S(l)),children:(p,f)=>{vt();var m=Rt();St(()=>$t(m,S(l))),L(p,m)},$$slots:{default:!0}})}),F(c),F(r),L(e,r),nt()}var hs=O('<div class="flex flex-col items-center w-full"><h3 class="text-xl text-center mb-4">Vad är det latinska namnet för <span class="font-semibold"> </span>?</h3> <div class="w-full h-[2px] bg-gradient-to-r from-gray-200 to-slate-300 my-4 rounded-sm opacity-70"></div> <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 w-full max-w-[420px]"></div></div>');function vs(e,t){et(t,!0);var n=hs(),r=$(n),a=Y($(r)),s=$(a,!0);F(a),vt(),F(r);var o=Y(r,4);Bt(o,21,()=>t.options,Qt,(c,i)=>{_t(c,{type:"button",variant:"outline",class:"w-full min-h-[3.7em] text-base whitespace-normal h-auto py-2 px-3",onclick:()=>t.onanswer(S(i)),children:(l,p)=>{vt();var f=Rt();St(()=>$t(f,S(i))),L(l,f)},$$slots:{default:!0}})}),F(o),F(n),St(()=>$t(s,t.question?.swedishName)),L(e,n),nt()}var xs=O('<img alt="Växtbild" class="w-full h-[220px] object-cover rounded-xl shadow-md bg-gray-200 max-w-[340px] mx-auto block"/>'),bs=O("<!> <!> <!>",1),ys=O('<div class="w-full max-w-[420px] mb-4 relative flex flex-col items-center"><!></div>'),ws=O('<div class="w-full max-w-[220px] h-[220px] rounded-xl bg-gray-200 shadow-md relative mb-4"><span class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-gray-400">Laddar bild...</span></div>'),Ss=O('<div class="flex flex-col items-center w-full"><!> <h3 class="text-xl text-center mb-4">Vad heter växten på bilderna? <span class="block text-base font-normal text-gray-600 mt-1">Ange både svenska och latinska namnet.</span></h3> <div class="w-full h-[2px] bg-gradient-to-r from-gray-200 to-slate-300 my-4 rounded-sm opacity-70"></div> <form class="flex flex-col gap-4 items-center w-full max-w-[340px]"><!> <!> <!></form></div>');function _s(e,t){et(t,!0);let n=j(t,"loadingImages",3,!1),r=te(""),a=te(""),s=te(null);function o(d){d.preventDefault(),t.onanswer(JSON.stringify({swedish:S(r),latin:S(a)})),at(r,""),at(a,""),setTimeout(()=>{S(s)?.focus()},0)}Ae(()=>{t.question&&setTimeout(()=>{S(s)?.focus()},0)});var c=Ss(),i=$(c);{var l=d=>{var h=ys(),u=$(h);ct(u,()=>ke,(v,b)=>{b(v,{opts:{align:"center",loop:!0},children:(_,C)=>{var P=bs(),w=B(P);ct(w,()=>je,(M,T)=>{T(M,{class:"-ml-4",children:(k,H)=>{var V=tt(),q=B(V);Bt(q,17,()=>t.question.images,Qt,(st,Q)=>{var U=tt(),J=B(U);ct(J,()=>$e,(rt,K)=>{K(rt,{class:"pl-4 basis-full",children:(dt,gt)=>{var Z=xs();St(()=>Ne(Z,"src",S(Q))),L(dt,Z)},$$slots:{default:!0}})}),L(st,U)}),L(k,V)},$$slots:{default:!0}})});var I=Y(w,2);ct(I,()=>Ve,(M,T)=>{T(M,{class:"absolute top-1/2 -translate-y-1/2 left-1 z-10 bg-white/85 rounded-full w-10 h-10 flex items-center justify-center shadow-sm border-none cursor-pointer text-gray-800 hover:bg-white"})});var E=Y(I,2);ct(E,()=>Be,(M,T)=>{T(M,{class:"absolute top-1/2 -translate-y-1/2 right-1 z-10 bg-white/85 rounded-full w-10 h-10 flex items-center justify-center shadow-sm border-none cursor-pointer text-gray-800 hover:bg-white"})}),L(_,P)},$$slots:{default:!0}})}),F(h),L(d,h)},p=d=>{var h=tt(),u=B(h);{var v=b=>{var _=ws();L(b,_)};lt(u,b=>{n()&&b(v)},!0)}L(d,h)};lt(i,d=>{t.question?.images&&t.question.images.length>0?d(l):d(p,!1)})}var f=Y(i,6),m=$(f);Le(m,{type:"text",placeholder:"Svenskt namn",required:!0,autocomplete:"off",class:"text-lg p-3",get value(){return S(r)},set value(d){at(r,d,!0)},get ref(){return S(s)},set ref(d){at(s,d,!0)}});var x=Y(m,2);Le(x,{type:"text",placeholder:"Latinskt namn",required:!0,autocomplete:"off",class:"text-lg p-3",get value(){return S(a)},set value(d){at(a,d,!0)}});var g=Y(x,2);_t(g,{type:"submit",class:"w-full",children:(d,h)=>{vt();var u=Rt("Svara");L(d,u)},$$slots:{default:!0}}),F(f),F(c),ze("submit",f,o),L(e,c),nt()}var Ps=O('<div class="mb-8 flex flex-col items-center"><!></div>');function Is(e,t){et(t,!0);let n=j(t,"loadingImages",3,!1);function r(i){t.onanswer?.(i)}var a=Ps(),s=$(a);{var o=i=>{ps(i,{get question(){return t.question},get options(){return t.options},get loadingImages(){return n()},onanswer:r})},c=i=>{var l=tt(),p=B(l);{var f=x=>{vs(x,{get question(){return t.question},get options(){return t.options},onanswer:r})},m=x=>{var g=tt(),d=B(g);{var h=u=>{_s(u,{get question(){return t.question},get loadingImages(){return n()},onanswer:r})};lt(d,u=>{t.mode?.id==="imageToNameFreetext"&&u(h)},!0)}L(x,g)};lt(p,x=>{t.mode?.id==="swedish-to-latin"?x(f):x(m,!1)},!0)}L(i,l)};lt(s,i=>{t.mode?.id==="image-to-swedish"?i(o):i(c,!1)})}F(a),L(e,a),nt()}var Ls=O('<div class="mb-4"><div class="text-base font-medium mb-2"> </div> <!></div>');function Ts(e,t){let n=j(t,"current",8),r=j(t,"total",8);var a=Ls(),s=$(a),o=$(s);F(s);var c=Y(s,2);vn(c,{get value(){return n()},get max(){return r()},"aria-label":"Quiz progress"}),F(a),St(()=>$t(o,`Fråga ${n()??""} av ${r()??""}`)),L(e,a)}const Es=()=>{const e=gn;return{page:{subscribe:e.page.subscribe},navigating:{subscribe:e.navigating.subscribe},updated:e.updated}},Cs={subscribe(e){return Es().page.subscribe(e)}};function Ms(e){if(e.manualPhotos&&e.manualPhotos.length>0){const i=[...e.manualPhotos];return jt(i),i.slice(0,4)}const t=e.taxonPhotos||[],n=e.observationPhotos||[],r=[...t];jt(r);const a=[...n];jt(a);let s=[],o=Math.min(2,r.length),c=Math.min(2,a.length);if(s=[...r.slice(0,o),...a.slice(0,c)],s.length<4){let i=r.slice(o),l=a.slice(c),p=[...i,...l];for(let f=0;f<p.length&&s.length<4;f++)s.includes(p[f])||s.push(p[f])}return jt(s),s}function jt(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}}async function As(e){let t=await fetch(Pe("/preprocessed/plants.json"));t.ok||(console.warn("Preprocessed data not found, falling back to original"),t=await fetch(Pe("/plants.json")));let n=await t.json();return e&&(e==="image-to-swedish"||e==="imageToNameFreetext")&&(n=n.map(r=>{const a=Ms(r);return{...r,images:a}})),n}var zs=O('<div class="fixed inset-0 flex flex-col items-center justify-center bg-background/25 backdrop-blur-[2.5px] z-[200] pointer-events-auto transition-colors"><div class="w-12 h-12 border-4 border-border border-t-primary rounded-full animate-spin mb-5"></div> <div class="text-xl text-foreground tracking-wide font-medium flex items-center justify-center min-h-[2em]">Laddar frågor<span class="opacity-20 animate-pulse text-xl ml-0.5">.</span><span class="opacity-20 animate-pulse delay-200 text-xl ml-0.5">.</span><span class="opacity-20 animate-pulse delay-400 text-xl ml-0.5">.</span></div></div>'),Ns=O('<div class="w-full flex justify-center items-center pt-5 pb-2 bg-transparent max-md:pt-3 max-md:pb-1"><!></div> <!>',1),Os=O('<div style="display: flex; justify-content: center; margin-top: 2em;"><!></div>'),ks=O('<p class="quiz-loading">Inga frågor tillgängliga.</p>'),Ds=O("<main><!> <!></main>");function Js(e,t){et(t,!1);const n=()=>mn(qt,"$quiz",r),[r,a]=dn(),s=Ft();let o=Ft(!0),c=Ft(void 0);async function i(u){const v=ee.find(_=>_.id===u)||ee[0];at(c,v),S(c).id,at(o,!0);const b=await As(S(c).id);S(c)&&qt.start(b,S(c)),at(o,!1)}tn(()=>{const v=en(Cs).url.searchParams.get("mode")||ee[0].id;return i(v),qt.subscribe(_=>{_.finished&&_e(Ie("/result"))})});function l(u){qt.answer(u)}function p(u){return!S(s).questions.length||!S(c)?[]:S(c).getOptions(S(s).questions,u)}let f=Ft(!1);we(()=>n(),()=>{at(s,n())}),we(()=>(S(o),S(c)),()=>{at(f,S(o)&&(S(c)?.id==="image-to-swedish"||S(c)?.id==="imageToNameFreetext"))}),fn(),We();var m=Ds(),x=$(m);_t(x,{onclick:()=>_e(Ie("/")),class:"fixed top-8 left-8 z-50 rounded-full px-6 py-3 text-lg shadow-md bg-background text-foreground border border-border transition-all hover:bg-muted hover:shadow-lg max-md:top-4 max-md:left-4 max-md:px-5 max-md:py-2 max-md:text-base","aria-label":"Hem",children:(u,v)=>{vt();var b=Rt("Hem");L(u,b)},$$slots:{default:!0}});var g=Y(x,2);{var d=u=>{var v=zs();L(u,v)},h=u=>{var v=tt(),b=B(v);{var _=P=>{var w=Os(),I=$(w);pn(I,{style:"max-width: 480px; width: 100%; min-height: 420px; box-shadow: 0 2px 16px #0001; position: relative; display: flex; flex-direction: column; justify-content: flex-start;",children:(E,M)=>{var T=Ns(),k=B(T),H=$(k);{let q=Se(()=>(S(s),wt(()=>S(s).current+1)));Ts(H,{get current(){return S(q)},get total(){return S(s),wt(()=>S(s).questions.length)}})}F(k);var V=Y(k,2);hn(V,{children:(q,st)=>{var Q=tt(),U=B(Q);{var J=rt=>{{let K=Se(()=>(S(s),wt(()=>p(S(s).current))));Is(rt,{get question(){return S(s),wt(()=>S(s).questions[S(s).current])},get options(){return S(K)},get mode(){return S(c)},get loadingImages(){return S(f)},onanswer:l})}};lt(U,rt=>{S(c)&&rt(J)})}L(q,Q)},$$slots:{default:!0}}),L(E,T)},$$slots:{default:!0}}),F(w),L(P,w)},C=P=>{var w=ks();L(P,w)};lt(b,P=>{S(s),wt(()=>S(s).questions.length&&!S(s).finished)?P(_):P(C,!1)},!0)}L(u,v)};lt(g,u=>{S(o)?u(d):u(h,!1)})}F(m),L(e,m),nt(),a()}export{Js as component};
